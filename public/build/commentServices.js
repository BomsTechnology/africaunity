var r=(l,u,t)=>new Promise((e,v)=>{var d=s=>{try{m(t.next(s))}catch(c){v(c)}},g=s=>{try{m(t.throw(s))}catch(c){v(c)}},m=s=>s.done?e(s.value):Promise.resolve(s.value).then(d,g);m((t=t.apply(l,u)).next())});import{r as i,p as n}from"./app.js";function f(){const l=i([]),u=i([]),t=i(""),e=i(0);return{comments:l,comment:u,errors:t,loading:e,getComments:()=>r(this,null,function*(){t.value="",e.value=!0;let a=yield n.get("/api/comments",{headers:{Authorization:`Bearer ${localStorage.token}`}});l.value=a.data.data,e.value=!1}),getComment:a=>r(this,null,function*(){t.value="",e.value=!0;let o=yield n.get("/api/comments/"+a,{headers:{Authorization:`Bearer ${localStorage.token}`}});e.value=0,u.value=o.data.data}),createComment:a=>r(this,null,function*(){t.value="";try{e.value=!0,yield n.post("/api/comments",a,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e.value=!1}catch(o){if(o.response.status==422){e.value=0;for(const p in o.response.data.errors)t.value+=o.response.data.errors[p][0]+`
`}}}),updateComment:a=>r(this,null,function*(){t.value="";try{e.value=!0,yield n.put("/api/comments/"+a.id,a,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e.value=!1}catch(o){if(e.value=0,o.response.status==422)for(const p in o.response.data.errors)t.value+=o.response.data.errors[p][0]+`	
`}}),destroyComment:a=>r(this,null,function*(){console.log(a),t.value="";try{return e.value=!0,yield n.delete(`/api/comments/${JSON.stringify(a)}`,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e.value=!1,!0}catch(o){e.value=0,t.value="Impossible de supprimer ce comment"}}),getCommentsPost:a=>r(this,null,function*(){t.value="",e.value=!0;let o=yield n.get("/api/comments-post/"+a,{headers:{Authorization:`Bearer ${localStorage.token}`}});l.value=o.data.data,e.value=!1}),getCommentsUser:a=>r(this,null,function*(){t.value="",e.value=!0;let o=yield n.get("/api/comments-user/"+a,{headers:{Authorization:`Bearer ${localStorage.token}`}});l.value=o.data.data,e.value=!1})}}export{f as u};
