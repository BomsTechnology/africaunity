var i=(s,v,r)=>new Promise((e,c)=>{var d=o=>{try{g(r.next(o))}catch(m){c(m)}},y=o=>{try{g(r.throw(o))}catch(m){c(m)}},g=o=>o.done?e(o.value):Promise.resolve(o.value).then(d,y);g((r=r.apply(s,v)).next())});import{r as u,p as n,q as l}from"./app.js";function I(){const s=u([]),v=u([]),r=u(""),e=u(0),c=u(!1),d=u(1);return{filterUniversities:a=>i(this,null,function*(){r.value="";try{e.value=3;let t=yield n.post("/api/universities-filter",a,{headers:{Authorization:`Bearer ${localStorage.token}`}});s.value=t.data.data,e.value=!1}catch(t){t.response.status==401&&(l.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}}),isAll:c,page:d,universities:s,university:v,errors:r,loading:e,getUniversities:()=>i(this,null,function*(){r.value="";try{e.value=!0;let a=yield n.get("/api/universities?page="+d.value,{headers:{Authorization:`Bearer ${localStorage.token}`}});d.value==1?s.value=a.data.data:s.value=s.value.concat(a.data.data),e.value=!1,a.data.data.length==0&&(c.value=!0)}catch(a){a.response.status==401&&(l.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}}),getAllUniversities:()=>i(this,null,function*(){r.value="";try{s.value=[],e.value=!0;let a=yield n.get("/api/university/all",{headers:{Authorization:`Bearer ${localStorage.token}`}});s.value=a.data.data,e.value=!1}catch(a){a.response.status==401&&(l.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}}),getUniversity:a=>i(this,null,function*(){r.value="";try{e.value=!0;let t=yield n.get("/api/universities/"+a,{headers:{Authorization:`Bearer ${localStorage.token}`}});e.value=0,v.value=t.data.data}catch(t){t.response.status==401&&(l.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}}),createUniversity:a=>i(this,null,function*(){r.value="";try{e.value=!0,yield n.post("/api/universities",a,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e.value=!1,l.push({name:"admin.university.index"})}catch(t){if(t.response.status==422){e.value=0;for(const p in t.response.data.errors)r.value+=t.response.data.errors[p][0]+`
`}}}),updateUniversity:(a,t)=>i(this,null,function*(){r.value="";try{e.value=!0,yield n.post("/api/universities/"+t,a,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e.value=!1,l.push({name:"admin.university.index"})}catch(p){if(e.value=0,p.response.status==422)for(const h in p.response.data.errors)r.value+=p.response.data.errors[h][0]+`	
`}}),destroyUniversity:a=>i(this,null,function*(){r.value="";try{e.value=!0,yield n.delete(`/api/universities/${JSON.stringify(a)}`,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e.value=!1}catch(t){e.value=0,t.response.status=="500"&&(r.value="Impossible de supprimer cette universit\xE9")}}),getUniversity2:a=>i(this,null,function*(){r.value="";try{e.value=!0;let t=yield n.get("/api/universities2/"+a,{headers:{Authorization:`Bearer ${localStorage.token}`}});e.value=0,v.value=t.data.data}catch(t){t.response.status==401&&(l.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}})}}export{I as u};
