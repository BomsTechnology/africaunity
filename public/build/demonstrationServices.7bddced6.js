var s=(l,u,a)=>new Promise((t,v)=>{var g=r=>{try{d(a.next(r))}catch(c){v(c)}},h=r=>{try{d(a.throw(r))}catch(c){v(c)}},d=r=>r.done?t(r.value):Promise.resolve(r.value).then(g,h);d((a=a.apply(l,u)).next())});import{r as p,p as n,q as m}from"./app.59e8d623.js";function D(){const l=p([]),u=p([]),a=p(""),t=p(0);return{filterDemonstration:o=>s(this,null,function*(){a.value="";try{t.value=1;let e=yield n.post("/api/demonstrations-filter",o,{headers:{Authorization:`Bearer ${localStorage.token}`}});l.value=e.data.data,t.value=0}catch(e){e.response.status==401?(m.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=e.response.data.message}}),demonstrations:l,demonstration:u,errors:a,loading:t,markedDemonstration:o=>s(this,null,function*(){a.value="";try{t.value=!0;let e=yield n.get("/api/demonstrations-mark/"+o,{headers:{Authorization:`Bearer ${localStorage.token}`}});l.value=e.data.data,t.value=!1}catch(e){e.response.status==401?(m.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=e.response.data.message}}),getDemonstrations:()=>s(this,null,function*(){a.value="",t.value=!0;try{let o=yield n.get("/api/demonstrations/",{headers:{Authorization:`Bearer ${localStorage.token}`}});l.value=o.data.data,t.value=!1}catch(o){o.response.status==401?(m.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=o.response.data.message}}),getDemonstration:o=>s(this,null,function*(){a.value="";try{t.value=!0;let e=yield n.get("/api/demonstrations/"+o,{headers:{Authorization:`Bearer ${localStorage.token}`}});t.value=0,u.value=e.data.data}catch(e){e.response.status==401?(m.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=e.response.data.message}}),createDemonstration:o=>s(this,null,function*(){a.value="";try{t.value=!0,yield n.post("/api/demonstrations",o,{headers:{Authorization:`Bearer ${localStorage.token}`,"Content-Type":"multipart/form-data"}}),t.value=!1}catch(e){if(t.value=0,e.response.status==422)for(const i in e.response.data.errors)a.value+=e.response.data.errors[i][0]+`
`;else a.value=e.response.data.message}}),updateDemonstration:(o,e)=>s(this,null,function*(){a.value="";try{t.value=!0,yield n.post("/api/demonstrations/"+u.value.id,o,{headers:{Authorization:`Bearer ${localStorage.token}`,"Content-Type":"multipart/form-data"}}),t.value=!1}catch(i){if(t.value=0,i.response.status==422)for(const w in i.response.data.errors)a.value+=i.response.data.errors[w][0]+`	
`;else a.value=i.response.data.message}}),destroyDemonstration:o=>s(this,null,function*(){a.value="";try{t.value=!0,yield n.delete(`/api/demonstrations/${JSON.stringify(o)}`,{headers:{Authorization:`Bearer ${localStorage.token}`}}),t.value=!1}catch(e){t.value=0,e.response.status=="500"?a.value="Impossible de supprimer ce demonstration":a.value=e.response.data.message}}),getDemonstrationsUser:o=>s(this,null,function*(){a.value="";try{t.value=!0;let e=yield n.get("/api/demonstrations-user/"+o,{headers:{Authorization:`Bearer ${localStorage.token}`}});l.value=e.data.data,t.value=!1}catch(e){e.response.status==401?(m.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=e.response.data.message}})}}export{D as u};
