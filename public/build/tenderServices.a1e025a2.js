import{r as n,n as o,p as l}from"./app.1a4e1017.js";function I(){const s=n([]),u=n([]),r=n(""),a=n(0),c=n(!1),i=n(1);return{isAll:c,page:i,tenders:s,tender:u,errors:r,loading:a,filterJobs:async e=>{r.value="";try{a.value=3;let t=await o.post("/api/tenders-filter",e,{headers:{Authorization:`Bearer ${localStorage.token}`}});s.value=t.data.data,a.value=!1}catch(t){t.response.status==401&&(l.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}},getTenders:async()=>{r.value="";try{a.value=!0;let e=await o.get("/api/tenders/",{headers:{Authorization:`Bearer ${localStorage.token}`}});s.value=e.data.data,a.value=!1}catch(e){e.response.status==401&&(l.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}},getTender:async e=>{r.value="";try{a.value=!0;let t=await o.get("/api/tenders/"+e,{headers:{Authorization:`Bearer ${localStorage.token}`}});a.value=0,u.value=t.data.data}catch(t){t.response.status==401&&(l.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}},createTender:async e=>{r.value="";try{a.value=!0,await o.post("/api/tenders",e,{headers:{Authorization:`Bearer ${localStorage.token}`,"Content-Type":"multipart/form-data"}}),a.value=!1}catch(t){if(t.response.status==422){a.value=0;for(const d in t.response.data.errors)r.value+=t.response.data.errors[d][0]+`
`}}},updateTender:async e=>{r.value="";try{a.value=!0,await o.post("/api/tenders/"+u.value.id,e,{headers:{Authorization:`Bearer ${localStorage.token}`,"Content-Type":"multipart/form-data"}}),a.value=!1}catch(t){if(a.value=0,t.response.status==422)for(const d in t.response.data.errors)r.value+=t.response.data.errors[d][0]+`	
`}},destroyTender:async e=>{r.value="";try{a.value=!0,await o.delete(`/api/tenders/${JSON.stringify(e)}`,{headers:{Authorization:`Bearer ${localStorage.token}`}}),a.value=!1}catch(t){a.value=0,t.response.status=="500"&&(r.value="Impossible de supprimer ce tender")}},getTendersUser:async e=>{r.value="";try{a.value=!0;let t=await o.get("/api/tenders-user/"+e,{headers:{Authorization:`Bearer ${localStorage.token}`}});s.value=t.data.data,a.value=!1}catch(t){t.response.status==401&&(l.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}},getTender2:async e=>{r.value="",a.value=!0;let t=await o.get("/api/tenders2/"+e,{headers:{Authorization:`Bearer ${localStorage.token}`}});a.value=0,u.value=t.data.data},markFilled:async e=>{r.value="";try{a.value=!0,await o.get("/api/tenders-mark-filled/"+e,{headers:{Authorization:`Bearer ${localStorage.token}`}}),a.value=!1}catch(t){a.value=0,t.response.status=="500"&&(r.value="Impossible de supprimer ce tender")}},getTendersFront:async()=>{r.value="";try{a.value=!0;let e=await o.get("/api/tenders-front?page="+i.value,{headers:{Authorization:`Bearer ${localStorage.token}`}});i.value==1?s.value=e.data.data:s.value=s.value.concat(e.data.data),a.value=!1,e.data.data.length==0&&(c.value=!0)}catch(e){e&&e.response.status==401?(l.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):console.log(e)}}}}export{I as u};
