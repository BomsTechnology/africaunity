import{r as l,p as o,q as i}from"./app.4a599ac6.js";function I(){const n=l([]),c=l([]),s=l(""),a=l(0),d=l(!1),p=l(1);return{filterUserConversation:async t=>{s.value="";try{a.value=!0;let e=await o.get("/api/users-filter/conversation/"+t,{headers:{Authorization:`Bearer ${localStorage.token}`}});n.value=e.data.data,a.value=!1}catch(e){e.response.status==401&&(i.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}},isAll:d,page:p,users:n,user:c,errors:s,loading:a,deleteUserData:async t=>{s.value="";try{a.value=!0;let e=await o.post("/api/users-delete-data",t,{headers:{Authorization:`Bearer ${localStorage.token}`}});a.value=!1}catch(e){if(a.value=0,e.response.status==422)for(const r in e.response.data.errors)s.value+=e.response.data.errors[r][0]+`	
`;else e.response.status==401&&(s.value=e.response.data.message)}},getUsers:async()=>{try{s.value="",a.value=!0;let t=await o.get("/api/users",{headers:{Authorization:`Bearer ${localStorage.token}`}});n.value=t.data.data,a.value=!1}catch(t){t.response.status==401&&(i.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}},getUser:async t=>{s.value="";try{a.value=!0;let e=await o.get("/api/users/"+t,{headers:{Authorization:`Bearer ${localStorage.token}`}});a.value=0,c.value=e.data.data}catch(e){e.response.status==401&&(i.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}},createUser:async t=>{s.value="";try{a.value=!0,await o.post("/api/users",t,{headers:{Authorization:`Bearer ${localStorage.token}`}}),a.value=!1}catch(e){if(e.response.status==422){a.value=0;for(const r in e.response.data.errors)s.value+=e.response.data.errors[r][0]+`
`}}},updateUser:async(t,e)=>{s.value="";try{a.value=!0;let r=await o.post("/api/users/"+t,e,{headers:{Authorization:`Bearer ${localStorage.token}`,"Content-Type":"multipart/form-data"}});a.value=!1,localStorage.user=JSON.stringify(r.data.data),location.reload()}catch(r){if(a.value=0,r.response.status==422)for(const u in r.response.data.errors)s.value+=r.response.data.errors[u][0]+`	
`}},destroyUser:async t=>{s.value="";try{return a.value=!0,await o.delete(`/api/users/${JSON.stringify(t)}`,{headers:{Authorization:`Bearer ${localStorage.token}`}}),a.value=!1,!0}catch{a.value=0,s.value="Impossible de supprimer ce user"}},updatePasswordUser:async(t,e)=>{s.value="";try{a.value=!0,await o.put("/api/users-change-password/"+t,e,{headers:{Authorization:`Bearer ${localStorage.token}`}}),a.value=!1}catch(r){if(a.value=0,r.response.status==422)for(const u in r.response.data.errors)s.value+=r.response.data.errors[u][0]+`	
`;else r.response.status==401&&(s.value=r.response.data.message)}},updateStatusUser:async(t,e)=>{s.value="";try{a.value=!0;let r=await o.put("/api/users-change-status/"+t,e,{headers:{Authorization:`Bearer ${localStorage.token}`}});a.value=!1,localStorage.user=JSON.stringify(r.data.data)}catch(r){if(a.value=0,r.response.status==422)for(const u in r.response.data.errors)s.value+=r.response.data.errors[u][0]+`	
`}},destroyUserFront:async t=>{s.value="";try{a.value=!0;let e=await o.post("/api/users-delete-user",t,{headers:{Authorization:`Bearer ${localStorage.token}`}});a.value=!1}catch(e){if(a.value=0,e.response.status==422)for(const r in e.response.data.errors)s.value+=e.response.data.errors[r][0]+`	
`;else e.response.status==401&&(s.value=e.response.data.message)}},getUsersType:async t=>{try{s.value="",a.value=!0;let e=await o.get("/api/users-type/"+t+"?page="+p.value,{headers:{Authorization:`Bearer ${localStorage.token}`}});p.value==1?n.value=e.data.data:n.value=n.value.concat(e.data.data),a.value=!1,e.data.data.length==0&&(d.value=!0)}catch(e){e.response.status==401&&(i.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}},filterUsers:async t=>{s.value="";try{a.value=3;let e=await o.post("/api/users-filter",t,{headers:{Authorization:`Bearer ${localStorage.token}`}});n.value=e.data.data,a.value=!1}catch(e){e.response.status==401&&(i.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}},updateUser2:async()=>{s.value="";try{a.value=!0;let t=await o.put("/api/users-update/"+c.value.id,c.value,{headers:{Authorization:`Bearer ${localStorage.token}`}});a.value=!1}catch(t){if(a.value=0,t.response.status==422)for(const e in t.response.data.errors)s.value+=t.response.data.errors[e][0]+`	
`}}}}export{I as u};
