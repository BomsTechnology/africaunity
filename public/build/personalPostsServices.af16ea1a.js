import{r as l,n as o,p as n}from"./app.1097d858.js";function k(){const r=l([]),u=l([]),a=l(""),s=l(0),c=l(!1),i=l(1);return{isAll:c,page:i,filterPersonalPost:async t=>{a.value="";try{s.value=3;let e=await o.post("/api/personalPosts-filter",t,{headers:{Authorization:`Bearer ${localStorage.token}`}});r.value=e.data.data,s.value=0}catch(e){e.response.status==401?(n.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=e.response.data.message}},personalPosts:r,personalPost:u,errors:a,loading:s,getPersonalPostsLang:async t=>{a.value="";try{s.value=!0;let e=await o.get("/api/personalPosts-lang/"+t,{headers:{Authorization:`Bearer ${localStorage.token}`}});r.value=e.data.data,s.value=!1}catch(e){e.response.status==401?(n.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=e.response.data.message}},getPersonalPosts:async()=>{a.value="",s.value=!0;try{let t=await o.get("/api/personalPosts?page="+i.value,{headers:{Authorization:`Bearer ${localStorage.token}`}});i.value==1?r.value=t.data.data:r.value=r.value.concat(t.data.data),s.value=!1,t.data.data.length==0&&(c.value=!0)}catch(t){t.response.status==401?(n.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=t.response.data.message}},getPersonalPost:async t=>{a.value="";try{s.value=!0;let e=await o.get("/api/personalPosts/"+t,{headers:{Authorization:`Bearer ${localStorage.token}`}});s.value=0,u.value=e.data.data}catch(e){e.response.status==401?(n.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=e.response.data.message}},createPersonalPost:async t=>{a.value="";try{s.value=!0,await o.post("/api/personalPosts",t,{headers:{Authorization:`Bearer ${localStorage.token}`,"Content-Type":"multipart/form-data"}}),s.value=!1}catch(e){if(s.value=0,e.response.status==422)for(const p in e.response.data.errors)a.value+=e.response.data.errors[p][0]+`
`;else a.value=e.response.data.message}},updatePersonalPost:async t=>{a.value="";try{s.value=!0,await o.post("/api/personalPosts/"+u.value.id,t,{headers:{Authorization:`Bearer ${localStorage.token}`,"Content-Type":"multipart/form-data"}}),s.value=!1}catch(e){if(s.value=0,e.response.status==422)for(const p in e.response.data.errors)a.value+=e.response.data.errors[p][0]+`	
`;else a.value=e.response.data.message}},destroyPersonalPost:async t=>{a.value="";try{s.value=!0,await o.delete(`/api/personalPosts/${JSON.stringify(t)}`,{headers:{Authorization:`Bearer ${localStorage.token}`}}),s.value=!1}catch(e){s.value=0,e.response.status=="500"?a.value="Impossible de supprimer ce personalPost":a.value=e.response.data.message}},getPersonalPostsAll:async t=>{a.value="";try{s.value=!0;let e=await o.get("/api/personalPosts-all/",{headers:{Authorization:`Bearer ${localStorage.token}`}});r.value=e.data.data,s.value=!1}catch(e){e.response.status==401?(n.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=e.response.data.message}},getPersonalPostsUser:async t=>{a.value="";try{s.value=!0;let e=await o.get("/api/personalPosts-user/"+t,{headers:{Authorization:`Bearer ${localStorage.token}`}});r.value=e.data.data,s.value=!1}catch(e){e.response.status==401?(n.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=e.response.data.message}}}}export{k as u};
