var s=(c,l,o)=>new Promise((a,e)=>{var m=r=>{try{i(o.next(r))}catch(y){e(y)}},d=r=>{try{i(o.throw(r))}catch(y){e(y)}},i=r=>r.done?a(r.value):Promise.resolve(r.value).then(m,d);i((o=o.apply(c,l)).next())});import{G as v,r as g,p as u}from"./app.js";function f(){const c=v(),l=g([]),o=g([]),a=g(""),e=g(0);return{categoryAnnouncements:l,categoryAnnouncement:o,errors:a,loading:e,getCategoryAnnouncements:()=>s(this,null,function*(){a.value="",e.value=!0;let n=yield u.get("/api/categoryAnnouncements",{headers:{Authorization:`Bearer ${localStorage.token}`}});l.value=n.data.data,e.value=!1}),getCategoryAnnouncement:n=>s(this,null,function*(){a.value="",e.value=!0;let t=yield u.get("/api/categoryAnnouncements/"+n,{headers:{Authorization:`Bearer ${localStorage.token}`}});e.value=0,o.value=t.data.data}),createCategoryAnnouncement:n=>s(this,null,function*(){a.value="";try{e.value=!0,yield u.post("/api/categoryAnnouncements",n,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e.value=!1,c.push({name:"admin.category.index"})}catch(t){if(t.response.status==422){e.value=0;for(const p in t.response.data.errors)a.value+=t.response.data.errors[p][0]+`
`}}}),updateCategoryAnnouncement:n=>s(this,null,function*(){a.value="";try{e.value=!0,yield u.put("/api/categoryAnnouncements/"+n,o.value,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e.value=!1,c.push({name:"admin.category.index"})}catch(t){if(e.value=0,t.response.status==422)for(const p in t.response.data.errors)a.value+=t.response.data.errors[p][0]+`	
`}}),destroyCategoryAnnouncement:n=>s(this,null,function*(){a.value="";try{e.value=!0,yield u.delete(`/api/categoryAnnouncements/${JSON.stringify(n)}`,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e.value=!1}catch(t){e.value=0,t.response.status=="500"&&(a.value="Impossible de supprimer ce pays")}})}}export{f as u};
