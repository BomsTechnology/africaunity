var g=(d,c,s)=>new Promise((o,u)=>{var v=a=>{try{n(s.next(a))}catch(p){u(p)}},r=a=>{try{n(s.throw(a))}catch(p){u(p)}},n=a=>a.done?o(a.value):Promise.resolve(a.value).then(v,r);n((s=s.apply(d,c)).next())});import{r as i,p as b,o as B,b as x,d as h,e as _,f as e,I as w,J as M,K as z,g as k,h as f,w as y,l as R,t as D,k as V}from"./app.59e8d623.js";import{r as C}from"./TrashIcon.564fd26b.js";import{r as N}from"./UserCircleIcon.87b9d93c.js";function $(){const d=i([]),c=i([]),s=i(""),o=i(0);return{reportings:d,reporting:c,errors:s,loading:o,getReportings:()=>g(this,null,function*(){s.value="",o.value=!0;let r=yield b.get("/api/reports",{headers:{Authorization:`Bearer ${localStorage.token}`}});d.value=r.data.data,o.value=!1}),destroyReporting:r=>g(this,null,function*(){s.value="";try{return o.value=!0,yield b.delete(`/api/reports/${JSON.stringify(r)}`,{headers:{Authorization:`Bearer ${localStorage.token}`}}),o.value=!1,!0}catch(n){o.value=0,s.value="Impossible de supprimer ce reporting"}})}}const j={class:"relative h-auto min-h-screen w-full bg-white xl:mt-0 xl:p-4"},I={class:"z-0 h-full w-full p-4"},U=e("div",{class:"flex justify-between bg-white px-8 py-5"},[e("h1",{class:"text-4xl font-bold capitalize text-primary-blue"}," Reporting ")],-1),A={class:"items-center justify-between lg:flex"},O={class:"items-end space-x-2 p-4 lg:flex"},F=e("label",{for:""},"Filter by:",-1),H=e("option",{value:"firstname"},"Name",-1),J=e("option",{value:"email"},"Email",-1),L=[H,J],P={class:"relative mt-1"},K=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("svg",{class:"dark:text-gray-400 h-5 w-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1),q={class:""},G=e("span",{class:"hidden text-sm font-thin lg:block"},"Delete",-1),Q=["src"],W={class:"block"},X=["innerHTML"],se={__name:"Reporting",setup(d){const{reportings:c,getReportings:s,destroyReporting:o,loading:u,errors:v}=$(),r=i([]),n=i("firstname"),a=i("");B(()=>g(this,null,function*(){yield s()}));const p=()=>g(this,null,function*(){if(r.value.length!=0){const m=i([]);r.value.forEach(l=>{m.value.push(l.id)}),confirm("I you Sure ?")&&(yield o(m.value),v.value==""&&(yield s(),r.value=[]))}}),S=[{text:"USER REPORT",value:"user"},{text:"Type",value:"type"},{text:"REPORTED",value:"reported"}];return(m,l)=>{const E=x("router-link"),T=x("EasyDataTable");return h(),_("div",j,[e("div",I,[U,e("div",A,[e("div",O,[e("div",null,[F,w(e("select",{"onUpdate:modelValue":l[0]||(l[0]=t=>n.value=t),class:"form-select mt-2 block w-32 rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},L,512),[[M,n.value]])]),e("div",P,[K,w(e("input",{"onUpdate:modelValue":l[1]||(l[1]=t=>a.value=t),type:"text",id:"table-search",class:"dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 block w-80 rounded-lg border border-gray-300 bg-gray-50 p-2.5 pl-10 text-sm text-gray-900 focus:border-primary-blue focus:ring-primary-blue",placeholder:"Search for items"},null,512),[[z,a.value]])])]),e("div",q,[e("button",{type:"button",title:"delete",onClick:l[2]||(l[2]=t=>p()),class:"flex items-center justify-between space-x-2 rounded border border-red-500 p-2 text-red-500 hover:bg-red-500 hover:text-white"},[k(f(C),{class:"h-6 w-6"}),G])])]),k(T,{"items-selected":r.value,"onUpdate:itemsSelected":l[3]||(l[3]=t=>r.value=t),headers:S,items:f(c),alternating:"","search-field":n.value,"search-value":a.value,"show-index":"","buttons-pagination":"",loading:f(u)},{"item-user":y(t=>[t.user?(h(),R(E,{key:0,to:{name:"compte",params:{slug:t.user.slug,id:t.user.id}},class:"flex items-center gap-2 py-3 text-indigo-600 hover:underline"},{default:y(()=>[t.user.avatar?(h(),_("img",{key:0,src:t.user.avatar,alt:"",class:"h-12 w-12 rounded-full object-cover"},null,8,Q)):(h(),R(f(N),{key:1,class:"h-12 w-12 text-gray-700"})),e("span",W,D(t.user.firstname),1)]),_:2},1032,["to"])):V("",!0)]),expand:y(t=>[e("div",{class:"p-4",innerHTML:t.content},null,8,X)]),_:1},8,["items-selected","items","search-field","search-value","loading"])])])}}};export{se as default};
