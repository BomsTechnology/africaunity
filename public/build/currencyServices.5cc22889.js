var n=(i,u,r)=>new Promise((e,o)=>{var v=s=>{try{l(r.next(s))}catch(p){o(p)}},h=s=>{try{l(r.throw(s))}catch(p){o(p)}},l=s=>s.done?e(s.value):Promise.resolve(s.value).then(v,h);l((r=r.apply(i,u)).next())});import{r as y,G as f,p as c}from"./app.59e8d623.js";function m(){const i=y([]),u=y([]),r=y(""),e=y(0),o=f();return{currencies:i,currency:u,errors:r,loading:e,getCurrencies:()=>n(this,null,function*(){r.value="",e.value=!0;let t=yield c.get("/api/currencies",{headers:{Authorization:`Bearer ${localStorage.token}`}});i.value=t.data.data,e.value=!1}),getCurrency:t=>n(this,null,function*(){r.value="",e.value=!0;let a=yield c.get("/api/currencies/"+t,{headers:{Authorization:`Bearer ${localStorage.token}`}});e.value=0,u.value=a.data.data}),createCurrency:t=>n(this,null,function*(){r.value="";try{e.value=!0,yield c.post("/api/currencies",t,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e.value=!1,o.push({name:"admin.currency.index"})}catch(a){if(a.response.status==422){e.value=0;for(const d in a.response.data.errors)r.value+=a.response.data.errors[d][0]+`
`}}}),updateCurrency:t=>n(this,null,function*(){r.value="";try{e.value=!0,yield c.put("/api/currencies/"+t,u.value,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e.value=!1,o.push({name:"admin.currency.index"})}catch(a){if(e.value=0,a.response.status==422)for(const d in a.response.data.errors)r.value+=a.response.data.errors[d][0]+`	
`}}),destroyCurrency:t=>n(this,null,function*(){r.value="";try{e.value=!0,yield c.delete(`/api/currencies/${JSON.stringify(t)}`,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e.value=!1}catch(a){e.value=0,a.response.status=="500"&&(r.value="Impossible de supprimer ce pays")}})}}export{m as u};
