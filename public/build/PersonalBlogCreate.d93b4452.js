import{u as N,r as p,a as R,o as D,c as n,d as l,e,t as a,g as d,k as M,w as h,j as i,m as c,l as O,i as g,K as x,J as v,F as P,x as T,f as k,T as I,H as J,b as w}from"./app.1097d858.js";import{u as z}from"./categoryPersonalPostServices.cda2921e.js";import{u as H}from"./personalPostsServices.af16ea1a.js";const K={class:"text-center text-2xl font-bold text-gray-500 sm:text-4xl"},A={class:"mx-auto w-full rounded-md bg-white p-6 shadow-xl"},G={class:"mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},Q={class:"col-span-2"},W={class:"dark:text-gray-200 text-gray-700"},X=e("span",{class:"text-red-500"},"*",-1),Y={class:"text-xs font-light text-gray-400"},Z={class:"col-span-2"},ee=e("label",{class:"dark:text-gray-200 text-gray-700",for:"en"},"Language",-1),te=e("option",{value:"fr"},"French",-1),se=e("option",{value:"en"},"English",-1),oe=e("option",{value:"es"},"Espanol",-1),ae=e("option",{value:"pt"},"Portugues",-1),re=[te,se,oe,ae],ne={class:"col-span-2"},le={class:"dark:text-gray-200 text-gray-700",for:"es"},ie=e("span",{class:"text-red-500"},"*",-1),de=["value"],ce={key:0},ue={key:1},pe={key:2},ge={key:3},me={class:"col-span-2"},fe={class:"dark:text-gray-200 text-gray-700"},_e={class:"text-xs font-light text-gray-400"},be={class:"col-span-2"},ye={class:"dark:text-gray-200 text-gray-700",for:"fr"},he=e("span",{class:"text-red-500"},"*",-1),xe={class:"flex items-center space-x-4 py-4"},ve=["src","alt"],ke={class:"col-span-2"},we={class:"dark:text-gray-200 text-gray-700",for:"pt"},$e=e("span",{class:"text-red-500"},"*",-1),Ce={class:"mt-20"},Ue={key:0,type:"submit",class:"text-md w-full rounded bg-primary-blue px-6 py-4 leading-5 text-white focus:outline-none"},Ve={key:1,type:"submit",disabled:"",class:"text-md flex w-full items-center justify-center rounded bg-blue-300 px-6 py-4 leading-5 text-white focus:outline-none"},Le={key:0,class:"text-xs font-light italic"},Fe={__name:"PersonalBlogCreate",emits:["back"],setup(Se,{emit:je}){N();const{createPersonalPost:$,errors:m,loading:b}=H(),{categoryPersonalPosts:C,getCategoryPersonalPosts:U}=z(),V=JSON.parse(localStorage.user),L=J(),f=p(0),u=p(null),_=p(""),y=p(null),t=R({title:"",user_id:V.id,content:"",image:"",subtheme:"",language:"fr",category_personal_post_id:""});D(async()=>{sceditor.create(u.value,{format:"xhtml",style:"https://cdn.jsdelivr.net/npm/sceditor@3/minified/themes/content/default.min.css",height:400,toolbarExclude:"indent,outdent,email,date,time,ltr,rtl,print,subscript,superscript,table,code,quote,emoticon",icons:"material"}),u.value.value=="",f.value++,await U()});const S=async()=>{if(t.content=u.value.value,f.value==1){f.value++,_.value="please click again";return}let s=new FormData;s.append("image",t.image),s.append("title",t.title),s.append("subtheme",t.subtheme),s.append("user_id",t.user_id),s.append("language",t.language),s.append("content",t.content),s.append("category_personal_post_id",t.category_personal_post_id),await $(s),m.value==""&&L.push({name:"admin.personal-post.index"})},j=()=>{t.image=y.value.files[0]};function q(s){return URL.createObjectURL(s)}function E(s){return URL.revokeObjectURL(s)}return(s,r)=>{const B=w("Error"),F=w("Spin");return n(),l("div",null,[e("h1",K,a(s.$tc("add",1))+" Post ",1),e("section",A,[d(m)!=""?(n(),M(B,{key:0},{default:h(()=>[i(a(d(m)),1)]),_:1})):c("",!0),e("form",{onSubmit:r[6]||(r[6]=O(o=>S(),["prevent"])),id:"postform",enctype:"multipart/form-data"},[e("div",G,[e("div",Q,[e("label",W,[i(a(s.$t("title"))+" ",1),X]),g(e("input",{required:"","onUpdate:modelValue":r[0]||(r[0]=o=>t.title=o),maxlength:"50",type:"text",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[x,t.title]]),e("span",Y,a(t.title.length)+" of 50 Characters",1)]),e("div",Z,[ee,g(e("select",{required:"","onUpdate:modelValue":r[1]||(r[1]=o=>t.language=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},re,512),[[v,t.language]])]),e("div",ne,[e("label",le,[i(a(s.$t("theme"))+" ",1),ie]),g(e("select",{required:"","onUpdate:modelValue":r[2]||(r[2]=o=>t.category_personal_post_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),l(P,null,T(d(C),o=>(n(),l("option",{key:o.id,value:o.id},[s.$i18n.locale=="en"?(n(),l("span",ce,a(o.name_en),1)):s.$i18n.locale=="fr"?(n(),l("span",ue,a(o.name_fr),1)):s.$i18n.locale=="es"?(n(),l("span",pe,a(o.name_es),1)):(n(),l("span",ge,a(o.name_pt),1))],8,de))),128))],512),[[v,t.category_personal_post_id]])]),e("div",me,[e("label",fe,a(s.$t("subtheme")),1),g(e("input",{"onUpdate:modelValue":r[3]||(r[3]=o=>t.subtheme=o),maxlength:"255",type:"text",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[x,t.subtheme]]),e("span",_e,a(t.subtheme.length)+" of 255 Characters",1)]),e("div",be,[e("label",ye,[i(a(s.$t("thumbnails"))+" ",1),he]),e("div",xe,[t.image?(n(),l("img",{key:0,src:typeof t.image=="string"?t.image:q(t.image),onLoad:r[4]||(r[4]=o=>typeof t.image=="string"?"":E(t.image)),class:"h-16 w-16 rounded-full",alt:t.title},null,40,ve)):c("",!0),e("input",{required:"",ref_key:"file",ref:y,onChange:r[5]||(r[5]=o=>j()),accept:"image/*",type:"file",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,544)])]),e("div",ke,[e("label",we,[i(a(s.$t("content"))+" ",1),$e]),e("textarea",{required:"",ref_key:"textarea",ref:u,class:"h-96 w-full"},`
                        `,512)])]),e("div",Ce,[d(b)==0?(n(),l("button",Ue,a(s.$t("save")),1)):c("",!0),d(b)==1?(n(),l("button",Ve,[i(a(s.$t("save"))+"... ",1),k(F,{size:"small"})])):c("",!0),k(I,{"enter-active-class":" transition-all  ","enter-from-class":" opacity-0  -translate-y-10","enter-to-class":"  opacity-1 translate-y-0","leave-active-class":"","leave-from-class":"","leave-to-class":""},{default:h(()=>[_.value!=""?(n(),l("span",Le,a(_.value),1)):c("",!0)]),_:1})])],32)])])}}};export{Fe as default};
