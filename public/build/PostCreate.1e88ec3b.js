import{r as h,o as T,a as A,c as n,d as a,e,t as i,g as d,k as w,w as J,j as L,P as O,m as y,l as H,i as l,K as C,J as c,F as g,x as m,f as I,H as K,b as G}from"./app.1097d858.js";import{u as Q}from"./postServices.7af8dab2.js";import{u as W}from"./continentServices.eb5fdb99.js";import{u as X}from"./zoneServices.a52bcaa1.js";import{u as Y}from"./countryServices.39eefecd.js";import{u as ee}from"./ministryServices.a46933d7.js";import{_ as te}from"./RichText.4d506fcb.js";const oe={class:"relative min-h-screen w-full bg-white xl:mt-0 xl:p-4"},re={class:"z-0 w-full p-4"},se={class:"flex w-full justify-between bg-white px-8 py-5"},ne={class:"text-4xl font-bold capitalize text-primary-blue"},ae={class:"mx-auto w-full bg-white p-6"},ie={class:"text-md font-light text-gray-700"},le={class:"mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},de={class:"col-span-2"},ue=e("label",{class:"dark:text-gray-200 text-gray-700"},"Title",-1),ce={class:"col-span-2"},pe=e("label",{class:"dark:text-gray-200 text-gray-700",for:"en"},"Language",-1),ye=e("option",{value:"fr"},"French",-1),ge=e("option",{value:"en"},"English",-1),me=e("option",{value:"es"},"Espanol",-1),fe=e("option",{value:"pt"},"Portugues",-1),be=[ye,ge,me,fe],_e=e("label",{class:"dark:text-gray-200 text-gray-700",for:"es"},"Continent",-1),xe=["value"],he=e("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Zone",-1),ve=["value"],ke={key:1,value:"null"},we={class:"col-span-2"},Ce=e("label",{class:"dark:text-gray-200 text-gray-700",for:"es"},"Country",-1),Ve=["value"],ze={key:1,value:"null"},qe={class:"col-span-2"},Se=e("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Ministry",-1),Ue=["value"],Fe={key:0,class:"col-span-2"},Me=e("label",{class:"dark:text-gray-200 text-gray-700",for:"fr"},"Image",-1),Pe={class:"col-span-2"},Ne=e("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Content",-1),$e={key:1},je={class:"text-xs font-light text-gray-400"},Be={class:"mt-6 flex flex-col items-end justify-end"},De={key:0,type:"submit",class:"rounded bg-primary-blue px-6 py-2 leading-5 text-white focus:outline-none"},Ee={key:1,type:"submit",disabled:"",class:"rounded bg-blue-300 px-6 py-2 leading-5 text-white focus:outline-none"},He={__name:"PostCreate",props:{type:{required:!0,type:String}},setup(u){const f=u,b=K(),v=h(null),V=["article","propau"],z=JSON.parse(localStorage.user),{continents:q,getContinents:S}=W(),{zones:U,getZones:F}=X(),{countries:M,getCountries:P}=Y(),{ministries:N,getMinistries:$}=ee(),_=h([]),p=h([]);T(async()=>{V.includes(f.type)||b.push({name:"admin.dash"}),await S(),await F(),await P(),await $()});const t=A({title:"",type:f.type,user_id:z.id,language:"fr",content:"",image:"",continent_id:"",zone_id:"",country_id:"",ministries:[]}),j=()=>{_.value=U.value.filter(s=>s.continent_id==t.continent_id),t.country_id="",t.zone_id="",p.value=[]},B=()=>{p.value=M.value.filter(s=>s.zone_id==t.zone_id),t.country_id=""},{createPost:D,errors:x,loading:k}=Q(),E=async()=>{let s=new FormData;s.append("image",t.image),s.append("title",t.title),s.append("type",t.type),s.append("user_id",t.user_id),s.append("language",t.language),s.append("content",t.content),s.append("continent_id",t.continent_id),s.append("zone_id",t.zone_id),s.append("country_id",t.country_id),s.append("ministries",t.ministries),await D(s),x.value==""&&(f.type=="article"?b.push({name:"admin.post.index",params:{type:"article"}}):b.push({name:"admin.post.index",params:{type:"propau"}}))},Z=()=>{t.image=v.value.files[0]};return(s,r)=>{const R=G("Spin");return n(),a("div",oe,[e("div",re,[e("div",se,[e("h1",ne," Add "+i(u.type),1)]),e("section",ae,[d(x)!=""?(n(),w(O,{key:0},{default:J(()=>[L(i(d(x)),1)]),_:1})):y("",!0),e("h2",ie," Add a new "+i(u.type),1),e("form",{onSubmit:r[9]||(r[9]=H(o=>E(),["prevent"])),id:"postform",enctype:"multipart/form-data"},[e("div",le,[e("div",de,[ue,l(e("input",{required:"","onUpdate:modelValue":r[0]||(r[0]=o=>t.title=o),type:"text",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[C,t.title]])]),e("div",ce,[pe,l(e("select",{required:"","onUpdate:modelValue":r[1]||(r[1]=o=>t.language=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},be,512),[[c,t.language]])]),e("div",null,[_e,l(e("select",{required:"","onUpdate:modelValue":r[2]||(r[2]=o=>t.continent_id=o),onChange:j,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),a(g,null,m(d(q),o=>(n(),a("option",{key:o.id,value:o.id},i(o.name_en),9,xe))),128))],544),[[c,t.continent_id]])]),e("div",null,[he,l(e("select",{required:"","onUpdate:modelValue":r[3]||(r[3]=o=>t.zone_id=o),onChange:B,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[_.value.length!=0?(n(!0),a(g,{key:0},m(_.value,o=>(n(),a("option",{key:o.id,value:o.id},i(o.name_en),9,ve))),128)):(n(),a("option",ke," Requires "+i(s.$t("continent")),1))],544),[[c,t.zone_id]])]),e("div",we,[Ce,l(e("select",{required:"","onUpdate:modelValue":r[4]||(r[4]=o=>t.country_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[p.value.length!=0?(n(!0),a(g,{key:0},m(p.value,o=>(n(),a("option",{value:o.id},i(o.name_en),9,Ve))),256)):(n(),a("option",ze," Requires "+i(s.$t("zoned")),1))],512),[[c,t.country_id]])]),e("div",qe,[Se,l(e("select",{required:"",multiple:"","onUpdate:modelValue":r[5]||(r[5]=o=>t.ministries=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),a(g,null,m(d(N),o=>(n(),a("option",{key:o.id,value:o.id},i(o.name_en),9,Ue))),128))],512),[[c,t.ministries]])]),u.type=="article"?(n(),a("div",Fe,[Me,e("input",{required:"",ref_key:"file",ref:v,onChange:r[6]||(r[6]=o=>Z()),type:"file",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,544)])):y("",!0),e("div",Pe,[Ne,u.type=="article"?(n(),w(te,{key:0,modelValue:t.content,"onUpdate:modelValue":r[7]||(r[7]=o=>t.content=o)},null,8,["modelValue"])):(n(),a("div",$e,[l(e("textarea",{required:"","onUpdate:modelValue":r[8]||(r[8]=o=>t.content=o),maxlength:"2000",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block h-32 w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring focus:ring-primary-blue focus:ring-opacity-40"},`
                                `,512),[[C,t.content]]),e("span",je,i(t.content.length)+" of 2000 Characters",1)]))])]),e("div",Be,[d(k)==0?(n(),a("button",De," Save ")):y("",!0),d(k)==1?(n(),a("button",Ee,[I(R,{size:"small"})])):y("",!0)])],32)])])])}}};export{He as default};
