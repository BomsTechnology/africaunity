var oe=Object.defineProperty;var E=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var T=(m,u,r)=>u in m?oe(m,u,{enumerable:!0,configurable:!0,writable:!0,value:r}):m[u]=r,N=(m,u)=>{for(var r in u||(u={}))le.call(u,r)&&T(m,r,u[r]);if(E)for(var r of E(u))ae.call(u,r)&&T(m,r,u[r]);return m};var x=(m,u,r)=>new Promise((c,f)=>{var v=p=>{try{_(r.next(p))}catch(b){f(b)}},$=p=>{try{_(r.throw(p))}catch(b){f(b)}},_=p=>p.done?c(p.value):Promise.resolve(p.value).then(v,$);_((r=r.apply(m,u)).next())});import{d as o,e as l,f as s,F as g,x as h,g as y,h as d,R as ne,G as re,u as ie,S as de,r as z,a as ue,o as ce,T as ye,B as me,b as M,t as n,l as P,w as C,k as w,H as pe,j as A,m as _e,I as k,J as V,K as fe}from"./app.js";import{u as ge}from"./countryServices.js";import{u as he}from"./zoneServices.js";import{u as ve}from"./continentServices.js";import{u as be}from"./ministryServices.js";import{u as xe}from"./postServices.js";import{r as we}from"./PhotoIcon.js";import{r as ke}from"./PlusCircleIcon.js";import{r as $e}from"./BookOpenIcon.js";import{r as qe}from"./UserIcon.js";import{r as Se}from"./CalendarIcon.js";import{r as ze}from"./ChatBubbleOvalLeftEllipsisIcon.js";const Ce={class:"animate-pulse"},Ve={class:"grid grid-cols-1 gap-4 py-8 px-10 md:grid-cols-2"},je={class:"mx-auto h-44 w-32 overflow-hidden"},Ne=ne('<div class="flex flex-col items-start justify-center p-6"><div class="mb-4 h-5 w-32 rounded-md bg-gray-200"></div><div class="mb-4 h-2.5 w-5/6 rounded-full bg-gray-200"></div><div class="flex w-full items-center justify-between"><div class="mb-4 h-2.5 w-1/5 rounded-full bg-gray-200"></div><div class="mb-4 h-2.5 w-3/5 rounded-full bg-gray-200"></div></div></div>',1),Z={__name:"Article",setup(m){const u=[1,2,3];return(r,c)=>(o(),l("div",Ce,[s("div",Ve,[(o(),l(g,null,h(u,f=>s("div",{key:f,class:"rounded bg-gray-100 shadow"},[s("div",je,[y(d(we),{class:"h-full w-full text-gray-200"})]),Ne])),64))])]))}},Be={class:"mx-auto flex min-h-screen w-full flex-col-reverse bg-white p-4 text-lg md:space-y-2 lg:flex-row lg:space-x-2 xl:w-[90%]"},Ue={class:"lg:w-[70%]"},De={class:"text-center text-5xl font-bold capitalize text-primary-blue"},Me={key:0},Pe={key:1},Ae={class:"flex justify-end px-6"},Fe={class:"text-base leading-4"},Le={key:0},Ee=["src"],Te={class:"p-6 flex flex-col grow"},Ze={class:"grow block"},Ge={class:"flex items-center gap-4 flex-wrap"},He={key:0},Ie={key:1},Je={key:2},Ke={key:3},Oe={class:"mt-4 flex items-center justify-between text-sm"},Qe={class:"flex items-center space-x-2 text-xs text-gray-500"},We={class:"flex space-x-1"},Xe={class:"hidden space-x-1 lg:flex"},Ye={href:"#",class:"hover:text-primary-blue"},Re={class:"item-center flex space-x-1"},et={href:"#",class:"text-xs hover:text-primary-blue"},tt={key:2},st={class:"bg-white lg:w-[30%]"},ot={class:"z-0 w-full bg-white"},lt={class:"inline-block bg-primary-blue px-2 py-1 text-white"},at={class:"text-md space-y-1 border-t-2 border-primary-blue p-4"},nt={class:"text-xs text-gray-500"},rt={value:"fr"},it={value:"en"},dt={value:"es"},ut={value:"pt"},ct={class:"text-xs text-gray-500"},yt=["placeholder"],mt={class:"text-xs text-gray-500"},pt=s("option",{value:""},"--------------",-1),_t=["value"],ft={key:0},gt={key:1},ht={key:2},vt={key:3},bt={class:"text-xs text-gray-500"},xt=s("option",{value:""},"--------------",-1),wt=["value"],kt={key:0},$t={key:1},qt={key:2},St={key:3},zt={key:1,value:"null"},Ct={class:"text-xs text-gray-500"},Vt=s("option",{value:""},"--------------",-1),jt=["value"],Nt={key:0},Bt={key:1},Ut={key:2},Dt={key:3},Mt={key:1,value:"null"},Pt={class:"text-xs text-gray-500"},At=s("option",{value:""},"--------------",-1),Ft=["value"],Lt={key:0},Et={key:1},Tt={key:2},Zt={key:3},Gt={key:0,type:"submit",class:"mt-3 w-full bg-primary-blue px-8 py-2 text-lg text-white"},Ht={key:1,disabled:"",type:"submit",class:"mt-3 inline-flex w-full cursor-wait items-center justify-center bg-blue-300 px-8 py-2 text-lg text-white"},ls={__name:"Article",setup(m){re();let{locale:u}=ie();const r=de(),c=z(!1),{posts:f,getPosts:v,filterPost:$,loading:_,page:p,isAll:b,getPostsByDate:F}=xe(),{countries:G,getCountries:H}=ge(),{zones:I,getZones:J}=he(),{continents:K,getContinents:O}=ve(),{ministries:Q,getMinistries:W}=be(),B=z([]),j=z([]),X=localStorage.user?JSON.parse(localStorage.user):"",U=z(null),D=z(!0),a=ue({country:"",continent:"",ministry:"",zone:"",keywords:"",lang:localStorage.lang,type:"article"});ce(()=>x(this,null,function*(){window.addEventListener("scroll",L),"lang"in r.query?(a.continent=r.query.continent,a.zone=r.query.zone,a.ministry=r.query.ministry,a.keywords=r.query.keywords,a.country=r.query.country,a.lang=r.query.lang,c.value=!1,yield $(N({},a))):"search_date"in r.query?(F(r.query.search_date,localStorage.lang),c.value=!0):(yield v("article",localStorage.lang),c.value=!1),yield O(),yield J(),yield H(),yield W()})),ye(()=>x(this,null,function*(){p.value=1,window.removeEventListener("scroll",L)})),me(r,function(t,i){return x(this,null,function*(){"lang"in t.query?(a.continent=t.query.continent,a.zone=t.query.zone,a.ministry=t.query.ministry,a.keywords=t.query.keywords,a.country=t.query.country,a.lang=t.query.lang,c.value=!1,yield $(N({},a))):"search_date"in t.query?(F(t.query.search_date,localStorage.lang),c.value=!0):(yield v("article",localStorage.lang),c.value=!1)})});const L=t=>x(this,null,function*(){if(U.value){let i=U.value;if("search_date"in r.query)return;i.getBoundingClientRect().bottom<window.innerHeight&&D.value&&!b.value&&a.country==""&&a.continent==""&&a.ministry==""&&a.zone==""&&a.keywords==""&&(D.value=!1,p.value++,yield v("article",localStorage.lang),D.value=!0,c.value=!1)}}),Y=()=>{B.value=I.value.filter(t=>t.continent_id==a.continent),a.country="",a.zone="",j.value=[]},R=()=>{j.value=G.value.filter(t=>t.zone_id==a.zone),a.country=""},ee=()=>x(this,null,function*(){a.country!=""||a.continent!=""||a.ministry!=""||a.zone!=""||a.keywords!=""?yield $(N({},a)):(p.value=1,b.value=!1,c.value=!1,yield v("article",localStorage.lang))});return(t,i)=>{const q=M("router-link"),te=M("NoContent"),se=M("Spin");return o(),l("div",Be,[s("div",Ue,[s("h1",De,[c.value?(o(),l("span",Me,n(t.$t("articles"))+" & PropAu",1)):(o(),l("span",Pe,n(t.$t("articles")),1))]),s("div",Ae,[d(X).type!="business1"?(o(),P(q,{key:0,to:{name:"add.post",params:{type:"article"}},class:"flex items-center justify-start space-x-3 rounded bg-primary-blue px-3 py-2 text-white"},{default:C(()=>[y(d(ke),{class:"h-6 w-6"}),s("p",Fe,n(t.$t("add"))+" Article",1)]),_:1},8,["to"])):w("",!0)]),d(_)==3?(o(),l("div",Le,[y(Z)])):d(f).length!=0?(o(),l("div",{key:1,class:"grid gap-8 py-8 lg:grid-cols-2 lg:px-10",ref_key:"postsContainer",ref:U},[(o(!0),l(g,null,h(d(f),e=>(o(),l("div",{class:"dark:bg-gray-800 overflow-hidden flex flex-col rounded-lg bg-white shadow-md",key:e.id},[y(q,{to:{name:"show.post",params:{id:e.id,slug:e.slug}}},{default:C(()=>[e.image?(o(),l("img",{key:0,class:"h-44 w-full object-cover",src:e.image,alt:""},null,8,Ee)):(o(),P(d($e),{key:1,class:"h-44 w-full text-gray-500"}))]),_:2},1032,["to"]),s("div",Te,[s("div",Ze,[s("ul",Ge,[(o(!0),l(g,null,h(e.ministries,S=>(o(),l("li",{class:"rounded py-1 px-2 text-xs capitalize text-white",style:pe("background:"+S.color)},[t.$i18n.locale=="en"?(o(),l("span",He,n(S.name_en.substring(0,29)+"..."),1)):t.$i18n.locale=="fr"?(o(),l("span",Ie,n(S.name_fr.substring(0,29)+"..."),1)):t.$i18n.locale=="es"?(o(),l("span",Je,n(S.name_es.substring(0,29)+"..."),1)):(o(),l("span",Ke,n(S.name_pt.substring(0,29)+"..."),1))],4))),256))]),y(q,{to:{name:"show.post",params:{id:e.id,slug:e.slug}},class:"dark:text-white mt-2 block transform text-2xl font-semibold text-gray-800 transition-colors duration-200 hover:text-gray-600 hover:underline"},{default:C(()=>[A(n(e.title),1)]),_:2},1032,["to"])]),s("div",Oe,[y(q,{to:{name:"show.post",params:{id:e.id,slug:e.slug}},class:"dark:text-blue-400 text-blue-600 hover:underline"},{default:C(()=>[A(n(t.$t("read-more")),1)]),_:2},1032,["to"]),s("div",Qe,[s("div",We,[y(d(qe),{class:"h-4 w-4"}),y(q,{to:{name:"compte",params:{slug:e.user.slug,id:e.user.id}},class:"hover:text-primary-blue"},{default:C(()=>[A(n(e.user.firstname),1)]),_:2},1032,["to"])]),s("div",Xe,[y(d(Se),{class:"h-4 w-4"}),s("a",Ye,n(new Date(e.date).toLocaleDateString(d(u),{day:"numeric",year:"numeric",month:"long"})),1)]),s("div",Re,[y(d(ze),{class:"h-4 w-4 text-gray-500"}),s("a",et,n(e.comments),1)])])])])]))),128))],512)):w("",!0),d(_)==1?(o(),l("div",tt,[y(Z)])):w("",!0),d(f).length==0&&d(_)!=1?(o(),P(te,{key:3})):w("",!0)]),s("div",st,[s("div",ot,[s("h1",lt,n(t.$t("filter-article")),1),s("form",{onSubmit:i[8]||(i[8]=_e(e=>ee(),["prevent"]))},[s("div",at,[s("div",null,[s("label",nt,n(t.$t("language")),1),k(s("select",{"onUpdate:modelValue":i[0]||(i[0]=e=>a.lang=e),class:"form-select mt-1 block w-full border-gray-300 px-3 py-2 text-xs focus:border-primary-blue focus:ring-primary-blue"},[s("option",rt,n(t.$t("fr")),1),s("option",it,n(t.$t("en")),1),s("option",dt,n(t.$t("es")),1),s("option",ut,n(t.$t("pt")),1)],512),[[V,a.lang]])]),s("div",null,[s("label",ct,n(t.$t("key-words")),1),k(s("input",{type:"text","onUpdate:modelValue":i[1]||(i[1]=e=>a.keywords=e),placeholder:t.$t("key-words"),class:"form-input mt-1 block w-full border-gray-300 px-3 py-2 text-xs focus:border-primary-blue focus:ring-primary-blue"},null,8,yt),[[fe,a.keywords]])]),s("div",null,[s("label",mt,n(t.$t("continent")),1),k(s("select",{"onUpdate:modelValue":i[2]||(i[2]=e=>a.continent=e),onChange:i[3]||(i[3]=e=>Y()),class:"form-select mt-1 block w-full border-gray-300 px-3 py-2 text-xs focus:border-primary-blue focus:ring-primary-blue"},[pt,(o(!0),l(g,null,h(d(K),e=>(o(),l("option",{key:e.id,value:e.id},[t.$i18n.locale=="en"?(o(),l("span",ft,n(e.name_en),1)):t.$i18n.locale=="fr"?(o(),l("span",gt,n(e.name_fr),1)):t.$i18n.locale=="es"?(o(),l("span",ht,n(e.name_es),1)):(o(),l("span",vt,n(e.name_pt),1))],8,_t))),128))],544),[[V,a.continent]])]),s("div",null,[s("label",bt,n(t.$t("zoned")),1),k(s("select",{"onUpdate:modelValue":i[4]||(i[4]=e=>a.zone=e),onChange:i[5]||(i[5]=e=>R()),class:"form-select mt-1 block w-full border-gray-300 px-3 py-2 text-xs focus:border-primary-blue focus:ring-primary-blue"},[xt,B.value.length!=0?(o(!0),l(g,{key:0},h(B.value,e=>(o(),l("option",{key:e.id,value:e.id},[t.$i18n.locale=="en"?(o(),l("span",kt,n(e.name_en),1)):t.$i18n.locale=="fr"?(o(),l("span",$t,n(e.name_fr),1)):t.$i18n.locale=="es"?(o(),l("span",qt,n(e.name_es),1)):(o(),l("span",St,n(e.name_pt),1))],8,wt))),128)):(o(),l("option",zt," Requires "+n(t.$t("continent")),1))],544),[[V,a.zone]])]),s("div",null,[s("label",Ct,n(t.$t("country")),1),k(s("select",{"onUpdate:modelValue":i[6]||(i[6]=e=>a.country=e),class:"form-select mt-1 block w-full border-gray-300 px-3 py-2 text-xs focus:border-primary-blue focus:ring-primary-blue"},[Vt,j.value.length!=0?(o(!0),l(g,{key:0},h(j.value,e=>(o(),l("option",{key:e.id,value:e.id},[t.$i18n.locale=="en"?(o(),l("span",Nt,n(e.name_en),1)):t.$i18n.locale=="fr"?(o(),l("span",Bt,n(e.name_fr),1)):t.$i18n.locale=="es"?(o(),l("span",Ut,n(e.name_es),1)):(o(),l("span",Dt,n(e.name_pt),1))],8,jt))),128)):(o(),l("option",Mt," Requires "+n(t.$t("zoned")),1))],512),[[V,a.country]])]),s("div",null,[s("label",Pt,n(t.$t("ministry")),1),k(s("select",{"onUpdate:modelValue":i[7]||(i[7]=e=>a.ministry=e),class:"form-select mt-1 block w-full border-gray-300 px-3 py-2 text-xs focus:border-primary-blue focus:ring-primary-blue"},[At,(o(!0),l(g,null,h(d(Q),e=>(o(),l("option",{key:e.id,value:e.id},[t.$i18n.locale=="en"?(o(),l("span",Lt,n(e.name_en),1)):t.$i18n.locale=="fr"?(o(),l("span",Et,n(e.name_fr),1)):t.$i18n.locale=="es"?(o(),l("span",Tt,n(e.name_es),1)):(o(),l("span",Zt,n(e.name_pt),1))],8,Ft))),128))],512),[[V,a.ministry]])]),s("div",null,[d(_)==0||d(_)==2?(o(),l("button",Gt,n(t.$t("filter")),1)):w("",!0),d(_)==1?(o(),l("button",Ht,[y(se,{size:"small"})])):w("",!0)])])],32)])])])}}};export{ls as default};
