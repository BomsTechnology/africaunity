var L=(c,d,p)=>new Promise((f,C)=>{var m=u=>{try{h(p.next(u))}catch(b){C(b)}},z=u=>{try{h(p.throw(u))}catch(b){C(b)}},h=u=>u.done?f(u.value):Promise.resolve(u.value).then(m,z);h((p=p.apply(c,d)).next())});import{G as Y,u as ee,r as v,a as te,o as se,b as oe,d as n,e as i,f as o,t as s,j as r,n as S,m as k,h as _,l as N,w as ne,P as ie,k as g,I as y,K as B,J as $,F as x,x as w,g as ae}from"./app.js";import{u as le}from"./postServices.js";import{u as re}from"./continentServices.js";import{u as de}from"./zoneServices.js";import{u as ue}from"./countryServices.js";import{u as ce}from"./ministryServices.js";import{u as pe}from"./cityServices.js";import{_ as me}from"./RichText.js";const ye={class:"mx-auto min-h-screen w-full bg-white py-4 lg:px-20 xl:w-[90%]"},_e={class:"w-full space-y-4 py-5 text-center"},ge={class:"text-4xl font-bold capitalize text-primary-blue"},fe={key:0},he={key:1},be={class:"text-md text-gray-700"},ve={key:0},ke={key:1},$e={class:"flex flex-col items-center justify-center lg:flex-row lg:space-x-3"},xe={class:"font-semibold"},we={class:"mt-3 inline-flex w-full justify-center space-x-3 text-xs lg:mt-0 lg:text-sm"},Ce={class:"mx-auto w-full rounded-md bg-white p-6 shadow-xl"},Ve={class:"text-xl font-semibold"},Ue={key:0},qe={key:1},Se={class:"text-md font-light text-gray-700"},ze={class:"mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},Re={class:"col-span-2"},je={class:"text-gray-700"},Le=o("span",{class:"text-red-500"},"*",-1),Fe={class:"text-xs font-light text-gray-400"},Me={class:"col-span-2 lg:col-span-1"},Pe={class:"text-gray-700",for:"es"},Ne=o("span",{class:"text-red-500"},"*",-1),Be=["value"],De={key:0},Ie={key:1},Oe={key:2},Ze={key:3},Ae={class:"col-span-2 lg:col-span-1"},Ee={class:"text-gray-700",for:"pt"},Je=o("span",{class:"text-red-500"},"*",-1),Te=["value"],Ge={key:0},Ke={key:1},He={key:2},Qe={key:3},We={key:1,value:"null"},Xe={class:"col-span-2 lg:col-span-1"},Ye={class:"text-gray-700",for:"es"},et=o("span",{class:"text-red-500"},"*",-1),tt=["value"],st={key:0},ot={key:1},nt={key:2},it={key:3},at={key:1,value:"null"},lt={class:"col-span-2 lg:col-span-1"},rt={class:"d text-gray-700",for:"es"},dt=["value"],ut={key:0},ct={key:1},pt={key:2},mt={key:3},yt={key:1,value:"null"},_t={class:"col-span-2"},gt={class:"text-gray-700",for:"pt"},ft=o("span",{class:"text-red-500"},"*",-1),ht=["value"],bt={key:0},vt={key:1},kt={key:2},$t={key:3},xt={key:0,class:"col-span-2"},wt={class:"text-gray-700",for:"fr"},Ct=o("span",{class:"text-red-500"},"*",-1),Vt={class:"flex items-center space-x-4 py-4"},Ut=["src","alt"],qt={class:"col-span-2"},St={class:"text-gray-700",for:"pt"},zt=o("span",{class:"text-red-500"},"*",-1),Rt={key:1},jt={class:"text-xs font-light text-gray-400"},Lt={key:2,class:"text-xs font-light italic"},Ft={class:"ml-1 text-primary-blue"},Mt={href:"/add/propau"},Pt={class:"mt-20"},Nt={key:0,type:"submit",class:"text-md w-full rounded bg-primary-blue px-6 py-4 leading-5 text-white focus:outline-none"},Bt={key:1,type:"submit",disabled:"",class:"text-md flex w-full items-center justify-center rounded bg-blue-300 px-6 py-4 leading-5 text-white focus:outline-none"},Kt={__name:"AddPost",props:{type:{type:String}},setup(c){const d=c,p=Y(),{locale:f}=ee();v([]);const C=["article","propau"],m=localStorage.user?JSON.parse(localStorage.user):"",{continents:z,getContinents:h}=re(),{zones:u,getZones:b}=de(),{countries:D,getCountries:I}=ue(),{ministries:O,getMinistries:Z}=ce(),F=v(null),R=v([]),V=v([]),U=v([]),{cities:A,getCities:E}=pe(),a=te({title:"",type:d.type,user_id:m.id,language:f.value,content:"",image:"",continent_id:"",city_id:"",zone_id:"",country_id:"",ministries:[]});se(()=>L(this,null,function*(){C.includes(d.type)||p.push({name:"home"}),yield h(),yield b(),yield I(),yield E(),M(!1),yield Z()}));const M=(e=!0)=>{U.value=A.value.filter(l=>l.country_id==a.country_id),e&&(a.city_id="")},J=()=>{V.value=D.value.filter(e=>e.zone_id==a.zone_id),a.country_id=""},T=(e=!0)=>{R.value=u.value.filter(l=>l.continent_id==a.continent_id),e&&(a.zone_id="",a.country_id="",a.city_id="",U.value=[],V.value=[])},{createPost:G,errors:j,loading:P}=le(),K=()=>L(this,null,function*(){let e=new FormData;e.append("image",a.image),e.append("title",a.title),e.append("type",a.type),e.append("user_id",a.user_id),e.append("language",localStorage.lang),e.append("content",a.content),e.append("continent_id",a.continent_id),e.append("zone_id",a.zone_id),e.append("city_id",a.city_id),e.append("country_id",a.country_id),e.append("ministries",a.ministries),yield G(e),j.value==""&&(d.type=="article"?p.push({name:"compte",params:{slug:m.slug,id:m.id},query:{redirect:"article"}}):p.push({name:"compte",params:{slug:m.slug,id:m.id},query:{redirect:"propau"}}))}),H=()=>{a.image=F.value.files[0]},q=e=>{f.value=e,localStorage.lang=f.value};function Q(e){return URL.createObjectURL(e)}function W(e){return URL.revokeObjectURL(e)}return(e,l)=>{const X=oe("Spin");return n(),i("div",ye,[o("div",_e,[o("h1",ge,[d.type=="article"?(n(),i("span",fe,s(e.$t("add")),1)):(n(),i("span",he,s(e.$tc("add",2)),1)),r(" "+s(d.type),1)]),o("h2",be,[r(s(e.$t("your"))+" "+s(c.type)+" ",1),d.type=="article"?(n(),i("span",ve,s(e.$t("add-desc-1")),1)):(n(),i("span",ke,s(e.$tc("add-desc-1",2)),1))]),o("div",$e,[o("h1",xe,s(e.$t("select-lang"))+" :",1),o("div",we,[o("button",{class:S([e.$i18n.locale!="fr"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:l[0]||(l[0]=k(t=>q("fr"),["prevent"]))},s(e.$t("fr")),3),o("button",{class:S([e.$i18n.locale!="en"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:l[1]||(l[1]=k(t=>q("en"),["prevent"]))},s(e.$t("en")),3),o("button",{class:S([e.$i18n.locale!="es"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:l[2]||(l[2]=k(t=>q("es"),["prevent"]))},s(e.$t("es")),3),o("button",{class:S([e.$i18n.locale!="pt"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:l[3]||(l[3]=k(t=>q("pt"),["prevent"]))},s(e.$t("pt")),3)])])]),o("section",Ce,[_(j)!=""?(n(),N(ie,{key:0},{default:ne(()=>[r(s(_(j)),1)]),_:1})):g("",!0),o("h1",Ve,[d.type=="article"?(n(),i("span",Ue,s(e.$t("add")),1)):(n(),i("span",qe,s(e.$tc("add",2)),1)),r(" "+s(c.type),1)]),o("h2",Se,s(e.$t("good-msg-post"))+" ! ",1),o("form",{onSubmit:l[15]||(l[15]=k(t=>K(),["prevent"])),id:"postform",enctype:"multipart/form-data"},[o("div",ze,[o("div",Re,[o("label",je,[r(s(e.$t("title"))+" ",1),Le]),y(o("input",{required:"","onUpdate:modelValue":l[4]||(l[4]=t=>a.title=t),maxlength:"50",type:"text",class:"mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[B,a.title]]),o("span",Fe,s(a.title.length)+" of 50 Characters",1)]),o("div",Me,[o("label",Pe,[r(s(e.$t("continent"))+" ",1),Ne]),y(o("select",{required:"","onUpdate:modelValue":l[5]||(l[5]=t=>a.continent_id=t),onChange:T,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),i(x,null,w(_(z),t=>(n(),i("option",{key:t.id,value:t.id},[e.$i18n.locale=="en"?(n(),i("span",De,s(t.name_en),1)):e.$i18n.locale=="fr"?(n(),i("span",Ie,s(t.name_fr),1)):e.$i18n.locale=="es"?(n(),i("span",Oe,s(t.name_es),1)):(n(),i("span",Ze,s(t.name_pt),1))],8,Be))),128))],544),[[$,a.continent_id]])]),o("div",Ae,[o("label",Ee,[r(s(e.$t("zoned")),1),Je]),y(o("select",{required:"",onChange:J,"onUpdate:modelValue":l[6]||(l[6]=t=>a.zone_id=t),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[R.value.length!=0?(n(!0),i(x,{key:0},w(R.value,t=>(n(),i("option",{key:t.id,value:t.id},[e.$i18n.locale=="en"?(n(),i("span",Ge,s(t.name_en),1)):e.$i18n.locale=="fr"?(n(),i("span",Ke,s(t.name_fr),1)):e.$i18n.locale=="es"?(n(),i("span",He,s(t.name_es),1)):(n(),i("span",Qe,s(t.name_pt),1))],8,Te))),128)):(n(),i("option",We," Requires "+s(e.$t("continent")),1))],544),[[$,a.zone_id]])]),o("div",Xe,[o("label",Ye,[r(s(e.$t("country")),1),et]),y(o("select",{required:"",onChange:l[7]||(l[7]=t=>M()),"onUpdate:modelValue":l[8]||(l[8]=t=>a.country_id=t),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[V.value.length!=0?(n(!0),i(x,{key:0},w(V.value,t=>(n(),i("option",{key:t.id,value:t.id},[e.$i18n.locale=="en"?(n(),i("span",st,s(t.name_en),1)):e.$i18n.locale=="fr"?(n(),i("span",ot,s(t.name_fr),1)):e.$i18n.locale=="es"?(n(),i("span",nt,s(t.name_es),1)):(n(),i("span",it,s(t.name_pt),1))],8,tt))),128)):(n(),i("option",at," Requires "+s(e.$t("zoned")),1))],544),[[$,a.country_id]])]),o("div",lt,[o("label",rt,s(e.$t("city")),1),y(o("select",{"onUpdate:modelValue":l[9]||(l[9]=t=>a.city_id=t),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[U.value.length!=0?(n(!0),i(x,{key:0},w(U.value,t=>(n(),i("option",{key:t.id,value:t.id},[e.$i18n.locale=="en"?(n(),i("span",ut,s(t.name_en),1)):e.$i18n.locale=="fr"?(n(),i("span",ct,s(t.name_fr),1)):e.$i18n.locale=="es"?(n(),i("span",pt,s(t.name_es),1)):(n(),i("span",mt,s(t.name_pt),1))],8,dt))),128)):(n(),i("option",yt," Requires "+s(e.$t("country")),1))],512),[[$,a.city_id]])]),o("div",_t,[o("label",gt,[r(s(e.$t("ministry")),1),ft]),y(o("select",{required:"",multiple:"","onUpdate:modelValue":l[10]||(l[10]=t=>a.ministries=t),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),i(x,null,w(_(O),t=>(n(),i("option",{key:t.id,value:t.id},[e.$i18n.locale=="en"?(n(),i("span",bt,s(t.name_en),1)):e.$i18n.locale=="fr"?(n(),i("span",vt,s(t.name_fr),1)):e.$i18n.locale=="es"?(n(),i("span",kt,s(t.name_es),1)):(n(),i("span",$t,s(t.name_pt),1))],8,ht))),128))],512),[[$,a.ministries]])]),c.type=="article"?(n(),i("div",xt,[o("label",wt,[r(s(e.$t("thumbnails"))+" ",1),Ct]),o("div",Vt,[a.image?(n(),i("img",{key:0,src:typeof a.image=="string"?a.image:Q(a.image),onLoad:l[11]||(l[11]=t=>typeof a.image=="string"?"":W(a.image)),class:"h-16 w-16 rounded-full",alt:a.title},null,40,Ut)):g("",!0),o("input",{required:"",ref_key:"file",ref:F,onChange:l[12]||(l[12]=t=>H()),accept:"image/*",type:"file",class:"mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,544)])])):g("",!0),o("div",qt,[o("label",St,[r(s(e.$t("content"))+" ",1),zt]),c.type=="article"?(n(),N(me,{key:0,modelValue:a.content,"onUpdate:modelValue":l[13]||(l[13]=t=>a.content=t)},null,8,["modelValue"])):(n(),i("div",Rt,[y(o("textarea",{required:"","onUpdate:modelValue":l[14]||(l[14]=t=>a.content=t),maxlength:"1000",class:"mt-2 block h-32 w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring focus:ring-primary-blue focus:ring-opacity-40"},`
                            `,512),[[B,a.content]]),o("span",jt,s(a.content.length)+" of 1000 Characters",1)])),c.type=="article"?(n(),i("span",Lt,[o("span",null,s(e.$t("instead-add-propau")),1),o("span",Ft,[o("a",Mt,s(e.$tc("add",2))+" PropAU",1)])])):g("",!0)])]),o("div",Pt,[_(P)==0?(n(),i("button",Nt,s(e.$t("save")),1)):g("",!0),_(P)==1?(n(),i("button",Bt,[ae(X,{size:"small"})])):g("",!0)])],32)])])}}};export{Kt as default};
