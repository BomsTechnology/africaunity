import{r as c,o as I,c as n,d as s,e as t,t as i,g as a,k as L,w as E,h as H,m as u,l as J,j as d,K as M,J as f,F as v,x as _,f as K,T as O,I as R}from"./app.8ef239d2.js";import{E as G}from"./Error.443ca946.js";import{u as Q}from"./postServices.944dd462.js";import{u as W}from"./continentServices.aef8e806.js";import{u as X}from"./zoneServices.a32e81e5.js";import{u as Y}from"./countryServices.c36ab858.js";import{u as ee}from"./ministryServices.a0c1f0da.js";import"./_plugin-vue_export-helper.cdc0426e.js";const te={class:"relative min-h-screen w-full bg-white xl:mt-0 xl:p-4"},oe={class:"z-0 w-full p-4"},re={class:"flex w-full justify-between bg-white px-8 py-5"},ae={class:"text-4xl font-bold capitalize text-primary-blue"},ne={class:"mx-auto w-full bg-white p-6"},se={class:"text-md font-light text-gray-700"},le={class:"mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},ie={class:"col-span-2"},ue=t("label",{class:"dark:text-gray-200 text-gray-700"},"Title",-1),de={class:"col-span-2"},ce=t("label",{class:"dark:text-gray-200 text-gray-700",for:"en"},"Language",-1),pe=t("option",{value:"fr"},"French",-1),ye=t("option",{value:"en"},"English",-1),ge=t("option",{value:"es"},"Espanol",-1),fe=t("option",{value:"pt"},"Portugues",-1),me=[pe,ye,ge,fe],be=t("label",{class:"dark:text-gray-200 text-gray-700",for:"es"},"Continent",-1),ve=["value"],_e=t("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Zone",-1),xe=["value"],he={key:1,value:"null"},ke=t("label",{class:"dark:text-gray-200 text-gray-700",for:"es"},"Country",-1),we=["value"],Ce={key:1,value:"null"},ze=t("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Ministry",-1),Ve=["value"],qe={key:0,class:"col-span-2"},Ee=t("label",{class:"dark:text-gray-200 text-gray-700",for:"fr"},"Image",-1),Me={class:"col-span-2"},Se=t("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Content",-1),Ue={key:1},Fe={key:1,class:"text-xs font-light text-gray-400"},Pe={class:"mt-6 flex flex-col items-end justify-end"},Te={key:0,type:"submit",class:"rounded bg-primary-blue px-6 py-2 leading-5 text-white focus:outline-none"},je={key:1,type:"submit",disabled:"",class:"rounded bg-blue-300 px-6 py-2 leading-5 text-white focus:outline-none"},Be=t("svg",{class:"h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),De=[Be],Ne={key:0,class:"text-xs font-light italic"},Oe={__name:"PostEdit",props:{type:{required:!0,type:String},id:{required:!0,type:String}},setup(p){const y=p,w=R(),C=c(null),{updatePost:S,getPost:U,post:e,errors:x,loading:z}=Q(),{continents:F,getContinents:P}=W(),{zones:V,getZones:T}=X(),{countries:q,getCountries:j}=Y(),{ministries:B,getMinistries:D}=ee(),m=c([]),g=c([]),N=()=>{m.value=V.value.filter(r=>r.continent_id==e.value.continent_id),e.value.country_id="",e.value.zone_id="",g.value=[]},Z=()=>{g.value=q.value.filter(r=>r.zone_id==e.value.zone_id),e.value.country_id=""},b=c(""),h=c(""),k=c(0);I(async()=>{await U(y.id),y.type=="article"&&(b.value.value=e.value.content,sceditor.create(b.value,{format:"bbcode",style:"https://cdn.jsdelivr.net/npm/sceditor@3/minified/themes/content/default.min.css",height:400,toolbarExclude:"indent,outdent,email,date,time,ltr,rtl,print,subscript,superscript,table,code,quote,emoticon",icons:"material"})),k.value++,await P(),await T(),await j(),await D(),m.value=V.value.filter(r=>r.continent_id==e.value.continent_id),g.value=q.value.filter(r=>r.zone_id==e.value.zone_id)});const $=async()=>{if(y.type=="article"&&(e.value.content=b.value.value,k.value==1)){k.value++,h.value="please click again";return}let r=new FormData;r.append("image",e.value.image),r.append("title",e.value.title),r.append("type",e.value.type),r.append("user_id",e.value.user_id),r.append("language",e.value.language),r.append("content",e.value.content),r.append("continent_id",e.value.continent_id),r.append("zone_id",e.value.zone_id),r.append("country_id",e.value.country_id),r.append("ministry_id",e.value.ministry_id),r.append("_method","PUT"),await S(r,y.id),x.value==""&&(y.type=="article"?w.push({name:"admin.post.index",params:{type:"article"}}):w.push({name:"admin.post.index",params:{type:"propau"}}))},A=()=>{e.value.image=C.value.files[0]};return(r,l)=>(n(),s("div",te,[t("div",oe,[t("div",re,[t("h1",ae," Edit "+i(p.type),1)]),t("section",ne,[a(x)!=""?(n(),L(G,{key:0},{default:E(()=>[H(i(a(x)),1)]),_:1})):u("",!0),t("h2",se," Add a new "+i(p.type),1),t("form",{onSubmit:l[8]||(l[8]=J(o=>$(),["prevent"])),id:"postform",enctype:"multipart/form-data"},[t("div",le,[t("div",ie,[ue,d(t("input",{required:"","onUpdate:modelValue":l[0]||(l[0]=o=>a(e).title=o),type:"text",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[M,a(e).title]])]),t("div",de,[ce,d(t("select",{required:"","onUpdate:modelValue":l[1]||(l[1]=o=>a(e).language=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},me,512),[[f,a(e).language]])]),t("div",null,[be,d(t("select",{required:"","onUpdate:modelValue":l[2]||(l[2]=o=>a(e).continent_id=o),onChange:N,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),s(v,null,_(a(F),o=>(n(),s("option",{key:o.id,value:o.id},i(o.name_en),9,ve))),128))],544),[[f,a(e).continent_id]])]),t("div",null,[_e,d(t("select",{required:"","onUpdate:modelValue":l[3]||(l[3]=o=>a(e).zone_id=o),onChange:Z,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[m.value.length!=0?(n(!0),s(v,{key:0},_(m.value,o=>(n(),s("option",{key:o.id,value:o.id},i(o.name_en),9,xe))),128)):(n(),s("option",he," Select "+i(r.$t("continent")),1))],544),[[f,a(e).zone_id]])]),t("div",null,[ke,d(t("select",{required:"","onUpdate:modelValue":l[4]||(l[4]=o=>a(e).country_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[g.value.length!=0?(n(!0),s(v,{key:0},_(g.value,o=>(n(),s("option",{key:o.id,value:o.id},i(o.name_en),9,we))),128)):(n(),s("option",Ce," Select "+i(r.$t("zoned")),1))],512),[[f,a(e).country_id]])]),t("div",null,[ze,d(t("select",{required:"","onUpdate:modelValue":l[5]||(l[5]=o=>a(e).ministry_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),s(v,null,_(a(B),o=>(n(),s("option",{key:o.id,value:o.id},i(o.name_en),9,Ve))),128))],512),[[f,a(e).ministry_id]])]),p.type=="article"?(n(),s("div",qe,[Ee,t("input",{ref_key:"file",ref:C,onChange:l[6]||(l[6]=o=>A()),type:"file",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,544)])):u("",!0),t("div",Me,[Se,p.type=="article"?(n(),s("textarea",{key:0,required:"",ref_key:"textarea",ref:b,class:"h-96 w-full"},`\r
                            `,512)):(n(),s("div",Ue,[a(e).content?d((n(),s("textarea",{key:0,required:"","onUpdate:modelValue":l[7]||(l[7]=o=>a(e).content=o),maxlength:"2000",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block h-32 w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring focus:ring-primary-blue focus:ring-opacity-40"},`\r
                                `,512)),[[M,a(e).content]]):u("",!0),a(e).content?(n(),s("span",Fe,i(a(e).content.length)+" of 2000 Characters",1)):u("",!0)]))])]),t("div",Pe,[a(z)==0?(n(),s("button",Te," Save ")):u("",!0),a(z)==1?(n(),s("button",je,De)):u("",!0),K(O,{"enter-active-class":" transition-all  ","enter-from-class":" opacity-0  -translate-y-10","enter-to-class":"  opacity-1 translate-y-0","leave-active-class":"","leave-from-class":"","leave-to-class":""},{default:E(()=>[h.value!=""?(n(),s("span",Ne,i(h.value),1)):u("",!0)]),_:1})])],32)])])]))}};export{Oe as default};
