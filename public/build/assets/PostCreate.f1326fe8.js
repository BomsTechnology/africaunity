import{r as d,o as J,a as L,c as n,d as a,e,t as i,g as u,k as O,w as V,h as H,m as y,l as K,j as l,K as q,J as g,F as b,x as _,f as R,T as G,I as Q}from"./app.04741282.js";import{E as W}from"./Error.74e5730d.js";import{u as X}from"./postServices.9af36f2b.js";import{u as Y}from"./continentServices.3826eb47.js";import{u as ee}from"./zoneServices.8a6032f2.js";import{u as te}from"./countryServices.c88ea300.js";import{u as oe}from"./ministryServices.318d2e96.js";import"./_plugin-vue_export-helper.cdc0426e.js";const re={class:"relative min-h-screen w-full bg-white xl:mt-0 xl:p-4"},se={class:"z-0 w-full p-4"},ne={class:"flex w-full justify-between bg-white px-8 py-5"},ae={class:"text-4xl font-bold capitalize text-primary-blue"},ie={class:"mx-auto w-full bg-white p-6"},le={class:"text-md font-light text-gray-700"},de={class:"mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},ue={class:"col-span-2"},ce=e("label",{class:"dark:text-gray-200 text-gray-700"},"Title",-1),pe={class:"col-span-2"},ye=e("label",{class:"dark:text-gray-200 text-gray-700",for:"en"},"Language",-1),ge=e("option",{value:"fr"},"French",-1),me=e("option",{value:"en"},"English",-1),fe=e("option",{value:"es"},"Espanol",-1),be=e("option",{value:"pt"},"Portugues",-1),_e=[ge,me,fe,be],xe=e("label",{class:"dark:text-gray-200 text-gray-700",for:"es"},"Continent",-1),he=["value"],ve=e("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Zone",-1),ke=["value"],we={key:1,value:"null"},Ce=e("label",{class:"dark:text-gray-200 text-gray-700",for:"es"},"Country",-1),ze=["value"],Ve={key:1,value:"null"},qe=e("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Ministry",-1),Se=["value"],Me={key:0,class:"col-span-2"},Fe=e("label",{class:"dark:text-gray-200 text-gray-700",for:"fr"},"Image",-1),Ue={class:"col-span-2"},Ee=e("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Content",-1),je={key:1},Be={class:"text-xs font-light text-gray-400"},Ne={class:"mt-6 flex flex-col items-end justify-end"},Pe={key:0,type:"submit",class:"rounded bg-primary-blue px-6 py-2 leading-5 text-white focus:outline-none"},Te={key:1,type:"submit",disabled:"",class:"rounded bg-blue-300 px-6 py-2 leading-5 text-white focus:outline-none"},De=e("svg",{class:"h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Ze=[De],$e={key:0,class:"text-xs font-light italic"},Ge={__name:"PostCreate",props:{type:{required:!0,type:String}},setup(c){const p=c,x=Q(),m=d(""),h=d(""),v=d(0),C=d(null),S=["article","propau"],M=JSON.parse(localStorage.user),{continents:F,getContinents:U}=Y(),{zones:E,getZones:j}=ee(),{countries:B,getCountries:N}=te(),{ministries:P,getMinistries:T}=oe(),k=d([]),f=d([]);J(async()=>{S.includes(p.type)||x.push({name:"admin.dash"}),p.type=="article"&&(sceditor.create(m.value,{format:"xhtml",style:"https://cdn.jsdelivr.net/npm/sceditor@3/minified/themes/content/default.min.css",height:400,toolbarExclude:"indent,outdent,email,date,time,ltr,rtl,print,subscript,superscript,table,code,quote,emoticon",icons:"material"}),m.value.value==""),v.value++,await U(),await j(),await N(),await T()});const t=L({title:"",type:p.type,user_id:M.id,language:"fr",content:"",image:"",continent_id:1,zone_id:1,country_id:1,ministry_id:1}),D=()=>{k.value=E.value.filter(r=>r.continent_id==t.continent_id),t.country_id="",t.zone_id="",f.value=[]},Z=()=>{f.value=B.value.filter(r=>r.zone_id==t.zone_id),t.country_id=""},{createPost:$,errors:w,loading:z}=X(),A=async()=>{if(p.type=="article"&&(t.content=m.value.value,v.value==1)){v.value++,h.value="please click again";return}let r=new FormData;r.append("image",t.image),r.append("title",t.title),r.append("type",t.type),r.append("user_id",t.user_id),r.append("language",t.language),r.append("content",t.content),r.append("continent_id",t.continent_id),r.append("zone_id",t.zone_id),r.append("country_id",t.country_id),r.append("ministry_id",t.ministry_id),await $(r),w.value==""&&(p.type=="article"?x.push({name:"admin.post.index",params:{type:"article"}}):x.push({name:"admin.post.index",params:{type:"propau"}}))},I=()=>{t.image=C.value.files[0]};return(r,s)=>(n(),a("div",re,[e("div",se,[e("div",ne,[e("h1",ae," Add "+i(c.type),1)]),e("section",ie,[u(w)!=""?(n(),O(W,{key:0},{default:V(()=>[H(i(u(w)),1)]),_:1})):y("",!0),e("h2",le," Add a new "+i(c.type),1),e("form",{onSubmit:s[8]||(s[8]=K(o=>A(),["prevent"])),id:"postform",enctype:"multipart/form-data"},[e("div",de,[e("div",ue,[ce,l(e("input",{required:"","onUpdate:modelValue":s[0]||(s[0]=o=>t.title=o),type:"text",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[q,t.title]])]),e("div",pe,[ye,l(e("select",{required:"","onUpdate:modelValue":s[1]||(s[1]=o=>t.language=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},_e,512),[[g,t.language]])]),e("div",null,[xe,l(e("select",{required:"","onUpdate:modelValue":s[2]||(s[2]=o=>t.continent_id=o),onChange:D,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),a(b,null,_(u(F),o=>(n(),a("option",{key:o.id,value:o.id},i(o.name_en),9,he))),128))],544),[[g,t.continent_id]])]),e("div",null,[ve,l(e("select",{required:"","onUpdate:modelValue":s[3]||(s[3]=o=>t.zone_id=o),onChange:Z,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[k.value.length!=0?(n(!0),a(b,{key:0},_(k.value,o=>(n(),a("option",{key:o.id,value:o.id},i(o.name_en),9,ke))),128)):(n(),a("option",we," Select "+i(r.$t("continent")),1))],544),[[g,t.zone_id]])]),e("div",null,[Ce,l(e("select",{required:"","onUpdate:modelValue":s[4]||(s[4]=o=>t.country_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[f.value.length!=0?(n(!0),a(b,{key:0},_(f.value,o=>(n(),a("option",{value:o.id},i(o.name_en),9,ze))),256)):(n(),a("option",Ve," Select "+i(r.$t("zoned")),1))],512),[[g,t.country_id]])]),e("div",null,[qe,l(e("select",{required:"","onUpdate:modelValue":s[5]||(s[5]=o=>t.ministry_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),a(b,null,_(u(P),o=>(n(),a("option",{key:o.id,value:o.id},i(o.name_en),9,Se))),128))],512),[[g,t.ministry_id]])]),c.type=="article"?(n(),a("div",Me,[Fe,e("input",{required:"",ref_key:"file",ref:C,onChange:s[6]||(s[6]=o=>I()),type:"file",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,544)])):y("",!0),e("div",Ue,[Ee,c.type=="article"?(n(),a("textarea",{key:0,required:"",ref_key:"textarea",ref:m,class:"h-96 w-full"},`\r
                            `,512)):(n(),a("div",je,[l(e("textarea",{required:"","onUpdate:modelValue":s[7]||(s[7]=o=>t.content=o),maxlength:"2000",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block h-32 w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring focus:ring-primary-blue focus:ring-opacity-40"},`\r
                                `,512),[[q,t.content]]),e("span",Be,i(t.content.length)+" of 2000 Characters",1)]))])]),e("div",Ne,[u(z)==0?(n(),a("button",Pe," Save ")):y("",!0),u(z)==1?(n(),a("button",Te,Ze)):y("",!0),R(G,{"enter-active-class":" transition-all  ","enter-from-class":" opacity-0  -translate-y-10","enter-to-class":"  opacity-1 translate-y-0","leave-active-class":"","leave-from-class":"","leave-to-class":""},{default:V(()=>[h.value!=""?(n(),a("span",$e,i(h.value),1)):y("",!0)]),_:1})])],32)])])]))}};export{Ge as default};
