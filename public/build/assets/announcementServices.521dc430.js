import{r,n as o,p as v}from"./app.4c9b42c1.js";function S(){const s=r([]),u=r([]),t=r(""),e=r(0),i=r(!1),l=r(1);return{filterAnnouncements:async n=>{t.value="";try{e.value=3;let a=await o.post("/api/announcements-filter",n,{headers:{Authorization:`Bearer ${localStorage.token}`}});s.value=a.data.data,e.value=!1}catch(a){a.response.status==401&&(v.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}},isAll:i,page:l,announcements:s,announcement:u,errors:t,loading:e,getAnnouncements:async()=>{t.value="",e.value=!0;let n=await o.get("/api/announcements?page="+l.value,{headers:{Authorization:`Bearer ${localStorage.token}`}});l.value==1?s.value=n.data.data:s.value=s.value.concat(n.data.data),e.value=!1,n.data.data.length==0&&(i.value=!0)},getAnnouncement:async n=>{t.value="",e.value=!0;let a=await o.get("/api/announcements/"+n,{headers:{Authorization:`Bearer ${localStorage.token}`}});e.value=0,u.value=a.data.data},createAnnouncement:async n=>{t.value="";try{e.value=!0,await o.post("/api/announcements",n,{headers:{Authorization:`Bearer ${localStorage.token}`,"Content-Type":"multipart/form-data"}}),e.value=!1}catch(a){if(a.response.status==422){e.value=0;for(const c in a.response.data.errors)t.value+=a.response.data.errors[c][0]+`
`}}},updateAnnouncement:async n=>{t.value="";try{e.value=!0,await o.post("/api/announcements/"+u.value.id,n,{headers:{Authorization:`Bearer ${localStorage.token}`,"Content-Type":"multipart/form-data"}}),e.value=!1}catch(a){if(e.value=0,a.response.status==422)for(const c in a.response.data.errors)t.value+=a.response.data.errors[c][0]+`	
`}},destroyAnnouncement:async n=>{t.value="";try{e.value=!0,await o.delete("/api/announcements/"+n,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e.value=!1}catch(a){e.value=0,a.response.status=="500"&&(t.value="Impossible de supprimer ce announcement")}},getAnnouncementsUser:async n=>{t.value="",e.value=!0;let a=await o.get("/api/announcements-user/"+n,{headers:{Authorization:`Bearer ${localStorage.token}`}});s.value=a.data.data,e.value=!1},getAnnouncementsUniversity:async n=>{t.value="",e.value=!0;let a=await o.get("/api/announcements-university/"+n,{headers:{Authorization:`Bearer ${localStorage.token}`}});s.value=a.data.data,e.value=!1},getAnnouncement2:async n=>{t.value="",e.value=!0;let a=await o.get("/api/announcements2/"+n,{headers:{Authorization:`Bearer ${localStorage.token}`}});e.value=0,u.value=a.data.data}}}export{S as u};
