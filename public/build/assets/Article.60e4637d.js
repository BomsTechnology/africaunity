import{c as o,d as l,e as t,F as p,x as _,f as d,g as i,L as T,u as G,r as x,a as K,o as O,M as Q,t as s,k as W,w as h,m,H as X,h as k,l as Y,j as y,J as v,K as ee,I as te,N as se,b as oe}from"./app.fb44c589.js";import{u as le}from"./countryServices.da13ab14.js";import{u as ne}from"./zoneServices.97066860.js";import{u as ae}from"./continentServices.3f8bd4fd.js";import{u as re}from"./ministryServices.88482c88.js";import{u as ie}from"./postServices.9bba598e.js";import{r as de}from"./PhotoIcon.d5adb873.js";import{r as ce}from"./PlusCircleIcon.bb0f6502.js";import{r as ue}from"./UserIcon.d6f91c5a.js";import{r as me}from"./CalendarIcon.b2abf5bb.js";import{r as ye}from"./ChatBubbleOvalLeftEllipsisIcon.3f204bdf.js";import{r as pe}from"./FaceFrownIcon.0366856b.js";const _e={class:"animate-pulse"},fe={class:"grid grid-cols-1 gap-4 py-8 px-10 md:grid-cols-2"},ge={class:"mx-auto h-44 w-32 overflow-hidden"},he=T('<div class="flex flex-col items-start justify-center p-6"><div class="mb-4 h-5 w-32 rounded-md bg-gray-200"></div><div class="mb-4 h-2.5 w-5/6 rounded-full bg-gray-200"></div><div class="flex w-full items-center justify-between"><div class="mb-4 h-2.5 w-1/5 rounded-full bg-gray-200"></div><div class="mb-4 h-2.5 w-3/5 rounded-full bg-gray-200"></div></div></div>',1),N={__name:"Article",setup(U){const $=[1,2,3];return(c,b)=>(o(),l("div",_e,[t("div",fe,[(o(),l(p,null,_($,f=>t("div",{key:f,class:"rounded bg-gray-100 shadow"},[t("div",ge,[d(i(de),{class:"h-full w-full text-gray-200"})]),he])),64))])]))}},ve={class:"mx-auto flex min-h-screen w-full flex-col-reverse bg-white p-4 text-lg md:space-y-2 lg:flex-row lg:space-x-2 xl:w-[90%]"},be={class:"lg:w-[70%]"},we={class:"text-center text-5xl font-bold capitalize text-primary-blue"},xe={class:"flex justify-end px-6"},ke={class:"text-base leading-4"},$e={key:0},Ce=["src"],Se={class:"p-6"},ze={key:0},Ve={key:1},je={key:2},Me={key:3},qe={class:"mt-4 flex items-center justify-between text-sm"},Ne={class:"flex items-center space-x-2 text-xs text-gray-500"},Ue={class:"flex space-x-1"},Be={class:"hidden space-x-1 lg:flex"},Ae={href:"#",class:"hover:text-primary-blue"},Fe={class:"item-center flex space-x-1"},Le={href:"#",class:"text-xs hover:text-primary-blue"},De={key:2},Pe={key:3,class:"flex animate-pulse flex-col items-center justify-center p-28 text-gray-500"},Ee={class:"mt-2 text-2xl"},He={class:"bg-white lg:w-[30%]"},Re={class:"z-0 w-full bg-white"},Ze={class:"inline-block bg-primary-blue px-2 py-1 text-white"},Ie={class:"text-md space-y-1 border-t-2 border-primary-blue p-4"},Je={class:"text-xs text-gray-500"},Te={value:"fr"},Ge={value:"en"},Ke={value:"es"},Oe={value:"pt"},Qe={class:"text-xs text-gray-500"},We=["placeholder"],Xe={class:"text-xs text-gray-500"},Ye=t("option",{value:""},"--------------",-1),et=["value"],tt={key:0},st={key:1},ot={key:2},lt={key:3},nt={class:"text-xs text-gray-500"},at=t("option",{value:""},"--------------",-1),rt=["value"],it={key:0},dt={key:1},ct={key:2},ut={key:3},mt={key:1,value:"null"},yt={class:"text-xs text-gray-500"},pt=t("option",{value:""},"--------------",-1),_t=["value"],ft={key:0},gt={key:1},ht={key:2},vt={key:3},bt={key:1,value:"null"},wt={class:"text-xs text-gray-500"},xt=t("option",{value:""},"--------------",-1),kt=["value"],$t={key:0},Ct={key:1},St={key:2},zt={key:3},Vt={key:0,type:"submit",class:"mt-3 w-full bg-primary-blue px-8 py-2 text-lg text-white"},jt={key:1,disabled:"",type:"submit",class:"mt-3 inline-flex w-full cursor-wait items-center justify-center bg-blue-300 px-8 py-2 text-lg text-white"},Mt=t("svg",{class:"mr-3 h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Zt={__name:"Article",setup(U){te();const{locale:$}=G(),c=se(),{posts:b,getPosts:f,filterPost:j,loading:u,page:C,isAll:M}=ie(),{countries:B,getCountries:A}=le(),{zones:F,getZones:L}=ne(),{continents:D,getContinents:P}=ae(),{ministries:E,getMinistries:H}=re(),S=x([]),w=x([]),R=localStorage.user?JSON.parse(localStorage.user):"",z=x(null),V=x(!0),a=K({country:"",continent:"",ministry:"",zone:"",keywords:"",lang:localStorage.lang,type:"article"});O(async()=>{window.addEventListener("scroll",q),"lang"in c.query?(a.continent=c.query.continent,a.zone=c.query.zone,a.ministry=c.query.ministry,a.keywords=c.query.keywords,a.country=c.query.country,a.lang=c.query.lang,await j({...a})):await f("article",localStorage.lang),await P(),await L(),await A(),await H()}),Q(async()=>{C.value=1,window.removeEventListener("scroll",q)});const q=async n=>{z.value&&z.value.getBoundingClientRect().bottom<window.innerHeight&&V.value&&!M.value&&a.country==""&&a.continent==""&&a.ministry==""&&a.zone==""&&a.keywords==""&&(V.value=!1,C.value++,await f("article",localStorage.lang),V.value=!0)},Z=()=>{S.value=F.value.filter(n=>n.continent_id==a.continent),a.country="",a.zone="",w.value=[]},I=()=>{w.value=B.value.filter(n=>n.zone_id==a.zone),a.country=""},J=async()=>{a.country!=""||a.continent!=""||a.ministry!=""||a.zone!=""||a.keywords!=""?await j({...a}):(C.value=1,M.value=!1,await f("article",localStorage.lang))};return(n,r)=>{const g=oe("router-link");return o(),l("div",ve,[t("div",be,[t("h1",we,s(n.$t("articles")),1),t("div",xe,[i(R).type!="business1"?(o(),W(g,{key:0,to:{name:"add.post",params:{type:"article"}},class:"flex items-center justify-start space-x-3 rounded bg-primary-blue px-3 py-2 text-white"},{default:h(()=>[d(i(ce),{class:"h-6 w-6"}),t("p",ke,s(n.$t("add"))+" Article",1)]),_:1},8,["to"])):m("",!0)]),i(u)==3?(o(),l("div",$e,[d(N)])):i(b).length!=0?(o(),l("div",{key:1,class:"grid gap-8 py-8 lg:grid-cols-2 lg:px-10",ref_key:"postsContainer",ref:z},[(o(!0),l(p,null,_(i(b),e=>(o(),l("div",{class:"dark:bg-gray-800 overflow-hidden rounded-lg bg-white shadow-md",key:e.id},[d(g,{to:{name:"show.post",params:{id:e.id,slug:e.slug}}},{default:h(()=>[t("img",{class:"h-44 w-full object-cover",src:e.image,alt:""},null,8,Ce)]),_:2},1032,["to"]),t("div",Se,[t("div",null,[t("a",{href:"#",class:"rounded py-1 px-2 text-xs capitalize text-white",style:X("background:"+e.ministry.color)},[n.$i18n.locale=="en"?(o(),l("span",ze,s(e.ministry.name_en),1)):n.$i18n.locale=="fr"?(o(),l("span",Ve,s(e.ministry.name_fr),1)):n.$i18n.locale=="es"?(o(),l("span",je,s(e.ministry.name_es),1)):(o(),l("span",Me,s(e.country.name_pt),1))],4),d(g,{to:{name:"show.post",params:{id:e.id,slug:e.slug}},class:"dark:text-white mt-2 block transform text-2xl font-semibold text-gray-800 transition-colors duration-200 hover:text-gray-600 hover:underline"},{default:h(()=>[k(s(e.title.length<=20?e.title:e.title.substring(0,19)+"..."),1)]),_:2},1032,["to"])]),t("div",qe,[d(g,{to:{name:"show.post",params:{id:e.id,slug:e.slug}},class:"dark:text-blue-400 text-blue-600 hover:underline"},{default:h(()=>[k(s(n.$t("read-more")),1)]),_:2},1032,["to"]),t("div",Ne,[t("div",Ue,[d(i(ue),{class:"h-4 w-4"}),d(g,{to:{name:"compte",params:{slug:e.user.slug,id:e.user.id}},class:"hover:text-primary-blue"},{default:h(()=>[k(s(e.user.firstname),1)]),_:2},1032,["to"])]),t("div",Be,[d(i(me),{class:"h-4 w-4"}),t("a",Ae,s(new Date(e.date).toLocaleDateString(i($),{day:"numeric",year:"numeric",month:"long"})),1)]),t("div",Fe,[d(i(ye),{class:"h-4 w-4 text-gray-500"}),t("a",Le,s(e.comments),1)])])])])]))),128))],512)):m("",!0),i(u)==1?(o(),l("div",De,[d(N)])):m("",!0),i(b).length==0&&i(u)!=1?(o(),l("div",Pe,[d(i(pe),{class:"h-16 w-16"}),t("span",Ee,s(n.$t("no-content")),1)])):m("",!0)]),t("div",He,[t("div",Re,[t("h1",Ze,s(n.$t("filter-article")),1),t("form",{onSubmit:r[8]||(r[8]=Y(e=>J(),["prevent"]))},[t("div",Ie,[t("div",null,[t("label",Je,s(n.$t("language")),1),y(t("select",{"onUpdate:modelValue":r[0]||(r[0]=e=>a.lang=e),class:"form-select mt-1 block w-full border-gray-300 px-3 py-2 text-xs focus:border-primary-blue focus:ring-primary-blue"},[t("option",Te,s(n.$t("fr")),1),t("option",Ge,s(n.$t("en")),1),t("option",Ke,s(n.$t("es")),1),t("option",Oe,s(n.$t("pt")),1)],512),[[v,a.lang]])]),t("div",null,[t("label",Qe,s(n.$t("key-words")),1),y(t("input",{type:"text","onUpdate:modelValue":r[1]||(r[1]=e=>a.keywords=e),placeholder:n.$t("key-words"),class:"form-input mt-1 block w-full border-gray-300 px-3 py-2 text-xs focus:border-primary-blue focus:ring-primary-blue"},null,8,We),[[ee,a.keywords]])]),t("div",null,[t("label",Xe,s(n.$t("continent")),1),y(t("select",{"onUpdate:modelValue":r[2]||(r[2]=e=>a.continent=e),onChange:r[3]||(r[3]=e=>Z()),class:"form-select mt-1 block w-full border-gray-300 px-3 py-2 text-xs focus:border-primary-blue focus:ring-primary-blue"},[Ye,(o(!0),l(p,null,_(i(D),e=>(o(),l("option",{key:e.id,value:e.id},[n.$i18n.locale=="en"?(o(),l("span",tt,s(e.name_en),1)):n.$i18n.locale=="fr"?(o(),l("span",st,s(e.name_fr),1)):n.$i18n.locale=="es"?(o(),l("span",ot,s(e.name_es),1)):(o(),l("span",lt,s(e.name_pt),1))],8,et))),128))],544),[[v,a.continent]])]),t("div",null,[t("label",nt,s(n.$t("zoned")),1),y(t("select",{"onUpdate:modelValue":r[4]||(r[4]=e=>a.zone=e),onChange:r[5]||(r[5]=e=>I()),class:"form-select mt-1 block w-full border-gray-300 px-3 py-2 text-xs focus:border-primary-blue focus:ring-primary-blue"},[at,S.value.length!=0?(o(!0),l(p,{key:0},_(S.value,e=>(o(),l("option",{key:e.id,value:e.id},[n.$i18n.locale=="en"?(o(),l("span",it,s(e.name_en),1)):n.$i18n.locale=="fr"?(o(),l("span",dt,s(e.name_fr),1)):n.$i18n.locale=="es"?(o(),l("span",ct,s(e.name_es),1)):(o(),l("span",ut,s(e.name_pt),1))],8,rt))),128)):(o(),l("option",mt," Select "+s(n.$t("continent")),1))],544),[[v,a.zone]])]),t("div",null,[t("label",yt,s(n.$t("country")),1),y(t("select",{"onUpdate:modelValue":r[6]||(r[6]=e=>a.country=e),class:"form-select mt-1 block w-full border-gray-300 px-3 py-2 text-xs focus:border-primary-blue focus:ring-primary-blue"},[pt,w.value.length!=0?(o(!0),l(p,{key:0},_(w.value,e=>(o(),l("option",{key:e.id,value:e.id},[n.$i18n.locale=="en"?(o(),l("span",ft,s(e.name_en),1)):n.$i18n.locale=="fr"?(o(),l("span",gt,s(e.name_fr),1)):n.$i18n.locale=="es"?(o(),l("span",ht,s(e.name_es),1)):(o(),l("span",vt,s(e.name_pt),1))],8,_t))),128)):(o(),l("option",bt," Select "+s(n.$t("zoned")),1))],512),[[v,a.country]])]),t("div",null,[t("label",wt,s(n.$t("ministry")),1),y(t("select",{"onUpdate:modelValue":r[7]||(r[7]=e=>a.ministry=e),class:"form-select mt-1 block w-full border-gray-300 px-3 py-2 text-xs focus:border-primary-blue focus:ring-primary-blue"},[xt,(o(!0),l(p,null,_(i(E),e=>(o(),l("option",{key:e.id,value:e.id},[n.$i18n.locale=="en"?(o(),l("span",$t,s(e.name_en),1)):n.$i18n.locale=="fr"?(o(),l("span",Ct,s(e.name_fr),1)):n.$i18n.locale=="es"?(o(),l("span",St,s(e.name_es),1)):(o(),l("span",zt,s(e.name_pt),1))],8,kt))),128))],512),[[v,a.ministry]])]),t("div",null,[i(u)==0||i(u)==2?(o(),l("button",Vt,s(n.$t("filter")),1)):m("",!0),i(u)==1?(o(),l("button",jt,[Mt,k(" "+s(n.$t("filter"))+"... ",1)])):m("",!0)])])],32)])])])}}};export{Zt as default};
