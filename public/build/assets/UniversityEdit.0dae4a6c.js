import{r as u,b as J,o as a,f as i,g as t,h as n,c as K,w as q,i as L,t as l,m as f,l as O,k as y,K as P,J as m,F as g,x as _,a as R,T as G,I as Q}from"./app.69871223.js";import{E as W}from"./Error.32d105e3.js";import{u as X}from"./universityServices.164b0162.js";import{u as Y}from"./continentServices.26ea2e5f.js";import{u as ee}from"./countryServices.5e75967f.js";import{u as te}from"./zoneServices.a1ce4d3e.js";import{u as oe}from"./cityServices.484db7d9.js";import"./_plugin-vue_export-helper.cdc0426e.js";const re={class:"relative h-auto w-full xl:mt-0 xl:p-4"},ae={class:"z-0 w-full p-4"},ie=t("div",{class:"flex w-full justify-between bg-white px-8 py-5 shadow-lg"},[t("h1",{class:"text-4xl font-bold capitalize text-primary-blue"}," Edit University ")],-1),ne={class:"mx-auto w-full bg-white p-6 shadow-md"},se=t("h2",{class:"text-md font-light text-gray-700"}," Edit University ",-1),le={class:"mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},ue={class:"col-span-2"},de=t("label",{class:"dark:text-gray-200 text-gray-700"},"Name",-1),ce=t("label",{class:"dark:text-gray-200 text-gray-700",for:"es"},"Continent",-1),ye=["value"],pe=t("label",{class:"dark:text-gray-200 text-gray-700",for:"es"},"Zone",-1),ve=["value"],fe={key:1,value:"null"},me=t("label",{class:"dark:text-gray-200 text-gray-700",for:"es"},"Country",-1),ge=["value"],_e={key:1,value:"null"},be=t("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"City",-1),xe=["value"],he={key:1,value:"null"},ke={class:"col-span-2"},we=t("label",{class:"dark:text-gray-200 text-gray-700",for:"fr"},"Image",-1),Ce={class:"col-span-2"},ze=t("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Description",-1),Ue={class:"mt-6 flex flex-col items-end justify-end"},Ve={key:0,type:"submit",class:"rounded bg-primary-blue px-6 py-2 leading-5 text-white focus:outline-none"},qe={key:1,type:"submit",disabled:"",class:"rounded bg-blue-300 px-6 py-2 leading-5 text-white focus:outline-none"},Se=t("svg",{class:"h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Ee=[Se],Fe={key:0,class:"text-xs font-light italic"},Ie={__name:"UniversityEdit",props:{id:{required:!0,type:String}},setup(S){const h=S,E=Q(),p=u(""),b=u(""),x=u(0),{updateUniversity:F,getUniversity:B,university:e,errors:k,loading:w}=X(),{continents:D,getContinents:M}=Y(),{countries:C,getCountries:N}=ee(),{cities:z,getCities:T}=oe(),{zones:U,getZones:$}=te(),V=u(null),v=u([]),c=u([]),d=u([]),j=()=>{d.value=z.value.filter(r=>r.country_id==e.value.country_id),e.value.city_id=""},Z=()=>{c.value=C.value.filter(r=>r.zone_id==e.value.zone_id),e.value.country_id="",e.value.city_id="",d.value=[]},I=()=>{v.value=U.value.filter(r=>r.continent_id==e.value.continent_id),e.value.zone_id="",e.value.country_id="",e.value.city_id="",d.value=[],c.value=[]};J(async()=>{await B(h.id),p.value.value=e.value.description,sceditor.create(p.value,{format:"bbcode",style:"https://cdn.jsdelivr.net/npm/sceditor@3/minified/themes/content/default.min.css",height:400,toolbarExclude:"indent,outdent,email,date,time,ltr,rtl,print,subscript,superscript,table,code,quote,emoticon",icons:"material"}),x.value++,await M(),await N(),await T(),await $(),v.value=U.value.filter(r=>r.continent_id==e.value.continent_id),c.value=C.value.filter(r=>r.zone_id==e.value.zone_id),d.value=z.value.filter(r=>r.country_id==e.value.country_id)});const A=async()=>{if(e.value.description=p.value.value,x.value==1){x.value++,b.value="please click again";return}let r=new FormData;r.append("image",e.value.image),r.append("name",e.value.name),r.append("description",e.value.description),r.append("continent_id",e.value.continent_id),r.append("country_id",e.value.country_id),r.append("city_id",e.value.city_id),r.append("zone_id",e.value.zone_id),r.append("_method","PUT"),await F(r,h.id),E.push({name:"admin.university.index"})},H=async()=>{e.image=V.value.files[0]};return(r,s)=>(a(),i("div",re,[t("div",ae,[ie,t("section",ne,[n(k)!=""?(a(),K(W,{key:0},{default:q(()=>[L(l(n(k)),1)]),_:1})):f("",!0),se,t("form",{onSubmit:s[6]||(s[6]=O(o=>A(),["prevent"])),id:"universityform",enctype:"multipart/form-data"},[t("div",le,[t("div",ue,[de,y(t("input",{required:"","onUpdate:modelValue":s[0]||(s[0]=o=>n(e).name=o),type:"text",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[P,n(e).name]])]),t("div",null,[ce,y(t("select",{required:"",onChange:I,"onUpdate:modelValue":s[1]||(s[1]=o=>n(e).continent_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(a(!0),i(g,null,_(n(D),o=>(a(),i("option",{key:o.id,value:o.id},l(o.name_en),9,ye))),128))],544),[[m,n(e).continent_id]])]),t("div",null,[pe,y(t("select",{required:"",onChange:Z,"onUpdate:modelValue":s[2]||(s[2]=o=>n(e).zone_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[v.value.length!=0?(a(!0),i(g,{key:0},_(v.value,o=>(a(),i("option",{key:o.id,value:o.id},l(o.name_en),9,ve))),128)):(a(),i("option",fe," Select "+l(r.$t("continent")),1))],544),[[m,n(e).zone_id]])]),t("div",null,[me,y(t("select",{required:"",onChange:j,"onUpdate:modelValue":s[3]||(s[3]=o=>n(e).country_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[c.value.length!=0?(a(!0),i(g,{key:0},_(c.value,o=>(a(),i("option",{key:o.id,value:o.id},l(o.name_en),9,ge))),128)):(a(),i("option",_e," Select "+l(r.$t("zoned")),1))],544),[[m,n(e).country_id]])]),t("div",null,[be,y(t("select",{required:"","onUpdate:modelValue":s[4]||(s[4]=o=>n(e).city_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[d.value.length!=0?(a(!0),i(g,{key:0},_(d.value,o=>(a(),i("option",{key:o.id,value:o.id},l(o.name_en),9,xe))),128)):(a(),i("option",he," Select "+l(r.$t("country")),1))],512),[[m,n(e).city_id]])]),t("div",ke,[we,t("input",{ref_key:"file",ref:V,onChange:s[5]||(s[5]=o=>H()),type:"file",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,544)]),t("div",Ce,[ze,t("textarea",{required:"",ref_key:"textarea",ref:p,class:"h-96 w-full"},`\r
                            `,512)])]),t("div",Ue,[n(w)==0?(a(),i("button",Ve," Save ")):f("",!0),n(w)==1?(a(),i("button",qe,Ee)):f("",!0),R(G,{"enter-active-class":" transition-all  ","enter-from-class":" opacity-0  -translate-y-10","enter-to-class":"  opacity-1 translate-y-0","leave-active-class":"","leave-from-class":"","leave-to-class":""},{default:q(()=>[b.value!=""?(a(),i("span",Fe,l(b.value),1)):f("",!0)]),_:1})])],32)])])]))}};export{Ie as default};
