import{b as h,p as y,d as g,r as u,o,f as l,g as s,t as r,c as w,w as x,i as m,m as c,l as v,a as _,h as b,k,K as $,n as M}from"./app.69871223.js";import{E as S}from"./Error.32d105e3.js";import{r as V}from"./MailIcon.3ae8aed2.js";import"./_plugin-vue_export-helper.cdc0426e.js";const B={class:"mx-auto w-full items-center justify-center bg-white px-2 py-8 md:space-x-6 md:px-12 lg:flex xl:w-[90%]"},C={class:"p-6"},N={class:"shadow"},E={class:"px-6 py-6"},F={class:"text-center text-3xl font-bold text-[#242A56]"},j={key:1,class:"mx-8 mt-2 bg-green-50 py-4 px-2 text-green-700"},z={class:"text-sm font-light"},A={class:"relative"},D=["placeholder"],T={key:0,type:"submit",class:"mt-6 w-full bg-primary-blue px-8 py-2 text-lg text-white"},q={key:1,disabled:"",type:"submit",class:"mt-6 inline-flex w-full cursor-wait items-center justify-center bg-blue-300 px-8 py-2 text-lg text-white"},H=s("svg",{class:"mr-3 h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),W={__name:"ForgotPassword",setup(J){const p=localStorage.user?JSON.parse(localStorage.user):"";h(async()=>{localStorage.token&&y.push({name:"compte",params:{name:p.firstname,id:p.id}})});const n=g({email:""}),i=u(""),t=u(0),f=async()=>{try{i.value="",t.value=1;let e=await M.post("/api/send-reset-password/",n);t.value=2}catch(e){if(t.value=0,e.response.status==422)for(const a in e.response.data.errors)errorsWM.value+=e.response.data.errors[a][0]+`
`;else e.response.status==401&&(i.value=e.response.data.message)}};return(e,a)=>(o(),l("div",B,[s("div",C,[s("div",N,[s("div",E,[s("h1",F,r(e.$t("password-forgot")),1),i.value!=""?(o(),w(S,{key:0},{default:x(()=>[m(r(i.value),1)]),_:1})):c("",!0),t.value==2?(o(),l("div",j,[s("p",null,r(e.$t("msg-sucess-send-Fp")),1)])):(o(),l("form",{key:2,onSubmit:a[1]||(a[1]=v(d=>f(),["prevent"])),class:"py-7"},[s("p",z,r(e.$t("write-email")),1),s("div",A,[s("span",null,[_(b(V),{class:"absolute mt-2 ml-2 h-6 w-6 text-gray-400"})]),k(s("input",{type:"email",required:"","onUpdate:modelValue":a[0]||(a[0]=d=>n.email=d),placeholder:e.$t("adresse")+" "+e.$t("email"),class:"form-input mt-2 block w-full border-gray-400 px-3 pr-2 pl-10 placeholder:text-gray-400 focus:border-primary-blue focus:ring-primary-blue"},null,8,D),[[$,n.email]])]),s("div",null,[t.value==0?(o(),l("button",T,r(e.$t("send")),1)):c("",!0),t.value==1?(o(),l("button",q,[H,m(" "+r(e.$t("send"))+"... ",1)])):c("",!0)])],32))])])])]))}};export{W as default};
