import{u as R,r as c,d as G,b as Q,o as n,f as a,g as t,t as o,O as v,l as g,h as u,c as W,w as U,i,m as f,k as p,K as B,J as k,F as x,x as w,a as X,T as Y,I as ee}from"./app.69871223.js";import{E as te}from"./Error.32d105e3.js";import{u as se}from"./postServices.5deb03b7.js";import{u as oe}from"./continentServices.26ea2e5f.js";import{u as ne}from"./zoneServices.a1ce4d3e.js";import{u as ae}from"./countryServices.5e75967f.js";import{u as re}from"./ministryServices.f16c6048.js";import"./_plugin-vue_export-helper.cdc0426e.js";const le={class:"mx-auto min-h-screen w-full bg-white py-4 lg:px-20 xl:w-[90%]"},ie={class:"w-full space-y-4 py-5 text-center"},de={class:"text-4xl font-bold capitalize text-primary-blue"},ce={class:"text-md text-gray-700"},ue={class:"flex flex-col items-center justify-center lg:flex-row lg:space-x-3"},pe={class:"font-semibold"},me={class:"mt-3 flex space-x-3 lg:mt-0"},ye={class:"mx-auto w-full rounded-md bg-white p-6 shadow-xl"},ge={class:"text-xl font-semibold"},fe={class:"text-md font-light text-gray-700"},_e={class:"mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},be={class:"col-span-2"},he={class:"dark:text-gray-200 text-gray-700"},ve=t("span",{class:"text-red-500"},"*",-1),ke={class:"text-xs font-light text-gray-400"},xe={class:"col-span-2 lg:col-span-1"},we={class:"dark:text-gray-200 text-gray-700",for:"es"},$e=t("span",{class:"text-red-500"},"*",-1),Ce=["value"],ze={key:0},Se={key:1},Ve={key:2},qe={key:3},Me={class:"col-span-2 lg:col-span-1"},Fe={class:"dark:text-gray-200 text-gray-700",for:"pt"},Ue=t("span",{class:"text-red-500"},"*",-1),Be=["value"],Ne={key:0},je={key:1},De={key:2},Ee={key:3},Pe={key:1,value:"null"},Te={class:"col-span-2 lg:col-span-1"},Oe={class:"dark:text-gray-200 text-gray-700",for:"es"},Ze=t("span",{class:"text-red-500"},"*",-1),Ae=["value"],Ie={key:0},Je={key:1},Le={key:2},He={key:3},Ke={key:1,value:"null"},Re={class:"col-span-2 lg:col-span-1"},Ge={class:"dark:text-gray-200 text-gray-700",for:"pt"},Qe=t("span",{class:"text-red-500"},"*",-1),We=["value"],Xe={key:0},Ye={key:1},et={key:2},tt={key:3},st={key:0,class:"col-span-2"},ot={class:"dark:text-gray-200 text-gray-700",for:"fr"},nt=t("span",{class:"text-red-500"},"*",-1),at={class:"col-span-2"},rt={class:"dark:text-gray-200 text-gray-700",for:"pt"},lt=t("span",{class:"text-red-500"},"*",-1),it={key:1},dt={class:"text-xs font-light text-gray-400"},ct={class:"mt-20"},ut={key:0,type:"submit",class:"text-md w-full rounded bg-primary-blue px-6 py-4 leading-5 text-white focus:outline-none"},pt={key:1,type:"submit",disabled:"",class:"text-md flex w-full items-center justify-center rounded bg-blue-300 px-6 py-4 leading-5 text-white focus:outline-none"},mt=t("svg",{class:"h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),yt={key:0,class:"text-xs font-light italic"},wt={__name:"AddPost",props:{type:{type:String}},setup(d){const m=d,$=ee(),{locale:q}=R(),N=["article","propau"],y=localStorage.user?JSON.parse(localStorage.user):"",{continents:j,getContinents:D}=oe(),{zones:E,getZones:P}=ne(),{countries:T,getCountries:O}=ae(),{ministries:Z,getMinistries:A}=re(),_=c(""),C=c(""),M=c(null),z=c([]),b=c([]),S=c(0),r=G({title:"",type:m.type,user_id:y.id,language:"fr",content:"",image:"",continent_id:"",zone_id:"",country_id:"",ministry_id:""});Q(async()=>{N.includes(m.type)||$.push({name:"home"}),await D(),await P(),await O(),await A(),m.type=="article"&&(sceditor.create(_.value,{format:"xhtml",style:"https://cdn.jsdelivr.net/npm/sceditor@3/minified/themes/content/default.min.css",height:400,toolbarExclude:"indent,outdent,email,date,time,ltr,rtl,print,subscript,superscript,table,code,quote,emoticon",icons:"material"}),_.value.value==""),S.value++});const I=()=>{z.value=E.value.filter(e=>e.continent_id==r.continent_id),r.country_id="",r.zone_id="",b.value=[]},J=()=>{b.value=T.value.filter(e=>e.zone_id==r.zone_id),r.country_id=""},{createPost:L,errors:V,loading:F}=se(),H=async()=>{if(m.type=="article"&&(r.content=_.value.value,S.value==1)){S.value++,C.value="please click again";return}let e=new FormData;e.append("image",r.image),e.append("title",r.title),e.append("type",r.type),e.append("user_id",r.user_id),e.append("language",localStorage.lang),e.append("content",r.content),e.append("continent_id",r.continent_id),e.append("zone_id",r.zone_id),e.append("country_id",r.country_id),e.append("ministry_id",r.ministry_id),await L(e),V.value==""&&(m.type=="article"?$.push({name:"compte",params:{name:y.firstname,id:y.id,redirect:"article"}}):$.push({name:"compte",params:{name:y.firstname,id:y.id,redirect:"propau"}}))},K=()=>{r.image=M.value.files[0]},h=e=>{q.value=e,localStorage.lang=q.value};return(e,l)=>(n(),a("div",le,[t("div",ie,[t("h1",de,o(e.$t("add"))+" "+o(d.type),1),t("h2",ce,o(e.$t("your"))+" "+o(d.type)+" "+o(e.$t("add-desc-1")),1),t("div",ue,[t("h1",pe,o(e.$t("select-lang"))+" :",1),t("div",me,[t("button",{class:v([e.$i18n.locale!="fr"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:l[0]||(l[0]=g(s=>h("fr"),["prevent"]))},o(e.$t("fr")),3),t("button",{class:v([e.$i18n.locale!="en"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:l[1]||(l[1]=g(s=>h("en"),["prevent"]))},o(e.$t("en")),3),t("button",{class:v([e.$i18n.locale!="es"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:l[2]||(l[2]=g(s=>h("es"),["prevent"]))},o(e.$t("es")),3),t("button",{class:v([e.$i18n.locale!="pt"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:l[3]||(l[3]=g(s=>h("pt"),["prevent"]))},o(e.$t("pt")),3)])])]),t("section",ye,[u(V)!=""?(n(),W(te,{key:0},{default:U(()=>[i(o(u(V)),1)]),_:1})):f("",!0),t("h1",ge,o(e.$t("add"))+" "+o(d.type),1),t("h2",fe,o(e.$t("good-msg-post"))+" ! ",1),t("form",{onSubmit:l[11]||(l[11]=g(s=>H(),["prevent"])),id:"postform",enctype:"multipart/form-data"},[t("div",_e,[t("div",be,[t("label",he,[i(o(e.$t("title"))+" ",1),ve]),p(t("input",{required:"","onUpdate:modelValue":l[4]||(l[4]=s=>r.title=s),maxlength:"50",type:"text",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[B,r.title]]),t("span",ke,o(r.title.length)+" of 50 Characters",1)]),t("div",xe,[t("label",we,[i(o(e.$t("continent"))+" ",1),$e]),p(t("select",{required:"","onUpdate:modelValue":l[5]||(l[5]=s=>r.continent_id=s),onChange:I,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),a(x,null,w(u(j),s=>(n(),a("option",{key:s.id,value:s.id},[e.$i18n.locale=="en"?(n(),a("span",ze,o(s.name_en),1)):e.$i18n.locale=="fr"?(n(),a("span",Se,o(s.name_fr),1)):e.$i18n.locale=="es"?(n(),a("span",Ve,o(s.name_es),1)):(n(),a("span",qe,o(s.name_pt),1))],8,Ce))),128))],544),[[k,r.continent_id]])]),t("div",Me,[t("label",Fe,[i(o(e.$t("zoned")),1),Ue]),p(t("select",{required:"",onChange:J,"onUpdate:modelValue":l[6]||(l[6]=s=>r.zone_id=s),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[z.value.length!=0?(n(!0),a(x,{key:0},w(z.value,s=>(n(),a("option",{key:s.id,value:s.id},[e.$i18n.locale=="en"?(n(),a("span",Ne,o(s.name_en),1)):e.$i18n.locale=="fr"?(n(),a("span",je,o(s.name_fr),1)):e.$i18n.locale=="es"?(n(),a("span",De,o(s.name_es),1)):(n(),a("span",Ee,o(s.name_pt),1))],8,Be))),128)):(n(),a("option",Pe," Select "+o(e.$t("continent")),1))],544),[[k,r.zone_id]])]),t("div",Te,[t("label",Oe,[i(o(e.$t("country")),1),Ze]),p(t("select",{required:"","onUpdate:modelValue":l[7]||(l[7]=s=>r.country_id=s),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[b.value.length!=0?(n(!0),a(x,{key:0},w(b.value,s=>(n(),a("option",{key:s.id,value:s.id},[e.$i18n.locale=="en"?(n(),a("span",Ie,o(s.name_en),1)):e.$i18n.locale=="fr"?(n(),a("span",Je,o(s.name_fr),1)):e.$i18n.locale=="es"?(n(),a("span",Le,o(s.name_es),1)):(n(),a("span",He,o(s.name_pt),1))],8,Ae))),128)):(n(),a("option",Ke," Select "+o(e.$t("zoned")),1))],512),[[k,r.country_id]])]),t("div",Re,[t("label",Ge,[i(o(e.$t("ministry")),1),Qe]),p(t("select",{required:"","onUpdate:modelValue":l[8]||(l[8]=s=>r.ministry_id=s),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),a(x,null,w(u(Z),s=>(n(),a("option",{key:s.id,value:s.id},[e.$i18n.locale=="en"?(n(),a("span",Xe,o(s.name_en),1)):e.$i18n.locale=="fr"?(n(),a("span",Ye,o(s.name_fr),1)):e.$i18n.locale=="es"?(n(),a("span",et,o(s.name_es),1)):(n(),a("span",tt,o(s.name_pt),1))],8,We))),128))],512),[[k,r.ministry_id]])]),d.type=="article"?(n(),a("div",st,[t("label",ot,[i(o(e.$t("thumbnails"))+" ",1),nt]),t("input",{required:"",ref_key:"file",ref:M,onChange:l[9]||(l[9]=s=>K()),accept:"image/*",type:"file",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,544)])):f("",!0),t("div",at,[t("label",rt,[i(o(e.$t("content"))+" ",1),lt]),d.type=="article"?(n(),a("textarea",{key:0,required:"",ref_key:"textarea",ref:_,class:"h-96 w-full"},`\r
                        `,512)):(n(),a("div",it,[p(t("textarea",{required:"","onUpdate:modelValue":l[10]||(l[10]=s=>r.content=s),maxlength:"2000",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block h-32 w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring focus:ring-primary-blue focus:ring-opacity-40"},`\r
                            `,512),[[B,r.content]]),t("span",dt,o(r.content.length)+" of 2000 Characters",1)]))])]),t("div",ct,[u(F)==0?(n(),a("button",ut,o(e.$t("save")),1)):f("",!0),u(F)==1?(n(),a("button",pt,[i(o(e.$t("save"))+"... ",1),mt])):f("",!0),X(Y,{"enter-active-class":" transition-all  ","enter-from-class":" opacity-0  -translate-y-10","enter-to-class":"  opacity-1 translate-y-0","leave-active-class":"","leave-from-class":"","leave-to-class":""},{default:U(()=>[C.value!=""?(n(),a("span",yt,o(C.value),1)):f("",!0)]),_:1})])],32)])]))}};export{wt as default};
