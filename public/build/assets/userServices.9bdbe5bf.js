import{r as l,n as o,p as c}from"./app.4c9b42c1.js";function $(){const n=l([]),i=l([]),t=l(""),a=l(0),d=l(!1),p=l(1);return{isAll:d,page:p,users:n,user:i,errors:t,loading:a,deleteUserData:async s=>{t.value="";try{a.value=!0;let e=await o.post("/api/users-delete-data",s,{headers:{Authorization:`Bearer ${localStorage.token}`}});a.value=!1}catch(e){if(a.value=0,e.response.status==422)for(const r in e.response.data.errors)t.value+=e.response.data.errors[r][0]+`	
`;else e.response.status==401&&(t.value=e.response.data.message)}},getUsers:async()=>{try{t.value="",a.value=!0;let s=await o.get("/api/users",{headers:{Authorization:`Bearer ${localStorage.token}`}});n.value=s.data.data,a.value=!1}catch(s){s.response.status==401&&(c.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}},getUser:async s=>{t.value="";try{a.value=!0;let e=await o.get("/api/users/"+s,{headers:{Authorization:`Bearer ${localStorage.token}`}});a.value=0,i.value=e.data.data}catch(e){e.response.status==401&&(c.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}},createUser:async s=>{t.value="";try{a.value=!0,await o.post("/api/users",s,{headers:{Authorization:`Bearer ${localStorage.token}`}}),a.value=!1}catch(e){if(e.response.status==422){a.value=0;for(const r in e.response.data.errors)t.value+=e.response.data.errors[r][0]+`
`}}},updateUser:async(s,e)=>{t.value="";try{a.value=!0;let r=await o.post("/api/users/"+s,e,{headers:{Authorization:`Bearer ${localStorage.token}`,"Content-Type":"multipart/form-data"}});a.value=!1,localStorage.user=JSON.stringify(r.data.data),location.reload()}catch(r){if(a.value=0,r.response.status==422)for(const u in r.response.data.errors)t.value+=r.response.data.errors[u][0]+`	
`}},destroyUser:async s=>{t.value="";try{return a.value=!0,await o.delete("/api/users/"+s,{headers:{Authorization:`Bearer ${localStorage.token}`}}),a.value=!1,!0}catch{a.value=0,t.value="Impossible de supprimer ce user"}},updatePasswordUser:async(s,e)=>{t.value="";try{a.value=!0,await o.put("/api/users-change-password/"+s,e,{headers:{Authorization:`Bearer ${localStorage.token}`}}),a.value=!1}catch(r){if(a.value=0,r.response.status==422)for(const u in r.response.data.errors)t.value+=r.response.data.errors[u][0]+`	
`;else r.response.status==401&&(t.value=r.response.data.message)}},updateStatusUser:async(s,e)=>{t.value="";try{a.value=!0;let r=await o.put("/api/users-change-status/"+s,e,{headers:{Authorization:`Bearer ${localStorage.token}`}});a.value=!1,localStorage.user=JSON.stringify(r.data.data)}catch(r){if(a.value=0,r.response.status==422)for(const u in r.response.data.errors)t.value+=r.response.data.errors[u][0]+`	
`}},destroyUserFront:async s=>{t.value="";try{a.value=!0;let e=await o.post("/api/users-delete-user",s,{headers:{Authorization:`Bearer ${localStorage.token}`}});a.value=!1}catch(e){if(a.value=0,e.response.status==422)for(const r in e.response.data.errors)t.value+=e.response.data.errors[r][0]+`	
`;else e.response.status==401&&(t.value=e.response.data.message)}},getUsersType:async s=>{try{t.value="",a.value=!0;let e=await o.get("/api/users-type/"+s+"?page="+p.value,{headers:{Authorization:`Bearer ${localStorage.token}`}});p.value==1?n.value=e.data.data:n.value=n.value.concat(e.data.data),a.value=!1,e.data.data.length==0&&(d.value=!0)}catch(e){e.response.status==401&&(c.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}},filterUsers:async s=>{t.value="";try{a.value=3;let e=await o.post("/api/users-filter",s,{headers:{Authorization:`Bearer ${localStorage.token}`}});n.value=e.data.data,a.value=!1}catch(e){e.response.status==401&&(c.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}},updateUser2:async()=>{t.value="";try{a.value=!0;let s=await o.put("/api/users-update/"+i.value.id,i.value,{headers:{Authorization:`Bearer ${localStorage.token}`}});a.value=!1}catch(s){if(a.value=0,s.response.status==422)for(const e in s.response.data.errors)t.value+=s.response.data.errors[e][0]+`	
`}}}}export{$ as u};
