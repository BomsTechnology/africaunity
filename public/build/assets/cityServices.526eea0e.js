import{r as i,I as c,n as r}from"./app.fb44c589.js";function g(){const u=c(),l=i([]),o=i([]),t=i(""),e=i(0);return{cities:l,city:o,errors:t,loading:e,getCities:async()=>{t.value="",e.value=!0;let s=await r.get("/api/cities",{headers:{Authorization:`Bearer ${localStorage.token}`}});l.value=s.data.data,e.value=!1},getCity:async s=>{t.value="",e.value=!0;let a=await r.get("/api/cities/"+s,{headers:{Authorization:`Bearer ${localStorage.token}`}});e.value=0,o.value=a.data.data},createCity:async s=>{t.value="";try{e.value=!0,await r.post("/api/cities",s,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e.value=!1,u.push({name:"admin.city.index"})}catch(a){if(a.response.status==422){e.value=0;for(const n in a.response.data.errors)t.value+=a.response.data.errors[n][0]+`
`}}},updateCity:async s=>{t.value="";try{e.value=!0,await r.put("/api/cities/"+s,o.value,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e.value=!1,u.push({name:"admin.city.index"})}catch(a){if(e.value=0,a.response.status==422)for(const n in a.response.data.errors)t.value+=a.response.data.errors[n][0]+`	
`}},destroyCity:async s=>{t.value="";try{e.value=!0,await r.delete(`/api/cities/${JSON.stringify(s)}`,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e.value=!1}catch(a){e.value=0,a.response.status=="500"&&(t.value="Impossible de supprimer ce pays")}}}}export{g as u};
