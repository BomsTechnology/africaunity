import{r as x,o as M,c as l,d,e,t as n,g as o,k as R,w as E,h as i,m as g,l as I,j as u,K as c,f as z,J as v,F as _,x as k,I as O,b as T}from"./app.04741282.js";import{E as H}from"./Error.74e5730d.js";import{u as J}from"./announcementServices.8a4494af.js";import{u as K}from"./categoryAnnouncementServices.7eacd6da.js";import{u as P}from"./currencyServices.a5320f90.js";import{u as G}from"./universityServices.c75c609b.js";import"./_plugin-vue_export-helper.cdc0426e.js";const Q={class:"mx-auto min-h-screen w-full bg-white py-4 lg:px-20 xl:w-[90%]"},W={class:"w-full space-y-4 py-5 text-center"},X={class:"text-4xl font-bold capitalize text-primary-blue"},Y={class:"mx-auto w-full rounded-md bg-white p-6 shadow-xl"},Z={class:"text-xl font-semibold"},ee={class:"text-md font-light text-gray-700"},te={class:"mt-4"},re={class:"col-span-2"},oe={class:"dark:text-gray-200 text-gray-700"},se=e("span",{class:"text-red-500"},"*",-1),ae={class:"text-xs font-light text-gray-400"},ne={class:"divSelect2 col-span-2 mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},le={class:"dark:text-gray-200 text-gray-700",for:"pt"},de=e("span",{class:"text-red-500"},"*",-1),ie={class:"dark:text-gray-200 text-gray-700",for:"pt"},ue=e("span",{class:"text-red-500"},"*",-1),ce=["value"],ge={class:"dark:text-gray-200 text-gray-700"},pe=e("span",{class:"text-red-500"},"*",-1),ye={class:"dark:text-gray-200 text-gray-700"},be=e("span",{class:"text-red-500"},"*",-1),me={key:0},fe={class:"dark:text-gray-200 text-gray-700"},xe=e("span",{class:"text-red-500"},"*",-1),ve={key:1},_e={class:"dark:text-gray-200 text-gray-700",for:"es"},ke=e("span",{class:"text-red-500"},"*",-1),he=["value"],we={class:"dark:text-gray-200 text-gray-700"},$e={class:"dark:text-gray-200 text-gray-700"},Ue={class:"col-span-2 mt-4"},Ve={class:"dark:text-gray-200 text-gray-700",for:"fr"},Ce={class:"flex items-center space-x-4 py-4"},Ae=["src","alt"],qe={class:"col-span-2 mt-4"},Se={class:"dark:text-gray-200 text-gray-700",for:"pt"},Fe=e("span",{class:"text-red-500"},"*",-1),Le={class:"mt-6"},Ne={key:0,type:"submit",class:"text-md w-full rounded bg-primary-blue px-6 py-4 leading-5 text-white focus:outline-none"},je={key:1,type:"submit",disabled:"",class:"text-md flex w-full items-center justify-center rounded bg-blue-300 px-6 py-4 leading-5 text-white focus:outline-none"},Be=e("svg",{class:"h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Te={__name:"EditAnnouncement",props:{id:{required:!0,type:String}},setup(h){const b=h,w=O(),m=x(null),{updateAnnouncement:$,getAnnouncement:U,announcement:t,errors:p,loading:f}=J(),{categoryAnnouncements:V,getCategoryAnnouncements:C}=K(),{currencies:A,getCurrencies:q}=P(),{universities:S,getAllUniversities:F}=G(),y=x(!1);M(async()=>{y.value=!0,await U(b.id),await q(),await C();let r=t.value.university_id;await F(),t.value.university_id="0",t.value.university_id=r,y.value=!1}),t.value.image="";const L=async()=>{let r=new FormData;r.append("image",t.value.image),r.append("title",t.value.title),r.append("description",t.value.description),r.append("price",t.value.price),r.append("adress",t.value.adress),r.append("website",t.value.website),r.append("email",t.value.email),r.append("phone",t.value.phone),r.append("user_id",t.value.user_id),r.append("category_announcement_id",t.value.category_announcement_id),r.append("currency_id",t.value.currency_id),r.append("university_id",t.value.university_id),r.append("_method","PUT"),await $(r,b.id),p.value==""&&w.push({name:"universities"})},N=()=>{t.value.image=m.value.files[0]};function j(r){return URL.createObjectURL(r)}function B(r){return URL.revokeObjectURL(r)}return(r,a)=>{const D=T("SelectFilter");return l(),d("div",Q,[e("div",W,[e("h1",X,n(r.$t("edit"))+" "+n(r.$t("ads")),1)]),e("section",Y,[o(p)!=""?(l(),R(H,{key:0},{default:E(()=>[i(n(o(p)),1)]),_:1})):g("",!0),e("h1",Z,n(r.$t("edit"))+" "+n(r.$t("ads")),1),e("h2",ee,n(r.$t("good-msg-post"))+" ! ",1),e("form",{onSubmit:a[12]||(a[12]=I(s=>L(),["prevent"])),id:"announcementform",enctype:"multipart/form-data"},[e("div",te,[e("div",re,[e("label",oe,[i(n(r.$t("title"))+" ",1),se]),u(e("input",{required:"","onUpdate:modelValue":a[0]||(a[0]=s=>o(t).title=s),maxlength:"50",type:"text",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[c,o(t).title]]),e("span",ae,n(o(t).title?o(t).title.length:0)+" of 50 Characters",1)]),e("div",ne,[e("div",null,[e("label",le,[i(n(r.$t("university"))+" ",1),de]),z(D,{modelValue:o(t).university_id,"onUpdate:modelValue":a[1]||(a[1]=s=>o(t).university_id=s),data:o(S),placeholder:"Select University",required:!1,resetField:!0,loading:y.value,className:"w-full h-full mt-1 block rounded-md border bg-white  border-gray-300 p-2.5 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 text-sm"},null,8,["modelValue","data","loading","className"])]),e("div",null,[e("label",ie,[i(n(r.$t("category"))+" ",1),ue]),u(e("select",{required:"","onUpdate:modelValue":a[2]||(a[2]=s=>o(t).category_announcement_id=s),name:"",id:"",class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(l(!0),d(_,null,k(o(V),s=>(l(),d("option",{key:s.id,value:s.id},n(s.name),9,ce))),128))],512),[[v,o(t).category_announcement_id]])]),e("div",null,[e("label",ge,[i(n(r.$t("contact-phone"))+" ",1),pe]),u(e("input",{required:"","onUpdate:modelValue":a[3]||(a[3]=s=>o(t).phone=s),type:"text",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[c,o(t).phone]])]),e("div",null,[e("label",ye,[i(n(r.$t("contact-email"))+" ",1),be]),u(e("input",{required:"","onUpdate:modelValue":a[4]||(a[4]=s=>o(t).email=s),type:"email",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[c,o(t).email]])]),o(t).category_announcement_id!=10?(l(),d("div",me,[e("label",fe,[i(n(r.$t("price"))+" ",1),xe]),u(e("input",{required:"","onUpdate:modelValue":a[5]||(a[5]=s=>o(t).price=s),type:"text",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[c,o(t).price]])])):g("",!0),o(t).category_announcement_id!=10?(l(),d("div",ve,[e("label",_e,[i(n(r.$t("currency"))+" ",1),ke]),u(e("select",{required:"","onUpdate:modelValue":a[6]||(a[6]=s=>o(t).currency_id=s),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(l(!0),d(_,null,k(o(A),s=>(l(),d("option",{key:s.id,value:s.id},n(s.symbol+" "+s.name),9,he))),128))],512),[[v,o(t).currency_id]])])):g("",!0),e("div",null,[e("label",we,n(r.$t("adresse")),1),u(e("input",{"onUpdate:modelValue":a[7]||(a[7]=s=>o(t).adress=s),placeholder:"Douala Cameroon",type:"text",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[c,o(t).adress]])]),e("div",null,[e("label",$e,n(r.$t("website")),1),u(e("input",{"onUpdate:modelValue":a[8]||(a[8]=s=>o(t).website=s),type:"text",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[c,o(t).website]])])]),e("div",Ue,[e("label",Ve,n(r.$t("thumbnails")),1),e("div",Ce,[o(t).image?(l(),d("img",{key:0,src:typeof o(t).image=="string"?o(t).image:j(o(t).image),onLoad:a[9]||(a[9]=s=>typeof o(t).image=="string"?"":B(o(t).image)),class:"h-16 w-16 rounded-full",alt:o(t).title},null,40,Ae)):g("",!0),e("input",{ref_key:"file",ref:m,onChange:a[10]||(a[10]=s=>N()),type:"file",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,544)])]),e("div",qe,[e("label",Se,[i(n(r.$t("description"))+" ",1),Fe]),u(e("textarea",{required:"",type:"text","onUpdate:modelValue":a[11]||(a[11]=s=>o(t).description=s),id:"pt",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block h-32 w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring focus:ring-primary-blue focus:ring-opacity-40"},`\r
                        `,512),[[c,o(t).description]])])]),e("div",Le,[o(f)==0?(l(),d("button",Ne,n(r.$t("save")),1)):g("",!0),o(f)==1?(l(),d("button",je,[i(n(r.$t("save"))+"... ",1),Be])):g("",!0)])],32)])])}}};export{Te as default};
