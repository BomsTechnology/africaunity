import{r as m,u as G,b as Q,o as a,f as l,g as t,t as o,O as k,l as f,h as r,c as W,w as B,i as d,m as u,k as y,K as E,J as x,F as w,x as $,a as X,T as Y,I as ee}from"./app.69871223.js";import{E as te}from"./Error.32d105e3.js";import{u as se}from"./postServices.5deb03b7.js";import{u as oe}from"./continentServices.26ea2e5f.js";import{u as ne}from"./zoneServices.a1ce4d3e.js";import{u as ae}from"./countryServices.5e75967f.js";import{u as le}from"./ministryServices.f16c6048.js";import"./_plugin-vue_export-helper.cdc0426e.js";const re={class:"mx-auto min-h-screen w-full bg-white py-4 lg:px-20 xl:w-[90%]"},ie={class:"w-full space-y-4 py-5 text-center"},de={class:"text-4xl font-bold capitalize text-primary-blue"},ue={class:"text-md text-gray-700"},ce={class:"flex flex-col items-center justify-center lg:flex-row lg:space-x-3"},pe={class:"font-semibold"},me={class:"mt-3 flex space-x-3 lg:mt-0"},ye={class:"mx-auto w-full rounded-md bg-white p-6 shadow-xl"},ge={class:"text-xl font-semibold"},fe={class:"text-md font-light text-gray-700"},_e={class:"mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},be={class:"col-span-2"},he={class:"dark:text-gray-200 text-gray-700"},ve=t("span",{class:"text-red-500"},"*",-1),ke={class:"text-xs font-light text-gray-400"},xe={class:"col-span-2 lg:col-span-1"},we={class:"dark:text-gray-200 text-gray-700",for:"es"},$e=t("span",{class:"text-red-500"},"*",-1),Ce=["value"],ze={key:0},Se={key:1},Ve={key:2},qe={key:3},Me={class:"col-span-2 lg:col-span-1"},Ue={class:"dark:text-gray-200 text-gray-700",for:"pt"},Fe=t("span",{class:"text-red-500"},"*",-1),Pe=["value"],Be={key:0},Ee={key:1},Ne={key:2},Te={key:3},je={key:1,value:"null"},De={class:"col-span-2 lg:col-span-1"},Oe={class:"dark:text-gray-200 text-gray-700",for:"es"},Ze=t("span",{class:"text-red-500"},"*",-1),Ie=["value"],Je={key:0},Le={key:1},Ae={key:2},He={key:3},Ke={key:1,value:"null"},Re={class:"col-span-2 lg:col-span-1"},Ge={class:"dark:text-gray-200 text-gray-700",for:"pt"},Qe=t("span",{class:"text-red-500"},"*",-1),We=["value"],Xe={key:0},Ye={key:1},et={key:2},tt={key:3},st={key:0,class:"col-span-2"},ot={class:"dark:text-gray-200 text-gray-700",for:"fr"},nt=t("span",{class:"text-red-500"},"*",-1),at={class:"flex items-center space-x-4 py-4"},lt=["src","alt"],rt={class:"col-span-2"},it={class:"dark:text-gray-200 text-gray-700",for:"pt"},dt=t("span",{class:"text-red-500"},"*",-1),ut={key:1},ct={key:1,class:"text-xs font-light text-gray-400"},pt={class:"mt-20"},mt={key:0,type:"submit",class:"text-md w-full rounded bg-primary-blue px-6 py-4 leading-5 text-white focus:outline-none"},yt={key:1,type:"submit",disabled:"",class:"text-md flex w-full items-center justify-center rounded bg-blue-300 px-6 py-4 leading-5 text-white focus:outline-none"},gt=t("svg",{class:"h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),ft={key:0,class:"text-xs font-light italic"},Ct={__name:"EditPost",props:{type:{required:!0,type:String},id:{required:!0,type:String}},setup(c){const p=c,C=ee(),q=m(null),{locale:M}=G(),N=["article","propau"],_=localStorage.user?JSON.parse(localStorage.user):"",{updatePost:T,getPost:j,post:n,errors:z,loading:U}=se(),{continents:D,getContinents:O}=oe(),{zones:F,getZones:Z}=ne(),{countries:P,getCountries:I}=ae(),{ministries:J,getMinistries:L}=le(),b=m(""),S=m(0),V=m(""),h=m([]),g=m([]),A=()=>{h.value=F.value.filter(e=>e.continent_id==n.value.continent_id),n.value.country_id="",n.value.zone_id="",g.value=[]},H=()=>{g.value=P.value.filter(e=>e.zone_id==n.value.zone_id),n.value.country_id=""};Q(async()=>{await j(p.id),N.includes(p.type)||C.push({name:"home"}),await O(),await Z(),await I(),await L(),h.value=F.value.filter(e=>e.continent_id==n.value.continent_id),g.value=P.value.filter(e=>e.zone_id==n.value.zone_id),p.type=="article"&&(b.value.value=n.value.content,sceditor.create(b.value,{format:"bbcode",style:"https://cdn.jsdelivr.net/npm/sceditor@3/minified/themes/content/default.min.css",height:400,toolbarExclude:"indent,outdent,email,date,time,ltr,rtl,print,subscript,superscript,table,code,quote,emoticon",icons:"material"})),S.value++}),n.value.image="";const K=async()=>{if(p.type=="article"&&(n.value.content=b.value.value,S.value==1)){S.value++,V.value="please click again";return}let e=new FormData;e.append("image",n.value.image),e.append("title",n.value.title),e.append("type",n.value.type),e.append("user_id",n.value.user_id),e.append("language",n.value.language),e.append("content",n.value.content),e.append("continent_id",n.value.continent_id),e.append("zone_id",n.value.zone_id),e.append("country_id",n.value.country_id),e.append("ministry_id",n.value.ministry_id),e.append("_method","PUT"),await T(e,p.id),z.value==""&&(p.type=="article"?C.push({name:"compte",params:{name:_.firstname,id:_.id,redirect:"article"}}):C.push({name:"compte",params:{name:_.firstname,id:_.id,redirect:"propau"}}))},R=()=>{n.image=q.value.files[0]},v=e=>{M=e,localStorage.lang=M};return(e,i)=>(a(),l("div",re,[t("div",ie,[t("h1",de,o(e.$t("edit"))+" "+o(c.type),1),t("h2",ue,o(e.$t("your"))+" "+o(c.type)+" "+o(e.$t("add-desc-1")),1),t("div",ce,[t("h1",pe,o(e.$t("select-lang"))+" :",1),t("div",me,[t("button",{class:k([e.$i18n.locale!="fr"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:i[0]||(i[0]=f(s=>v("fr"),["prevent"]))},o(e.$t("fr")),3),t("button",{class:k([e.$i18n.locale!="en"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:i[1]||(i[1]=f(s=>v("en"),["prevent"]))},o(e.$t("en")),3),t("button",{class:k([e.$i18n.locale!="es"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:i[2]||(i[2]=f(s=>v("es"),["prevent"]))},o(e.$t("es")),3),t("button",{class:k([e.$i18n.locale!="pt"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:i[3]||(i[3]=f(s=>v("pt"),["prevent"]))},o(e.$t("pt")),3)])])]),t("section",ye,[r(z)!=""?(a(),W(te,{key:0},{default:B(()=>[d(o(r(z)),1)]),_:1})):u("",!0),t("h1",ge,o(e.$t("edit"))+" "+o(c.type),1),t("h2",fe,o(e.$t("good-msg-post"))+" ! ",1),t("form",{onSubmit:i[11]||(i[11]=f(s=>K(),["prevent"])),id:"postform",enctype:"multipart/form-data"},[t("div",_e,[t("div",be,[t("label",he,[d(o(e.$t("title"))+" ",1),ve]),y(t("input",{required:"","onUpdate:modelValue":i[4]||(i[4]=s=>r(n).title=s),maxlength:"50",type:"text",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[E,r(n).title]]),t("span",ke,o(r(n).title?r(n).title.length:0)+" of 50 Characters",1)]),t("div",xe,[t("label",we,[d(o(e.$t("continent"))+" ",1),$e]),y(t("select",{required:"","onUpdate:modelValue":i[5]||(i[5]=s=>r(n).continent_id=s),onChange:A,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(a(!0),l(w,null,$(r(D),s=>(a(),l("option",{key:s.id,value:s.id},[e.$i18n.locale=="en"?(a(),l("span",ze,o(s.name_en),1)):e.$i18n.locale=="fr"?(a(),l("span",Se,o(s.name_fr),1)):e.$i18n.locale=="es"?(a(),l("span",Ve,o(s.name_es),1)):(a(),l("span",qe,o(s.name_pt),1))],8,Ce))),128))],544),[[x,r(n).continent_id]])]),t("div",Me,[t("label",Ue,[d(o(e.$t("zoned"))+" ",1),Fe]),y(t("select",{required:"","onUpdate:modelValue":i[6]||(i[6]=s=>r(n).zone_id=s),onChange:H,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[h.value.length!=0?(a(!0),l(w,{key:0},$(h.value,s=>(a(),l("option",{key:s.id,value:s.id},[e.$i18n.locale=="en"?(a(),l("span",Be,o(s.name_en),1)):e.$i18n.locale=="fr"?(a(),l("span",Ee,o(s.name_fr),1)):e.$i18n.locale=="es"?(a(),l("span",Ne,o(s.name_es),1)):(a(),l("span",Te,o(s.name_pt),1))],8,Pe))),128)):(a(),l("option",je," Select "+o(e.$t("continent")),1))],544),[[x,r(n).zone_id]])]),t("div",De,[t("label",Oe,[d(o(e.$t("country"))+" ",1),Ze]),y(t("select",{required:"","onUpdate:modelValue":i[7]||(i[7]=s=>r(n).country_id=s),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[g.value.length!=0?(a(!0),l(w,{key:0},$(g.value,s=>(a(),l("option",{key:s.id,value:s.id},[e.$i18n.locale=="en"?(a(),l("span",Je,o(s.name_en),1)):e.$i18n.locale=="fr"?(a(),l("span",Le,o(s.name_fr),1)):e.$i18n.locale=="es"?(a(),l("span",Ae,o(s.name_es),1)):(a(),l("span",He,o(s.name_pt),1))],8,Ie))),128)):(a(),l("option",Ke," Select "+o(e.$t("zoned")),1))],512),[[x,r(n).country_id]])]),t("div",Re,[t("label",Ge,[d(o(e.$t("ministry"))+" ",1),Qe]),y(t("select",{required:"","onUpdate:modelValue":i[8]||(i[8]=s=>r(n).ministry_id=s),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(a(!0),l(w,null,$(r(J),s=>(a(),l("option",{key:s.id,value:s.id},[e.$i18n.locale=="en"?(a(),l("span",Xe,o(s.name_en),1)):e.$i18n.locale=="fr"?(a(),l("span",Ye,o(s.name_fr),1)):e.$i18n.locale=="es"?(a(),l("span",et,o(s.name_es),1)):(a(),l("span",tt,o(s.name_pt),1))],8,We))),128))],512),[[x,r(n).ministry_id]])]),c.type=="article"?(a(),l("div",st,[t("label",ot,[d(o(e.$t("thumbnails"))+" ",1),nt]),t("div",at,[t("img",{src:r(n).image,class:"h-16 w-16 rounded-full",alt:r(n).title},null,8,lt),t("input",{ref_key:"file",ref:q,onChange:i[9]||(i[9]=s=>R()),type:"file",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,544)])])):u("",!0),t("div",rt,[t("label",it,[d(o(e.$t("content"))+" ",1),dt]),c.type=="article"?(a(),l("textarea",{key:0,required:"",ref_key:"textarea",ref:b,class:"h-96 w-full"},`\r
                        `,512)):(a(),l("div",ut,[r(n).content?y((a(),l("textarea",{key:0,required:"","onUpdate:modelValue":i[10]||(i[10]=s=>r(n).content=s),maxlength:"2000",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block h-32 w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring focus:ring-primary-blue focus:ring-opacity-40"},`\r
                            `,512)),[[E,r(n).content]]):u("",!0),r(n).content?(a(),l("span",ct,o(r(n).content.length)+" of 2000 Characters",1)):u("",!0)]))])]),t("div",pt,[r(U)==0?(a(),l("button",mt,o(e.$t("save")),1)):u("",!0),r(U)==1?(a(),l("button",yt,[d(o(e.$t("save"))+"... ",1),gt])):u("",!0),X(Y,{"enter-active-class":" transition-all  ","enter-from-class":" opacity-0  -translate-y-10","enter-to-class":"  opacity-1 translate-y-0","leave-active-class":"","leave-from-class":"","leave-to-class":""},{default:B(()=>[V.value!=""?(a(),l("span",ft,o(V.value),1)):u("",!0)]),_:1})])],32)])]))}};export{Ct as default};
