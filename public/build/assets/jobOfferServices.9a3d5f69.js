import{r as l,n as r,p as n}from"./app.69871223.js";function S(){const s=l([]),u=l([]),o=l(""),e=l(0),c=l(!1),i=l(1);return{isAll:c,page:i,jobOffers:s,jobOffer:u,errors:o,loading:e,filterJobs:async a=>{o.value="";try{e.value=3;let t=await r.post("/api/jobOffers-filter",a,{headers:{Authorization:`Bearer ${localStorage.token}`}});s.value=t.data.data,e.value=!1}catch(t){t.response.status==401&&(n.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}},getJobOffers:async()=>{o.value="";try{e.value=!0;let a=await r.get("/api/jobOffers/",{headers:{Authorization:`Bearer ${localStorage.token}`}});s.value=a.data.data,e.value=!1}catch(a){a.response.status==401&&(n.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}},getJobOffer:async a=>{o.value="";try{e.value=!0;let t=await r.get("/api/jobOffers/"+a,{headers:{Authorization:`Bearer ${localStorage.token}`}});e.value=0,u.value=t.data.data}catch(t){t.response.status==401&&(n.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}},createJobOffer:async a=>{o.value="";try{e.value=!0,await r.post("/api/jobOffers",a,{headers:{Authorization:`Bearer ${localStorage.token}`,"Content-Type":"multipart/form-data"}}),e.value=!1}catch(t){if(t.response.status==422){e.value=0;for(const f in t.response.data.errors)o.value+=t.response.data.errors[f][0]+`
`}}},updateJobOffer:async a=>{o.value="";try{e.value=!0,await r.post("/api/jobOffers/"+u.value.id,a,{headers:{Authorization:`Bearer ${localStorage.token}`,"Content-Type":"multipart/form-data"}}),e.value=!1}catch(t){if(e.value=0,t.response.status==422)for(const f in t.response.data.errors)o.value+=t.response.data.errors[f][0]+`	
`}},destroyJobOffer:async a=>{o.value="";try{e.value=!0,await r.delete("/api/jobOffers/"+a,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e.value=!1}catch(t){e.value=0,t.response.status=="500"&&(o.value="Impossible de supprimer ce jobOffer")}},getJobOffersUser:async a=>{o.value="";try{e.value=!0;let t=await r.get("/api/jobOffers-user/"+a,{headers:{Authorization:`Bearer ${localStorage.token}`}});s.value=t.data.data,e.value=!1}catch(t){t.response.status==401&&(n.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}},getJobOffer2:async a=>{o.value="",e.value=!0;let t=await r.get("/api/jobOffers2/"+a,{headers:{Authorization:`Bearer ${localStorage.token}`}});e.value=0,u.value=t.data.data},markFilled:async a=>{o.value="";try{e.value=!0,await r.get("/api/jobOffers-mark-filled/"+a,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e.value=!1}catch(t){e.value=0,t.response.status=="500"&&(o.value="Impossible de supprimer ce jobOffer")}},getJobOffersFront:async()=>{o.value="";try{e.value=!0;let a=await r.get("/api/jobOffers-front?page="+i.value,{headers:{Authorization:`Bearer ${localStorage.token}`}});i.value==1?s.value=a.data.data:s.value=s.value.concat(a.data.data),e.value=!1,a.data.data.length==0&&(c.value=!0)}catch(a){a.response.status==401&&(n.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}}}}export{S as u};
