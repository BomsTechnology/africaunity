import{r as _,b as $,o as a,f as i,g as e,t as l,h as n,c as j,w as N,i as A,m as g,l as I,k as d,K as z,J as c,F as m,x as f,I as L}from"./app.69871223.js";import{E as H}from"./Error.32d105e3.js";import{u as J}from"./postServices.5deb03b7.js";import{u as K}from"./continentServices.26ea2e5f.js";import{u as O}from"./zoneServices.a1ce4d3e.js";import{u as R}from"./countryServices.5e75967f.js";import{u as G}from"./ministryServices.f16c6048.js";import"./_plugin-vue_export-helper.cdc0426e.js";const Q={class:"relative h-auto w-full xl:mt-0 xl:p-4"},W={class:"z-0 w-full p-4"},X={class:"flex w-full justify-between bg-white px-8 py-5 shadow-lg"},Y={class:"text-4xl font-bold capitalize text-primary-blue"},ee={class:"mx-auto w-full bg-white p-6 shadow-md"},te={class:"text-md font-light text-gray-700"},oe={class:"mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},re={class:"col-span-2"},ne=e("label",{class:"dark:text-gray-200 text-gray-700"},"Title",-1),se={class:"col-span-2"},ae=e("label",{class:"dark:text-gray-200 text-gray-700",for:"en"},"Language",-1),ie=e("option",{value:"fr"},"French",-1),le=e("option",{value:"en"},"English",-1),de=e("option",{value:"es"},"Espanol",-1),ue=e("option",{value:"pt"},"Portugues",-1),ce=[ie,le,de,ue],pe=e("label",{class:"dark:text-gray-200 text-gray-700",for:"es"},"Continent",-1),ye=["value"],ge=e("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Zone",-1),me=["value"],fe={key:1,value:"null"},be=e("label",{class:"dark:text-gray-200 text-gray-700",for:"es"},"Country",-1),_e=["value"],ve={key:1,value:"null"},xe=e("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Ministry",-1),he=["value"],ke={key:0,class:"col-span-2"},we=e("label",{class:"dark:text-gray-200 text-gray-700",for:"fr"},"Image",-1),Ce={class:"col-span-2"},ze=e("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Content",-1),Ve={class:"mt-6 flex justify-end"},qe={key:0,type:"submit",class:"rounded bg-primary-blue px-6 py-2 leading-5 text-white focus:outline-none"},Me={key:1,type:"submit",disabled:"",class:"rounded bg-blue-300 px-6 py-2 leading-5 text-white focus:outline-none"},Se=e("svg",{class:"h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Ue=[Se],je={__name:"PostEdit",props:{type:{required:!0,type:String},id:{required:!0,type:String}},setup(p){const b=p,v=L(),x=_(null),{updatePost:V,getPost:q,post:t,errors:h,loading:k}=J(),{continents:M,getContinents:S}=K(),{zones:w,getZones:U}=O(),{countries:C,getCountries:E}=R(),{ministries:F,getMinistries:P}=G(),y=_([]),u=_([]),B=()=>{y.value=w.value.filter(r=>r.continent_id==t.value.continent_id),t.value.country_id="",t.value.zone_id="",u.value=[]},D=()=>{u.value=C.value.filter(r=>r.zone_id==t.value.zone_id),t.value.country_id=""};$(async()=>{await q(b.id),await S(),await U(),await E(),await P(),y.value=w.value.filter(r=>r.continent_id==t.value.continent_id),u.value=C.value.filter(r=>r.zone_id==t.value.zone_id)});const T=async()=>{let r=new FormData;r.append("image",t.value.image),r.append("title",t.value.title),r.append("type",t.value.type),r.append("user_id",t.value.user_id),r.append("language",t.value.language),r.append("content",t.value.content),r.append("continent_id",t.value.continent_id),r.append("zone_id",t.value.zone_id),r.append("country_id",t.value.country_id),r.append("ministry_id",t.value.ministry_id),r.append("_method","PUT"),await V(r,b.id),b.type=="article"?v.push({name:"admin.post.index",params:{type:"article"}}):v.push({name:"admin.post.index",params:{type:"propau"}})},Z=()=>{t.image=x.value.files[0]};return(r,s)=>(a(),i("div",Q,[e("div",W,[e("div",X,[e("h1",Y," Edit "+l(p.type),1)]),e("section",ee,[n(h)!=""?(a(),j(H,{key:0},{default:N(()=>[A(l(n(h)),1)]),_:1})):g("",!0),e("h2",te," Add a new "+l(p.type),1),e("form",{onSubmit:s[8]||(s[8]=I(o=>T(),["prevent"])),id:"postform",enctype:"multipart/form-data"},[e("div",oe,[e("div",re,[ne,d(e("input",{required:"","onUpdate:modelValue":s[0]||(s[0]=o=>n(t).title=o),type:"text",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[z,n(t).title]])]),e("div",se,[ae,d(e("select",{required:"","onUpdate:modelValue":s[1]||(s[1]=o=>n(t).language=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},ce,512),[[c,n(t).language]])]),e("div",null,[pe,d(e("select",{required:"","onUpdate:modelValue":s[2]||(s[2]=o=>n(t).continent_id=o),onChange:B,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(a(!0),i(m,null,f(n(M),o=>(a(),i("option",{key:o.id,value:o.id},l(o.name_en),9,ye))),128))],544),[[c,n(t).continent_id]])]),e("div",null,[ge,d(e("select",{required:"","onUpdate:modelValue":s[3]||(s[3]=o=>n(t).zone_id=o),onChange:D,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[y.value.length!=0?(a(!0),i(m,{key:0},f(y.value,o=>(a(),i("option",{key:o.id,value:o.id},l(o.name_en),9,me))),128)):(a(),i("option",fe," Select "+l(r.$t("continent")),1))],544),[[c,n(t).zone_id]])]),e("div",null,[be,d(e("select",{required:"","onUpdate:modelValue":s[4]||(s[4]=o=>n(t).country_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[u.value.length!=0?(a(!0),i(m,{key:0},f(u.value,o=>(a(),i("option",{key:o.id,value:o.id},l(o.name_en),9,_e))),128)):(a(),i("option",ve," Select "+l(r.$t("zoned")),1))],512),[[c,n(t).country_id]])]),e("div",null,[xe,d(e("select",{required:"","onUpdate:modelValue":s[5]||(s[5]=o=>n(t).ministry_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(a(!0),i(m,null,f(n(F),o=>(a(),i("option",{key:o.id,value:o.id},l(o.name_en),9,he))),128))],512),[[c,n(t).ministry_id]])]),p.type=="article"?(a(),i("div",ke,[we,e("input",{ref_key:"file",ref:x,onChange:s[6]||(s[6]=o=>Z()),type:"file",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,544)])):g("",!0),e("div",Ce,[ze,d(e("textarea",{required:"",type:"text","onUpdate:modelValue":s[7]||(s[7]=o=>n(t).content=o),id:"pt",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block h-32 w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring focus:ring-primary-blue focus:ring-opacity-40"},`\r
                            `,512),[[z,n(t).content]])])]),e("div",Ve,[n(k)==0?(a(),i("button",qe," Save ")):g("",!0),n(k)==1?(a(),i("button",Me,Ue)):g("",!0)])],32)])])]))}};export{je as default};
