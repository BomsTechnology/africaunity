import{r as n,n as r,p as u}from"./app.55978ff3.js";function B(){const l=n([]),c=n([]),i=n([]),a=n(""),t=n(0),v=n([]),d=n([]),g=n(!1),p=n(1);return{isAll:g,page:p,filterPost:async s=>{a.value="";try{t.value=3;let e=await r.post("/api/posts-filter",s,{headers:{Authorization:`Bearer ${localStorage.token}`}});l.value=e.data.data,t.value=0}catch(e){e.response.status==401?(u.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=e.response.data.message}},posts:l,post:i,errors:a,loading:t,getPosts:async(s,e)=>{a.value="",t.value=!0;try{let o=await r.get("/api/posts-type/"+s+"/"+e+"?page="+p.value,{headers:{Authorization:`Bearer ${localStorage.token}`}});p.value==1?l.value=o.data.data:l.value=l.value.concat(o.data.data),t.value=!1,o.data.data.length==0&&(g.value=!0)}catch(o){o.response.status==401?(u.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=o.response.data.message}},getPost:async s=>{a.value="";try{t.value=!0;let e=await r.get("/api/posts/"+s,{headers:{Authorization:`Bearer ${localStorage.token}`}});t.value=0,i.value=e.data.data}catch(e){e.response.status==401?(u.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=e.response.data.message}},createPost:async s=>{a.value="";try{t.value=!0,await r.post("/api/posts",s,{headers:{Authorization:`Bearer ${localStorage.token}`,"Content-Type":"multipart/form-data"}}),t.value=!1}catch(e){if(t.value=0,e.response.status==422)for(const o in e.response.data.errors)a.value+=e.response.data.errors[o][0]+`
`;else a.value=e.response.data.message}},updatePost:async s=>{a.value="";try{t.value=!0,await r.post("/api/posts/"+i.value.id,s,{headers:{Authorization:`Bearer ${localStorage.token}`,"Content-Type":"multipart/form-data"}}),t.value=!1}catch(e){if(t.value=0,e.response.status==422)for(const o in e.response.data.errors)a.value+=e.response.data.errors[o][0]+`	
`;else a.value=e.response.data.message}},destroyPost:async s=>{a.value="";try{t.value=!0,await r.delete("/api/posts/"+s,{headers:{Authorization:`Bearer ${localStorage.token}`}}),t.value=!1}catch(e){t.value=0,e.response.status=="500"?a.value="Impossible de supprimer ce post":a.value=e.response.data.message}},getPostCarousssel:async s=>{a.value="";try{t.value=!0;let e=await r.get("/api/posts-caroussel/"+s,{headers:{Authorization:`Bearer ${localStorage.token}`}});c.value=e.data.data,t.value=!1}catch(e){e.response.status==401?(u.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=e.response.data.message}},postCaroussel:c,getPost2:async s=>{a.value="";try{t.value=!0;let e=await r.get("/api/posts2/"+s,{headers:{Authorization:`Bearer ${localStorage.token}`}});i.value=e.data.data,t.value=0}catch(e){e.response.status==401?(u.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=e.response.data.message}},getPostsAll:async s=>{a.value="";try{t.value=!0;let e=await r.get("/api/posts-all/"+s,{headers:{Authorization:`Bearer ${localStorage.token}`}});l.value=e.data.data,t.value=!1}catch(e){e.response.status==401?(u.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=e.response.data.message}},getPostsUser:async s=>{a.value="";try{t.value=!0;let e=await r.get("/api/posts-user/"+s,{headers:{Authorization:`Bearer ${localStorage.token}`}});l.value=e.data.data,v.value=l.value.filter(o=>o.type=="article"),d.value=l.value.filter(o=>o.type=="propau"),t.value=!1}catch(e){e.response.status==401?(u.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=e.response.data.message}},articles:v,propau:d}}export{B as u};
