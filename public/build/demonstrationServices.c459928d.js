import{r as i,p as s,q as l}from"./app.4a599ac6.js";function S(){const n=i([]),u=i([]),a=i(""),t=i(0);return{filterDemonstration:async o=>{a.value="";try{t.value=1;let e=await s.post("/api/demonstrations-filter",o,{headers:{Authorization:`Bearer ${localStorage.token}`}});n.value=e.data.data,t.value=0}catch(e){e.response.status==401?(l.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=e.response.data.message}},demonstrations:n,demonstration:u,errors:a,loading:t,markedDemonstration:async o=>{a.value="";try{t.value=!0;let e=await s.get("/api/demonstrations-mark/"+o,{headers:{Authorization:`Bearer ${localStorage.token}`}});n.value=e.data.data,t.value=!1}catch(e){e.response.status==401?(l.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=e.response.data.message}},getDemonstrations:async()=>{a.value="",t.value=!0;try{let o=await s.get("/api/demonstrations/",{headers:{Authorization:`Bearer ${localStorage.token}`}});n.value=o.data.data,t.value=!1}catch(o){o.response.status==401?(l.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=o.response.data.message}},getDemonstration:async o=>{a.value="";try{t.value=!0;let e=await s.get("/api/demonstrations/"+o,{headers:{Authorization:`Bearer ${localStorage.token}`}});t.value=0,u.value=e.data.data}catch(e){e.response.status==401?(l.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=e.response.data.message}},createDemonstration:async o=>{a.value="";try{t.value=!0,await s.post("/api/demonstrations",o,{headers:{Authorization:`Bearer ${localStorage.token}`,"Content-Type":"multipart/form-data"}}),t.value=!1}catch(e){if(t.value=0,e.response.status==422)for(const r in e.response.data.errors)a.value+=e.response.data.errors[r][0]+`
`;else a.value=e.response.data.message}},updateDemonstration:async(o,e)=>{a.value="";try{t.value=!0,await s.post("/api/demonstrations/"+u.value.id,o,{headers:{Authorization:`Bearer ${localStorage.token}`,"Content-Type":"multipart/form-data"}}),t.value=!1}catch(r){if(t.value=0,r.response.status==422)for(const m in r.response.data.errors)a.value+=r.response.data.errors[m][0]+`	
`;else a.value=r.response.data.message}},destroyDemonstration:async o=>{a.value="";try{t.value=!0,await s.delete(`/api/demonstrations/${JSON.stringify(o)}`,{headers:{Authorization:`Bearer ${localStorage.token}`}}),t.value=!1}catch(e){t.value=0,e.response.status=="500"?a.value="Impossible de supprimer ce demonstration":a.value=e.response.data.message}},getDemonstrationsUser:async o=>{a.value="";try{t.value=!0;let e=await s.get("/api/demonstrations-user/"+o,{headers:{Authorization:`Bearer ${localStorage.token}`}});n.value=e.data.data,t.value=!1}catch(e){e.response.status==401?(l.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=e.response.data.message}}}}export{S as u};
