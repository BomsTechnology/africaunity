import{r as f,o as ae,c as n,d as l,e as o,t as a,g as r,k as T,w as re,j as d,P as ie,m as c,l as de,i as u,K as _,J as p,F as m,x as y,f as ue,H as ce,b as pe}from"./app.1097d858.js";import{u as me}from"./tenderServices.4dd1546a.js";import{u as ye}from"./currencyServices.62941b04.js";import{u as _e}from"./activityAreaServices.3a5ba1f3.js";import{u as fe,a as ge}from"./workDepartmentServices.de93db4b.js";import{u as be,a as ve,b as he}from"./yearExperienceServices.1d630a3d.js";import{u as ke}from"./contractTypeServices.9854bcb7.js";import{u as xe}from"./workModeServices.de8b8413.js";import{u as we}from"./languageServices.d93ed0d5.js";import{u as $e}from"./countryServices.39eefecd.js";import{u as Ve}from"./zoneServices.a52bcaa1.js";import{u as Ue}from"./continentServices.eb5fdb99.js";import{u as qe}from"./cityServices.9e4adf68.js";import{_ as Ce}from"./RichText.4d506fcb.js";const ze={class:"mx-auto min-h-screen w-full bg-white py-4 lg:px-20 xl:w-[90%]"},Te={class:"w-full space-y-4 py-5 text-center"},Le={class:"text-4xl font-bold capitalize text-primary-blue"},Re={class:"mx-auto w-full rounded-md bg-white p-6 shadow-xl"},Se={class:"text-xl font-semibold"},je={class:"text-md font-light text-gray-700"},Fe={class:"mt-4"},Ae={class:"col-span-2 mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},Be={class:"col-span-1"},Ee={class:"text-gray-700"},Me=o("span",{class:"text-red-500"},"*",-1),Ne={class:"text-xs font-light text-gray-400"},Oe={class:"col-span-1"},We=o("label",{class:"text-gray-700"},[d("Reference "),o("span",{class:"text-red-500"},"*")],-1),Ze={class:"text-xs font-light text-gray-400"},De={class:"col-span-2 mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},Ie={class:"text-gray-700",for:"es"},Pe=o("span",{class:"text-red-500"},"*",-1),He=["value"],Je={key:0},Ke={key:1},Ye={key:2},Ge={key:3},Qe={class:"text-gray-700",for:"es"},Xe=o("span",{class:"text-red-500"},"*",-1),et=["value"],tt={key:0},ot={key:1},st={key:2},nt={key:3},lt={key:1,value:"null"},at={class:"text-gray-700",for:"es"},rt=o("span",{class:"text-red-500"},"*",-1),it=["value"],dt={key:0},ut={key:1},ct={key:2},pt={key:3},mt={key:1,value:"null"},yt={class:"text-gray-700",for:"es"},_t=o("span",{class:"text-red-500"},"*",-1),ft=["value"],gt={key:0},bt={key:1},vt={key:2},ht={key:3},kt={key:1,value:"null"},xt={class:"col-span-2 mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},wt={class:""},$t={class:"text-gray-700"},Vt=o("span",{class:"text-red-500"},"*",-1),Ut={class:""},qt={class:"text-gray-700"},Ct=o("span",{class:"text-red-500"},"*",-1),zt={class:"col-span-2 mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},Tt={class:"text-gray-700"},Lt=o("span",{class:"text-red-500"},"*",-1),Rt={class:"text-gray-700"},St=o("span",{class:"text-red-500"},"*",-1),jt={class:"text-gray-700"},Ft={class:"text-gray-700"},At={class:"flex items-center space-x-4 py-4"},Bt=["src","alt"],Et=o("span",{class:"text-xs font-light text-gray-500"},"(Format: png, jpg, jpeg, webp | max: 500*500)",-1),Mt={class:"col-span-2 mt-4 grid grid-cols-1 gap-6 sm:grid-cols-3"},Nt={class:"text-gray-700"},Ot=o("span",{class:"text-red-500"},"*",-1),Wt={class:"text-gray-700"},Zt=o("span",{class:"text-red-500"},"*",-1),Dt={class:"text-gray-700",for:"es"},It=o("span",{class:"text-red-500"},"*",-1),Pt=["value"],Ht={class:"col-span-2 mt-4"},Jt={class:"text-gray-700",for:"es"},Kt={class:"hidden text-xs font-light lg:inline-block"},Yt=o("span",{class:"text-red-500"},"*",-1),Gt=["value"],Qt={key:0},Xt={key:1},eo={key:2},to={key:3},oo={class:"col-span-2 mt-4"},so={class:"text-gray-700",for:"es"},no={class:"hidden text-xs font-light lg:inline-block"},lo=o("span",{class:"text-red-500"},"*",-1),ao=["value"],ro={key:0},io={key:1},uo={key:2},co={key:3},po={class:"col-span-2 mt-4 grid grid-cols-1 gap-6 sm:grid-cols-3"},mo={class:"text-gray-700",for:"es"},yo=o("span",{class:"text-red-500"},"*",-1),_o=["value"],fo={class:"text-gray-700",for:"es"},go=o("span",{class:"text-red-500"},"*",-1),bo=["value"],vo={key:0},ho={key:1},ko={key:2},xo={key:3},wo={class:"text-gray-700",for:"es"},$o=o("span",{class:"text-red-500"},"*",-1),Vo=["value"],Uo={key:0},qo={key:1},Co={key:2},zo={key:3},To={class:"col-span-2 mt-4"},Lo={class:"text-gray-700 mb-2",for:"pt"},Ro=o("span",{class:"text-red-500"},"*",-1),So={class:"mt-6"},jo={key:0,type:"submit",class:"text-md w-full rounded bg-primary-blue px-6 py-4 leading-5 text-white focus:outline-none"},Fo={key:1,type:"submit",disabled:"",class:"text-md flex w-full items-center justify-center rounded bg-blue-300 px-6 py-4 leading-5 text-white focus:outline-none"},Yo={__name:"EditTender",props:{id:{required:!0,type:String}},setup(L){const w=L,R=ce(),$=f(null),{updateTender:S,getTender:j,tender:s,errors:k,loading:V}=me(),{currencies:F,getCurrencies:A}=ye(),{languages:B,getLanguages:E}=we(),{activityAreas:M,getActivityAreas:N}=_e(),{sizeCompanies:O,getSizeCompanies:W}=fe();be(),ve(),ke();const{workDepartments:Z,getWorkDepartments:D}=ge(),{workModes:I,getWorkModes:P}=xe();he();const{countries:H,getCountries:J}=$e(),{zones:K,getZones:Y}=Ve(),{continents:G,getContinents:Q}=Ue(),{cities:X,getCities:ee}=qe(),b=f([]),v=f([]),x=f([]),h=f([]),g=f([]),U=f(0),q=(t=!0)=>{g.value=X.value.filter(i=>i.country_id==s.value.country.id),t&&(s.value.city.id="")},C=(t=!0)=>{h.value=H.value.filter(i=>i.zone_id==s.value.zone.id),t&&(s.value.country.id="",s.value.city.id="",g.value=[])},z=(t=!0)=>{x.value=K.value.filter(i=>i.continent_id==s.value.continent.id),t&&(s.value.zone.id="",s.value.country.id="",s.value.city.id="",g.value=[],h.value=[])};ae(async()=>{await j(w.id),U.value++;for(const t of s.value.activity_areas)v.value.push(t.id);for(const t of s.value.languages)b.value.push(t.id);await Q(),await Y(),z(!1),await J(),C(!1),await ee(),q(!1),await A(),await P(),await D(),await W(),await N(),await E(),s.value.company_logo=""});const te=async()=>{let t=new FormData;t.append("title",s.value.title),t.append("description",s.value.description),t.append("location",s.value.location),t.append("reference",s.value.reference),t.append("company_name",s.value.company_name),t.append("company_email",s.value.company_email),t.append("company_website",s.value.company_website),t.append("company_logo",s.value.company_logo),t.append("min_price",s.value.min_price),t.append("max_price",s.value.max_price),t.append("end_date",s.value.end_date),t.append("user_id",s.value.user.id),t.append("currency_id",s.value.currency.id),t.append("work_department_id",s.value.work_department.id),t.append("work_mode_id",s.value.work_mode.id),t.append("size_company_id",s.value.size_company.id),t.append("city_id",s.value.city.id),t.append("zone_id",s.value.zone.id),t.append("continent_id",s.value.continent.id),t.append("country_id",s.value.country.id),t.append("languages",b.value),t.append("activityAreas",v.value),t.append("_method","PUT"),await S(t,w.id),k.value==""&&R.push({name:"tenders"})},oe=()=>{s.value.company_logo=$.value.files[0]};function se(t){return URL.createObjectURL(t)}function ne(t){return URL.revokeObjectURL(t)}return(t,i)=>{const le=pe("Spin");return n(),l("div",ze,[o("div",Te,[o("h1",Le,a(t.$t("edit"))+" Appel d'offre ",1)]),o("section",Re,[r(k)!=""?(n(),T(ie,{key:0},{default:re(()=>[d(a(r(k)),1)]),_:1})):c("",!0),o("h1",Se,a(t.$t("edit"))+" Appel d'offer_type",1),o("h2",je,a(t.$t("good-msg-post"))+" ! ",1),o("form",{onSubmit:i[22]||(i[22]=de(e=>te(),["prevent"])),id:"tenderform",enctype:"multipart/form-data"},[o("div",Fe,[o("div",Ae,[o("div",Be,[o("label",Ee,[d(a(t.$t("title"))+" ",1),Me]),u(o("input",{required:"","onUpdate:modelValue":i[0]||(i[0]=e=>r(s).title=e),maxlength:"50",type:"text",class:"mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[_,r(s).title]]),o("span",Ne,a(r(s).title?r(s).title.length:0)+" of 50 Characters",1)]),o("div",Oe,[We,u(o("input",{required:"","onUpdate:modelValue":i[1]||(i[1]=e=>r(s).reference=e),maxlength:"10",type:"text",class:"mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[_,r(s).reference]]),o("span",Ze,a(r(s).reference?r(s).reference.length:0)+" of 10 Characters",1)])]),o("div",De,[o("div",null,[o("label",Ie,[d(a(t.$t("continent"))+" ",1),Pe]),r(s).continent?u((n(),l("select",{key:0,required:"",onChange:z,"onUpdate:modelValue":i[2]||(i[2]=e=>r(s).continent.id=e),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),l(m,null,y(r(G),e=>(n(),l("option",{key:e.id,value:e.id},[t.$i18n.locale=="en"?(n(),l("span",Je,a(e.name_en),1)):t.$i18n.locale=="fr"?(n(),l("span",Ke,a(e.name_fr),1)):t.$i18n.locale=="es"?(n(),l("span",Ye,a(e.name_es),1)):(n(),l("span",Ge,a(e.name_pt),1))],8,He))),128))],544)),[[p,r(s).continent.id]]):c("",!0)]),o("div",null,[o("label",Qe,[d(a(t.$t("zoned"))+" ",1),Xe]),r(s).zone?u((n(),l("select",{key:0,required:"",onChange:C,"onUpdate:modelValue":i[3]||(i[3]=e=>r(s).zone.id=e),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[x.value.length!=0?(n(!0),l(m,{key:0},y(x.value,e=>(n(),l("option",{key:e.id,value:e.id},[t.$i18n.locale=="en"?(n(),l("span",tt,a(e.name_en),1)):t.$i18n.locale=="fr"?(n(),l("span",ot,a(e.name_fr),1)):t.$i18n.locale=="es"?(n(),l("span",st,a(e.name_es),1)):(n(),l("span",nt,a(e.name_pt),1))],8,et))),128)):(n(),l("option",lt," Requires "+a(t.$t("continent")),1))],544)),[[p,r(s).zone.id]]):c("",!0)]),o("div",null,[o("label",at,[d(a(t.$t("country"))+" ",1),rt]),r(s).country?u((n(),l("select",{key:0,required:"",onChange:q,"onUpdate:modelValue":i[4]||(i[4]=e=>r(s).country.id=e),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[h.value.length!=0?(n(!0),l(m,{key:0},y(h.value,e=>(n(),l("option",{key:e.id,value:e.id},[t.$i18n.locale=="en"?(n(),l("span",dt,a(e.name_en),1)):t.$i18n.locale=="fr"?(n(),l("span",ut,a(e.name_fr),1)):t.$i18n.locale=="es"?(n(),l("span",ct,a(e.name_es),1)):(n(),l("span",pt,a(e.name_pt),1))],8,it))),128)):(n(),l("option",mt," Requires "+a(t.$t("zoned")),1))],544)),[[p,r(s).country.id]]):c("",!0)]),o("div",null,[o("label",yt,[d(a(t.$t("city"))+" ",1),_t]),r(s).city?u((n(),l("select",{key:0,required:"","onUpdate:modelValue":i[5]||(i[5]=e=>r(s).city.id=e),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[g.value.length!=0?(n(!0),l(m,{key:0},y(g.value,e=>(n(),l("option",{key:e.id,value:e.id},[t.$i18n.locale=="en"?(n(),l("span",gt,a(e.name_en),1)):t.$i18n.locale=="fr"?(n(),l("span",bt,a(e.name_fr),1)):t.$i18n.locale=="es"?(n(),l("span",vt,a(e.name_es),1)):(n(),l("span",ht,a(e.name_pt),1))],8,ft))),128)):(n(),l("option",kt," Requires "+a(t.$t("country")),1))],512)),[[p,r(s).city.id]]):c("",!0)])]),o("div",xt,[o("div",wt,[o("label",$t,[d(a(t.$t("location"))+" ",1),Vt]),u(o("input",{required:"","onUpdate:modelValue":i[6]||(i[6]=e=>r(s).location=e),type:"text",class:"mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[_,r(s).location]])]),o("div",Ut,[o("label",qt,[d(a(t.$t("start-date"))+" ",1),Ct]),u(o("input",{required:"","onUpdate:modelValue":i[7]||(i[7]=e=>r(s).end_date=e),type:"date",class:"mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[_,r(s).end_date]])])]),o("div",zt,[o("div",null,[o("label",Tt,[d(a(t.$t("company-name"))+" ",1),Lt]),u(o("input",{required:"","onUpdate:modelValue":i[8]||(i[8]=e=>r(s).company_name=e),type:"text",class:"mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[_,r(s).company_name]])]),o("div",null,[o("label",Rt,[d(a(t.$t("company-email"))+" ",1),St]),u(o("input",{required:"","onUpdate:modelValue":i[9]||(i[9]=e=>r(s).company_email=e),type:"email",class:"mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[_,r(s).company_email]])]),o("div",null,[o("label",jt,a(t.$t("company-website")),1),u(o("input",{"onUpdate:modelValue":i[10]||(i[10]=e=>r(s).company_website=e),type:"text",class:"mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[_,r(s).company_website]])]),o("div",null,[o("label",Ft,a(t.$t("company-logo")),1),o("div",At,[r(s).company_logo?(n(),l("img",{key:0,src:typeof r(s).company_logo=="string"?r(s).company_logo:se(r(s).company_logo),onLoad:i[11]||(i[11]=e=>typeof r(s).company_logo=="string"?"":ne(r(s).company_logo)),class:"h-16 w-16 rounded-full",alt:r(s).title},null,40,Bt)):c("",!0),o("input",{ref_key:"file",ref:$,onChange:i[12]||(i[12]=e=>oe()),type:"file",class:"mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,544)]),Et])]),o("div",Mt,[o("div",null,[o("label",Nt,[d(a(t.$t("salary"))+" Min ",1),Ot]),u(o("input",{required:"","onUpdate:modelValue":i[13]||(i[13]=e=>r(s).min_price=e),type:"text",class:"mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[_,r(s).min_price]])]),o("div",null,[o("label",Wt,[d(a(t.$t("salary"))+" Max ",1),Zt]),u(o("input",{required:"","onUpdate:modelValue":i[14]||(i[14]=e=>r(s).max_price=e),type:"text",class:"mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[_,r(s).max_price]])]),o("div",null,[o("label",Dt,[d(a(t.$t("currency"))+" ",1),It]),r(s).currency?u((n(),l("select",{key:0,required:"","onUpdate:modelValue":i[15]||(i[15]=e=>r(s).currency.id=e),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),l(m,null,y(r(F),e=>(n(),l("option",{key:e.id,value:e.id},a(e.symbol+" "+e.name),9,Pt))),128))],512)),[[p,r(s).currency.id]]):c("",!0)])]),o("div",Ht,[o("label",Jt,[d(a(t.$t("language")+" "+t.$tc("of",2)+" "+t.$t("work"))+" ",1),o("span",Kt,"("+a(t.$t("maintain-crtl"))+")",1),Yt]),u(o("select",{required:"",multiple:"","onUpdate:modelValue":i[16]||(i[16]=e=>b.value=e),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),l(m,null,y(r(B),e=>(n(),l("option",{key:e.id,value:e.id},[t.$i18n.locale=="en"?(n(),l("span",Qt,a(e.name_en),1)):t.$i18n.locale=="fr"?(n(),l("span",Xt,a(e.name_fr),1)):t.$i18n.locale=="es"?(n(),l("span",eo,a(e.name_es),1)):(n(),l("span",to,a(e.name_pt),1))],8,Gt))),128))],512),[[p,b.value]])]),o("div",oo,[o("label",so,[d(a(t.$t("activity-area"))+" ",1),o("span",no,"("+a(t.$t("maintain-crtl"))+")",1),lo]),u(o("select",{required:"",multiple:"","onUpdate:modelValue":i[17]||(i[17]=e=>v.value=e),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),l(m,null,y(r(M),e=>(n(),l("option",{key:e.id,value:e.id},[t.$i18n.locale=="en"?(n(),l("span",ro,a(e.name_en),1)):t.$i18n.locale=="fr"?(n(),l("span",io,a(e.name_fr),1)):t.$i18n.locale=="es"?(n(),l("span",uo,a(e.name_es),1)):(n(),l("span",co,a(e.name_pt),1))],8,ao))),128))],512),[[p,v.value]])]),o("div",po,[o("div",null,[o("label",mo,[d(a(t.$t("size-company"))+" ",1),yo]),r(s).size_company?u((n(),l("select",{key:0,required:"","onUpdate:modelValue":i[18]||(i[18]=e=>r(s).size_company.id=e),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),l(m,null,y(r(O),e=>(n(),l("option",{key:e.id,value:e.id},a(e.name_en),9,_o))),128))],512)),[[p,r(s).size_company.id]]):c("",!0)]),o("div",null,[o("label",fo,[d(a(t.$t("work-dept"))+" ",1),go]),r(s).work_department?u((n(),l("select",{key:0,required:"","onUpdate:modelValue":i[19]||(i[19]=e=>r(s).work_department.id=e),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),l(m,null,y(r(Z),e=>(n(),l("option",{key:e.id,value:e.id},[t.$i18n.locale=="en"?(n(),l("span",vo,a(e.name_en),1)):t.$i18n.locale=="fr"?(n(),l("span",ho,a(e.name_fr),1)):t.$i18n.locale=="es"?(n(),l("span",ko,a(e.name_es),1)):(n(),l("span",xo,a(e.name_pt),1))],8,bo))),128))],512)),[[p,r(s).work_department.id]]):c("",!0)]),o("div",null,[o("label",wo,[d(a(t.$t("work-mode"))+" ",1),$o]),r(s).work_mode?u((n(),l("select",{key:0,required:"","onUpdate:modelValue":i[20]||(i[20]=e=>r(s).work_mode.id=e),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),l(m,null,y(r(I),e=>(n(),l("option",{key:e.id,value:e.id},[t.$i18n.locale=="en"?(n(),l("span",Uo,a(e.name_en),1)):t.$i18n.locale=="fr"?(n(),l("span",qo,a(e.name_fr),1)):t.$i18n.locale=="es"?(n(),l("span",Co,a(e.name_es),1)):(n(),l("span",zo,a(e.name_pt),1))],8,Vo))),128))],512)),[[p,r(s).work_mode.id]]):c("",!0)])]),o("div",To,[o("label",Lo,[d(a(t.$t("description"))+" ",1),Ro]),(n(),T(Ce,{key:U.value,modelValue:r(s).description,"onUpdate:modelValue":i[21]||(i[21]=e=>r(s).description=e)},null,8,["modelValue"]))])]),o("div",So,[r(V)==0?(n(),l("button",jo,a(t.$t("save")),1)):c("",!0),r(V)==1?(n(),l("button",Fo,[ue(le,{size:"small"})])):c("",!0)])],32)])])}}};export{Yo as default};
