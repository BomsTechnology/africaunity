import{r as o,u as p,H as v,n as r}from"./app.1097d858.js";function m(){const u=v(),l=o([]),i=o([]),t=o(""),e=o(0),{locale:c}=p();return{cities:l,city:i,errors:t,loading:e,getCities:async()=>{t.value="",e.value=!0;let s=await r.get(`/api/cities/language/${c.value}`,{headers:{Authorization:`Bearer ${localStorage.token}`}});l.value=s.data.data,e.value=!1},getCity:async s=>{t.value="",e.value=!0;let a=await r.get("/api/cities/"+s,{headers:{Authorization:`Bearer ${localStorage.token}`}});e.value=0,i.value=a.data.data},createCity:async s=>{t.value="";try{e.value=!0,await r.post("/api/cities",s,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e.value=!1,u.push({name:"admin.city.index"})}catch(a){if(a.response.status==422){e.value=0;for(const n in a.response.data.errors)t.value+=a.response.data.errors[n][0]+`
`}}},updateCity:async s=>{t.value="";try{e.value=!0,await r.put("/api/cities/"+s,i.value,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e.value=!1,u.push({name:"admin.city.index"})}catch(a){if(e.value=0,a.response.status==422)for(const n in a.response.data.errors)t.value+=a.response.data.errors[n][0]+`	
`}},destroyCity:async s=>{t.value="";try{e.value=!0,await r.delete(`/api/cities/${JSON.stringify(s)}`,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e.value=!1}catch(a){e.value=0,a.response.status=="500"&&(t.value="Impossible de supprimer ce pays")}}}}export{m as u};
