var h=(z,b,c)=>new Promise((y,p)=>{var f=e=>{try{m(c.next(e))}catch(u){p(u)}},q=e=>{try{m(c.throw(e))}catch(u){p(u)}},m=e=>e.done?y(e.value):Promise.resolve(e.value).then(f,q);m((c=c.apply(z,b)).next())});import{G as L,r as d,o as O,b as A,d as i,e as n,f as t,h as a,l as H,w as D,j as Q,t as l,P as W,k,m as X,I as _,K as Y,J as w,F as C,x as U,g as N,U as ee}from"./app.js";import{u as te}from"./universityServices.js";import{u as oe}from"./continentServices.js";import{u as re}from"./countryServices.js";import{u as ie}from"./zoneServices.js";import{u as ne}from"./cityServices.js";const ae={class:"relative min-h-screen w-full bg-white xl:mt-0 xl:p-4"},se={class:"z-0 w-full p-4"},le=t("div",{class:"flex w-full justify-between bg-white px-8 py-5"},[t("h1",{class:"text-4xl font-bold capitalize text-primary-blue"}," Edit University ")],-1),ue={class:"mx-auto w-full bg-white p-6"},de=t("h2",{class:"text-md font-light text-gray-700"}," Edit University ",-1),ce={class:"mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},ye={class:"col-span-2"},pe=t("label",{class:"dark:text-gray-200 text-gray-700"},"Name",-1),ve=t("label",{class:"dark:text-gray-200 text-gray-700",for:"es"},"Continent",-1),fe=["value"],me=t("label",{class:"dark:text-gray-200 text-gray-700",for:"es"},"Zone",-1),ge=["value"],_e={key:1,value:"null"},be=t("label",{class:"dark:text-gray-200 text-gray-700",for:"es"},"Country",-1),xe=["value"],he={key:1,value:"null"},ke=t("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"City",-1),we=["value"],Ce={key:1,value:"null"},Ue={class:"col-span-2"},ze=t("label",{class:"dark:text-gray-200 text-gray-700",for:"fr"},"Image",-1),qe={class:"col-span-2"},Ve=t("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Description",-1),Se={class:"mt-6 flex flex-col items-end justify-end"},Ee={key:0,type:"submit",class:"rounded bg-primary-blue px-6 py-2 leading-5 text-white focus:outline-none"},Fe={key:1,type:"submit",disabled:"",class:"rounded bg-blue-300 px-6 py-2 leading-5 text-white focus:outline-none"},je={key:0,class:"text-xs font-light italic"},Ze={__name:"UniversityEdit",props:{id:{required:!0,type:String}},setup(z){const b=z,c=L(),y=d(""),p=d(""),f=d(0),{updateUniversity:q,getUniversity:m,university:e,errors:u,loading:V}=te(),{continents:$,getContinents:B}=oe(),{countries:S,getCountries:M}=re(),{cities:E,getCities:R}=ne(),{zones:F,getZones:T}=ie(),j=d(null),x=d([]),g=d([]),v=d([]),Z=()=>{v.value=E.value.filter(r=>r.country_id==e.value.country_id),e.value.city_id=""},I=()=>{g.value=S.value.filter(r=>r.zone_id==e.value.zone_id),e.value.country_id="",e.value.city_id="",v.value=[]},P=()=>{x.value=F.value.filter(r=>r.continent_id==e.value.continent_id),e.value.zone_id="",e.value.country_id="",e.value.city_id="",v.value=[],g.value=[]};O(()=>h(this,null,function*(){yield m(b.id),y.value.value=e.value.description,sceditor.create(y.value,{format:"bbcode",style:"https://cdn.jsdelivr.net/npm/sceditor@3/minified/themes/content/default.min.css",height:400,toolbarExclude:"indent,outdent,email,date,time,ltr,rtl,print,subscript,superscript,table,code,quote,emoticon",icons:"material"}),f.value++,yield B(),yield M(),yield R(),yield T(),x.value=F.value.filter(r=>r.continent_id==e.value.continent_id),g.value=S.value.filter(r=>r.zone_id==e.value.zone_id),v.value=E.value.filter(r=>r.country_id==e.value.country_id),e.value.image=""}));const G=()=>h(this,null,function*(){if(e.value.description=y.value.value,f.value==1){f.value++,p.value="please click again";return}let r=new FormData;r.append("image",e.value.image),r.append("name",e.value.name),r.append("description",e.value.description),r.append("continent_id",e.value.continent_id),r.append("country_id",e.value.country_id),r.append("city_id",e.value.city_id),r.append("zone_id",e.value.zone_id),r.append("_method","PUT"),yield q(r,b.id),u.value==""&&c.push({name:"admin.university.index"})}),J=()=>h(this,null,function*(){e.value.image=j.value.files[0]});return(r,s)=>{const K=A("Spin");return i(),n("div",ae,[t("div",se,[le,t("section",ue,[a(u)!=""?(i(),H(W,{key:0},{default:D(()=>[Q(l(a(u)),1)]),_:1})):k("",!0),de,t("form",{onSubmit:s[6]||(s[6]=X(o=>G(),["prevent"])),id:"universityform",enctype:"multipart/form-data"},[t("div",ce,[t("div",ye,[pe,_(t("input",{required:"","onUpdate:modelValue":s[0]||(s[0]=o=>a(e).name=o),type:"text",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[Y,a(e).name]])]),t("div",null,[ve,_(t("select",{required:"",onChange:P,"onUpdate:modelValue":s[1]||(s[1]=o=>a(e).continent_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(i(!0),n(C,null,U(a($),o=>(i(),n("option",{key:o.id,value:o.id},l(o.name_en),9,fe))),128))],544),[[w,a(e).continent_id]])]),t("div",null,[me,_(t("select",{required:"",onChange:I,"onUpdate:modelValue":s[2]||(s[2]=o=>a(e).zone_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[x.value.length!=0?(i(!0),n(C,{key:0},U(x.value,o=>(i(),n("option",{key:o.id,value:o.id},l(o.name_en),9,ge))),128)):(i(),n("option",_e," Requires "+l(r.$t("continent")),1))],544),[[w,a(e).zone_id]])]),t("div",null,[be,_(t("select",{required:"",onChange:Z,"onUpdate:modelValue":s[3]||(s[3]=o=>a(e).country_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[g.value.length!=0?(i(!0),n(C,{key:0},U(g.value,o=>(i(),n("option",{key:o.id,value:o.id},l(o.name_en),9,xe))),128)):(i(),n("option",he," Requires "+l(r.$t("zoned")),1))],544),[[w,a(e).country_id]])]),t("div",null,[ke,_(t("select",{required:"","onUpdate:modelValue":s[4]||(s[4]=o=>a(e).city_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[v.value.length!=0?(i(!0),n(C,{key:0},U(v.value,o=>(i(),n("option",{key:o.id,value:o.id},l(o.name_en),9,we))),128)):(i(),n("option",Ce," Requires "+l(r.$t("country")),1))],512),[[w,a(e).city_id]])]),t("div",Ue,[ze,t("input",{ref_key:"file",ref:j,onChange:s[5]||(s[5]=o=>J()),type:"file",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,544)]),t("div",qe,[Ve,t("textarea",{required:"",ref_key:"textarea",ref:y,class:"h-96 w-full"},`
                            `,512)])]),t("div",Se,[a(V)==0?(i(),n("button",Ee," Save ")):k("",!0),a(V)==1?(i(),n("button",Fe,[N(K,{size:"small"})])):k("",!0),N(ee,{"enter-active-class":" transition-all  ","enter-from-class":" opacity-0  -translate-y-10","enter-to-class":"  opacity-1 translate-y-0","leave-active-class":"","leave-from-class":"","leave-to-class":""},{default:D(()=>[p.value!=""?(i(),n("span",je,l(p.value),1)):k("",!0)]),_:1})])],32)])])])}}};export{Ze as default};
