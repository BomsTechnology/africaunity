var m=(g,p,o)=>new Promise((c,r)=>{var a=s=>{try{e(o.next(s))}catch(l){r(l)}},d=s=>{try{e(o.throw(s))}catch(l){r(l)}},e=s=>s.done?c(s.value):Promise.resolve(s.value).then(a,d);e((o=o.apply(g,p)).next())});import{G as w,o as x,a as v,r as h,d as i,e as u,f as t,t as n,l as _,w as b,j as y,P as k,k as f,m as $,g as M,h as S,I as V,K as B,p as C}from"./app.59e8d623.js";import{r as N}from"./EnvelopeIcon.3f29a68f.js";const j={class:"mx-auto w-full items-center justify-center bg-white px-2 py-8 md:space-x-6 md:px-12 lg:flex xl:w-[90%]"},F={class:"p-6"},z={class:"shadow"},A={class:"px-6 py-6"},D={class:"text-center text-3xl font-bold text-[#242A56]"},E={key:1,class:"mx-8 mt-2 bg-green-50 py-4 px-2 text-green-700"},P={class:"text-sm font-light"},T={class:"relative"},q=["placeholder"],G={key:0,type:"submit",class:"mt-6 w-full bg-primary-blue px-8 py-2 text-lg text-white"},H={key:1,disabled:"",type:"submit",class:"mt-6 inline-flex w-full cursor-wait items-center justify-center bg-blue-300 px-8 py-2 text-lg text-white"},I=t("svg",{class:"mr-3 h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),R={__name:"ForgotPassword",setup(g){const p=w(),o=localStorage.user?JSON.parse(localStorage.user):"";x(()=>m(this,null,function*(){localStorage.token&&p.push({name:"compte",params:{slug:o.slug,id:o.id}})}));const c=v({email:""}),r=h(""),a=h(0),d=()=>m(this,null,function*(){try{r.value="",a.value=1,yield C.post("/api/forgot-password",c),a.value=2}catch(e){if(a.value=0,e.response.status==422)for(const s in e.response.data.errors)errorsWM.value+=e.response.data.errors[s][0]+`
`;else e.response.status==401&&(r.value=e.response.data.message)}});return(e,s)=>(i(),u("div",j,[t("div",F,[t("div",z,[t("div",A,[t("h1",D,n(e.$t("password-forgot")),1),r.value!=""?(i(),_(k,{key:0},{default:b(()=>[y(n(r.value),1)]),_:1})):f("",!0),a.value==2?(i(),u("div",E,[t("p",null,n(e.$t("msg-sucess-send-Fp")),1)])):(i(),u("form",{key:2,onSubmit:s[1]||(s[1]=$(l=>d(),["prevent"])),class:"py-7"},[t("p",P,n(e.$t("write-email")),1),t("div",T,[t("span",null,[M(S(N),{class:"absolute mt-2 ml-2 h-6 w-6 text-gray-400"})]),V(t("input",{type:"email",required:"","onUpdate:modelValue":s[0]||(s[0]=l=>c.email=l),placeholder:e.$t("adresse")+" "+e.$t("email"),class:"form-input mt-2 block w-full border-gray-400 px-3 pr-2 pl-10 placeholder:text-gray-400 focus:border-primary-blue focus:ring-primary-blue"},null,8,q),[[B,c.email]])]),t("div",null,[a.value==0?(i(),u("button",G,n(e.$t("send")),1)):f("",!0),a.value==1?(i(),u("button",H,[I,y(" "+n(e.$t("send"))+"... ",1)])):f("",!0)])],32))])])])]))}};export{R as default};
