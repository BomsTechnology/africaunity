var q=(u,y,d)=>new Promise((b,_)=>{var w=l=>{try{g(d.next(l))}catch(m){_(m)}},C=l=>{try{g(d.throw(l))}catch(m){_(m)}},g=l=>l.done?b(l.value):Promise.resolve(l.value).then(w,C);g((d=d.apply(u,y)).next())});import{G as A,r as S,o as I,a as J,b as L,d as n,e as a,f as e,t as i,h as p,l as F,w as O,j as G,P as K,k as h,m as H,I as c,K as M,J as f,F as v,x as k,g as Q}from"./app.59e8d623.js";import{u as W}from"./postServices.f699ba46.js";import{u as X}from"./continentServices.497e44db.js";import{u as Y}from"./zoneServices.1394980d.js";import{u as ee}from"./countryServices.be0576be.js";import{u as te}from"./ministryServices.0fd79df8.js";import{_ as oe}from"./RichText.3e014ce4.js";const re={class:"relative min-h-screen w-full bg-white xl:mt-0 xl:p-4"},se={class:"z-0 w-full p-4"},ne={class:"flex w-full justify-between bg-white px-8 py-5"},ae={class:"text-4xl font-bold capitalize text-primary-blue"},ie={class:"mx-auto w-full bg-white p-6"},le={class:"text-md font-light text-gray-700"},de={class:"mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},ue={class:"col-span-2"},ce=e("label",{class:"dark:text-gray-200 text-gray-700"},"Title",-1),pe={class:"col-span-2"},ye=e("label",{class:"dark:text-gray-200 text-gray-700",for:"en"},"Language",-1),ge=e("option",{value:"fr"},"French",-1),me=e("option",{value:"en"},"English",-1),fe=e("option",{value:"es"},"Espanol",-1),be=e("option",{value:"pt"},"Portugues",-1),_e=[ge,me,fe,be],xe=e("label",{class:"dark:text-gray-200 text-gray-700",for:"es"},"Continent",-1),he=["value"],ve=e("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Zone",-1),ke=["value"],we={key:1,value:"null"},Ce={class:"col-span-2"},Ve=e("label",{class:"dark:text-gray-200 text-gray-700",for:"es"},"Country",-1),ze=["value"],qe={key:1,value:"null"},Se={class:"col-span-2"},Ue=e("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Ministry",-1),Fe=["value"],Me={key:0,class:"col-span-2"},Pe=e("label",{class:"dark:text-gray-200 text-gray-700",for:"fr"},"Image",-1),Ne={class:"col-span-2"},$e=e("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Content",-1),je={key:1},Be={class:"text-xs font-light text-gray-400"},De={class:"mt-6 flex flex-col items-end justify-end"},Ee={key:0,type:"submit",class:"rounded bg-primary-blue px-6 py-2 leading-5 text-white focus:outline-none"},Ze={key:1,type:"submit",disabled:"",class:"rounded bg-blue-300 px-6 py-2 leading-5 text-white focus:outline-none"},Ke={__name:"PostCreate",props:{type:{required:!0,type:String}},setup(u){const y=u,d=A(),b=S(null),_=["article","propau"],w=JSON.parse(localStorage.user),{continents:C,getContinents:g}=X(),{zones:l,getZones:m}=Y(),{countries:P,getCountries:N}=ee(),{ministries:$,getMinistries:j}=te(),V=S([]),x=S([]);I(()=>q(this,null,function*(){_.includes(y.type)||d.push({name:"admin.dash"}),yield g(),yield m(),yield N(),yield j()}));const t=J({title:"",type:y.type,user_id:w.id,language:"fr",content:"",image:"",continent_id:"",zone_id:"",country_id:"",ministries:[]}),B=()=>{V.value=l.value.filter(s=>s.continent_id==t.continent_id),t.country_id="",t.zone_id="",x.value=[]},D=()=>{x.value=P.value.filter(s=>s.zone_id==t.zone_id),t.country_id=""},{createPost:E,errors:z,loading:U}=W(),Z=()=>q(this,null,function*(){let s=new FormData;s.append("image",t.image),s.append("title",t.title),s.append("type",t.type),s.append("user_id",t.user_id),s.append("language",t.language),s.append("content",t.content),s.append("continent_id",t.continent_id),s.append("zone_id",t.zone_id),s.append("country_id",t.country_id),s.append("ministries",t.ministries),yield E(s),z.value==""&&(y.type=="article"?d.push({name:"admin.post.index",params:{type:"article"}}):d.push({name:"admin.post.index",params:{type:"propau"}}))}),R=()=>{t.image=b.value.files[0]};return(s,r)=>{const T=L("Spin");return n(),a("div",re,[e("div",se,[e("div",ne,[e("h1",ae," Add "+i(u.type),1)]),e("section",ie,[p(z)!=""?(n(),F(K,{key:0},{default:O(()=>[G(i(p(z)),1)]),_:1})):h("",!0),e("h2",le," Add a new "+i(u.type),1),e("form",{onSubmit:r[9]||(r[9]=H(o=>Z(),["prevent"])),id:"postform",enctype:"multipart/form-data"},[e("div",de,[e("div",ue,[ce,c(e("input",{required:"","onUpdate:modelValue":r[0]||(r[0]=o=>t.title=o),type:"text",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[M,t.title]])]),e("div",pe,[ye,c(e("select",{required:"","onUpdate:modelValue":r[1]||(r[1]=o=>t.language=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},_e,512),[[f,t.language]])]),e("div",null,[xe,c(e("select",{required:"","onUpdate:modelValue":r[2]||(r[2]=o=>t.continent_id=o),onChange:B,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),a(v,null,k(p(C),o=>(n(),a("option",{key:o.id,value:o.id},i(o.name_en),9,he))),128))],544),[[f,t.continent_id]])]),e("div",null,[ve,c(e("select",{required:"","onUpdate:modelValue":r[3]||(r[3]=o=>t.zone_id=o),onChange:D,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[V.value.length!=0?(n(!0),a(v,{key:0},k(V.value,o=>(n(),a("option",{key:o.id,value:o.id},i(o.name_en),9,ke))),128)):(n(),a("option",we," Requires "+i(s.$t("continent")),1))],544),[[f,t.zone_id]])]),e("div",Ce,[Ve,c(e("select",{required:"","onUpdate:modelValue":r[4]||(r[4]=o=>t.country_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[x.value.length!=0?(n(!0),a(v,{key:0},k(x.value,o=>(n(),a("option",{value:o.id},i(o.name_en),9,ze))),256)):(n(),a("option",qe," Requires "+i(s.$t("zoned")),1))],512),[[f,t.country_id]])]),e("div",Se,[Ue,c(e("select",{required:"",multiple:"","onUpdate:modelValue":r[5]||(r[5]=o=>t.ministries=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),a(v,null,k(p($),o=>(n(),a("option",{key:o.id,value:o.id},i(o.name_en),9,Fe))),128))],512),[[f,t.ministries]])]),u.type=="article"?(n(),a("div",Me,[Pe,e("input",{required:"",ref_key:"file",ref:b,onChange:r[6]||(r[6]=o=>R()),type:"file",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,544)])):h("",!0),e("div",Ne,[$e,u.type=="article"?(n(),F(oe,{key:0,modelValue:t.content,"onUpdate:modelValue":r[7]||(r[7]=o=>t.content=o)},null,8,["modelValue"])):(n(),a("div",je,[c(e("textarea",{required:"","onUpdate:modelValue":r[8]||(r[8]=o=>t.content=o),maxlength:"2000",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block h-32 w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring focus:ring-primary-blue focus:ring-opacity-40"},`
                                `,512),[[M,t.content]]),e("span",Be,i(t.content.length)+" of 2000 Characters",1)]))])]),e("div",De,[p(U)==0?(n(),a("button",Ee," Save ")):h("",!0),p(U)==1?(n(),a("button",Ze,[Q(T,{size:"small"})])):h("",!0)])],32)])])])}}};export{Ke as default};
