import{r as u,o as J,d as a,e as l,f as t,t as i,h as n,l as U,w as M,j as K,P as O,k as d,m as A,I as c,K as P,J as g,F as b,x as _,g as S,U as H,G as Q,b as W}from"./app.4a599ac6.js";import{u as X}from"./postServices.6fe0f2dd.js";import{u as Y}from"./continentServices.aa02b2f5.js";import{u as ee}from"./zoneServices.8186c0fc.js";import{u as te}from"./countryServices.8844e816.js";import{u as oe}from"./ministryServices.ea3bf328.js";import{_ as se}from"./RichText.8d5e383b.js";const ne={class:"relative min-h-screen w-full bg-white xl:mt-0 xl:p-4"},re={class:"z-0 w-full p-4"},ae={class:"flex w-full justify-between bg-white px-8 py-5"},le={class:"text-4xl font-bold capitalize text-primary-blue"},ie={class:"mx-auto w-full bg-white p-6"},ue={class:"text-md font-light text-gray-700"},de={class:"mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},ce={class:"col-span-2"},pe=t("label",{class:"dark:text-gray-200 text-gray-700"},"Title",-1),ye={class:"col-span-2"},ge=t("label",{class:"dark:text-gray-200 text-gray-700",for:"en"},"Language",-1),me=t("option",{value:"fr"},"French",-1),fe=t("option",{value:"en"},"English",-1),be=t("option",{value:"es"},"Espanol",-1),_e=t("option",{value:"pt"},"Portugues",-1),ve=[me,fe,be,_e],xe=t("label",{class:"dark:text-gray-200 text-gray-700",for:"es"},"Continent",-1),he=["value"],ke=t("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Zone",-1),we=["value"],Ce={key:1,value:"null"},Ve={class:"col-span-2"},ze=t("label",{class:"dark:text-gray-200 text-gray-700",for:"es"},"Country",-1),qe=["value"],Ue={key:1,value:"null"},Me={class:"col-span-2"},Pe=t("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Ministry",-1),Se=["value"],Ee={key:0,class:"col-span-2"},Fe=t("label",{class:"dark:text-gray-200 text-gray-700",for:"fr"},"Image",-1),Te={class:"col-span-2"},$e=t("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Content",-1),je={key:1},Be={key:1,class:"text-xs font-light text-gray-400"},De={class:"mt-6 flex flex-col items-end justify-end"},Ne={key:0,type:"submit",class:"rounded bg-primary-blue px-6 py-2 leading-5 text-white focus:outline-none"},Ze={key:1,type:"submit",disabled:"",class:"rounded bg-blue-300 px-6 py-2 leading-5 text-white focus:outline-none"},Re={key:0,class:"text-xs font-light italic"},He={__name:"PostEdit",props:{type:{required:!0,type:String},id:{required:!0,type:String}},setup(p){const v=p,h=Q(),k=u(null),{updatePost:E,getPost:F,post:e,errors:x,loading:w}=X(),{continents:T,getContinents:$}=Y(),{zones:C,getZones:j}=ee(),{countries:V,getCountries:B}=te(),{ministries:D,getMinistries:N}=oe(),m=u([]),z=u(0),f=u([]),y=u([]),Z=()=>{f.value=C.value.filter(s=>s.continent_id==e.value.continent_id),e.value.country_id="",e.value.zone_id="",y.value=[]},R=()=>{y.value=V.value.filter(s=>s.zone_id==e.value.zone_id),e.value.country_id=""};u("");const q=u("");u(0),J(async()=>{await F(v.id),z.value++;for(const s of e.value.ministries)m.value.push(s.id);await $(),await j(),await B(),await N(),f.value=C.value.filter(s=>s.continent_id==e.value.continent_id),y.value=V.value.filter(s=>s.zone_id==e.value.zone_id)});const I=async()=>{let s=new FormData;s.append("image",e.value.image),s.append("title",e.value.title),s.append("type",e.value.type),s.append("user_id",e.value.user_id),s.append("language",e.value.language),s.append("content",e.value.content),s.append("continent_id",e.value.continent_id),s.append("zone_id",e.value.zone_id),s.append("country_id",e.value.country_id),s.append("ministries",m.value),s.append("_method","PUT"),await E(s,v.id),x.value==""&&(v.type=="article"?h.push({name:"admin.post.index",params:{type:"article"}}):h.push({name:"admin.post.index",params:{type:"propau"}}))},L=()=>{e.value.image=k.value.files[0]};return(s,r)=>{const G=W("Spin");return a(),l("div",ne,[t("div",re,[t("div",ae,[t("h1",le," Edit "+i(p.type),1)]),t("section",ie,[n(x)!=""?(a(),U(O,{key:0},{default:M(()=>[K(i(n(x)),1)]),_:1})):d("",!0),t("h2",ue," Edit a "+i(p.type),1),t("form",{onSubmit:r[9]||(r[9]=A(o=>I(),["prevent"])),id:"postform",enctype:"multipart/form-data"},[t("div",de,[t("div",ce,[pe,c(t("input",{required:"","onUpdate:modelValue":r[0]||(r[0]=o=>n(e).title=o),type:"text",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[P,n(e).title]])]),t("div",ye,[ge,c(t("select",{required:"","onUpdate:modelValue":r[1]||(r[1]=o=>n(e).language=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},ve,512),[[g,n(e).language]])]),t("div",null,[xe,c(t("select",{required:"","onUpdate:modelValue":r[2]||(r[2]=o=>n(e).continent_id=o),onChange:Z,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(a(!0),l(b,null,_(n(T),o=>(a(),l("option",{key:o.id,value:o.id},i(o.name_en),9,he))),128))],544),[[g,n(e).continent_id]])]),t("div",null,[ke,c(t("select",{required:"","onUpdate:modelValue":r[3]||(r[3]=o=>n(e).zone_id=o),onChange:R,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[f.value.length!=0?(a(!0),l(b,{key:0},_(f.value,o=>(a(),l("option",{key:o.id,value:o.id},i(o.name_en),9,we))),128)):(a(),l("option",Ce," Requires "+i(s.$t("continent")),1))],544),[[g,n(e).zone_id]])]),t("div",Ve,[ze,c(t("select",{required:"","onUpdate:modelValue":r[4]||(r[4]=o=>n(e).country_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[y.value.length!=0?(a(!0),l(b,{key:0},_(y.value,o=>(a(),l("option",{key:o.id,value:o.id},i(o.name_en),9,qe))),128)):(a(),l("option",Ue," Requires "+i(s.$t("zoned")),1))],512),[[g,n(e).country_id]])]),t("div",Me,[Pe,c(t("select",{required:"",multiple:"","onUpdate:modelValue":r[5]||(r[5]=o=>m.value=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(a(!0),l(b,null,_(n(D),o=>(a(),l("option",{key:o.id,value:o.id},i(o.name_en),9,Se))),128))],512),[[g,m.value]])]),p.type=="article"?(a(),l("div",Ee,[Fe,t("input",{ref_key:"file",ref:k,onChange:r[6]||(r[6]=o=>L()),type:"file",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,544)])):d("",!0),t("div",Te,[$e,p.type=="article"?(a(),U(se,{key:z.value,modelValue:n(e).content,"onUpdate:modelValue":r[7]||(r[7]=o=>n(e).content=o)},null,8,["modelValue"])):(a(),l("div",je,[n(e).content?c((a(),l("textarea",{key:0,required:"","onUpdate:modelValue":r[8]||(r[8]=o=>n(e).content=o),maxlength:"2000",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block h-32 w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring focus:ring-primary-blue focus:ring-opacity-40"},`
                                `,512)),[[P,n(e).content]]):d("",!0),n(e).content?(a(),l("span",Be,i(n(e).content.length)+" of 2000 Characters",1)):d("",!0)]))])]),t("div",De,[n(w)==0?(a(),l("button",Ne," Save ")):d("",!0),n(w)==1?(a(),l("button",Ze,[S(G,{size:"small"})])):d("",!0),S(H,{"enter-active-class":" transition-all  ","enter-from-class":" opacity-0  -translate-y-10","enter-to-class":"  opacity-1 translate-y-0","leave-active-class":"","leave-from-class":"","leave-to-class":""},{default:M(()=>[q.value!=""?(a(),l("span",Re,i(q.value),1)):d("",!0)]),_:1})])],32)])])])}}};export{He as default};
