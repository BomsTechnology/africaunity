var q=(c,f,p)=>new Promise((x,h)=>{var z=u=>{try{y(p.next(u))}catch(b){h(b)}},e=u=>{try{y(p.throw(u))}catch(b){h(b)}},y=u=>u.done?x(u.value):Promise.resolve(u.value).then(z,e);y((p=p.apply(c,f)).next())});import{G as K,r as d,o as O,b as A,d as a,e as l,f as t,t as i,h as n,l as E,w as F,j as H,P as Q,k as g,m as W,I as m,K as T,J as v,F as C,x as V,g as $,U as X}from"./app.js";import{u as Y}from"./postServices.js";import{u as ee}from"./continentServices.js";import{u as te}from"./zoneServices.js";import{u as oe}from"./countryServices.js";import{u as se}from"./ministryServices.js";import{_ as ne}from"./RichText.js";const re={class:"relative min-h-screen w-full bg-white xl:mt-0 xl:p-4"},ae={class:"z-0 w-full p-4"},le={class:"flex w-full justify-between bg-white px-8 py-5"},ie={class:"text-4xl font-bold capitalize text-primary-blue"},ue={class:"mx-auto w-full bg-white p-6"},de={class:"text-md font-light text-gray-700"},ce={class:"mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},pe={class:"col-span-2"},ye=t("label",{class:"dark:text-gray-200 text-gray-700"},"Title",-1),ge={class:"col-span-2"},me=t("label",{class:"dark:text-gray-200 text-gray-700",for:"en"},"Language",-1),fe=t("option",{value:"fr"},"French",-1),be=t("option",{value:"en"},"English",-1),_e=t("option",{value:"es"},"Espanol",-1),ve=t("option",{value:"pt"},"Portugues",-1),xe=[fe,be,_e,ve],he=t("label",{class:"dark:text-gray-200 text-gray-700",for:"es"},"Continent",-1),ke=["value"],we=t("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Zone",-1),Ce=["value"],Ve={key:1,value:"null"},ze={class:"col-span-2"},qe=t("label",{class:"dark:text-gray-200 text-gray-700",for:"es"},"Country",-1),Ue=["value"],Me={key:1,value:"null"},Pe={class:"col-span-2"},Se=t("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Ministry",-1),Ee=["value"],Fe={key:0,class:"col-span-2"},Te=t("label",{class:"dark:text-gray-200 text-gray-700",for:"fr"},"Image",-1),$e={class:"col-span-2"},je=t("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Content",-1),Be={key:1},De={key:1,class:"text-xs font-light text-gray-400"},Ne={class:"mt-6 flex flex-col items-end justify-end"},Ze={key:0,type:"submit",class:"rounded bg-primary-blue px-6 py-2 leading-5 text-white focus:outline-none"},Re={key:1,type:"submit",disabled:"",class:"rounded bg-blue-300 px-6 py-2 leading-5 text-white focus:outline-none"},Ie={key:0,class:"text-xs font-light italic"},We={__name:"PostEdit",props:{type:{required:!0,type:String},id:{required:!0,type:String}},setup(c){const f=c,p=K(),x=d(null),{updatePost:h,getPost:z,post:e,errors:y,loading:u}=Y(),{continents:b,getContinents:j}=ee(),{zones:U,getZones:B}=te(),{countries:M,getCountries:D}=oe(),{ministries:N,getMinistries:Z}=se(),k=d([]),P=d(0),w=d([]),_=d([]),R=()=>{w.value=U.value.filter(s=>s.continent_id==e.value.continent_id),e.value.country_id="",e.value.zone_id="",_.value=[]},I=()=>{_.value=M.value.filter(s=>s.zone_id==e.value.zone_id),e.value.country_id=""};d("");const S=d("");d(0),O(()=>q(this,null,function*(){yield z(f.id),P.value++;for(const s of e.value.ministries)k.value.push(s.id);yield j(),yield B(),yield D(),yield Z(),w.value=U.value.filter(s=>s.continent_id==e.value.continent_id),_.value=M.value.filter(s=>s.zone_id==e.value.zone_id)}));const L=()=>q(this,null,function*(){let s=new FormData;s.append("image",e.value.image),s.append("title",e.value.title),s.append("type",e.value.type),s.append("user_id",e.value.user_id),s.append("language",e.value.language),s.append("content",e.value.content),s.append("continent_id",e.value.continent_id),s.append("zone_id",e.value.zone_id),s.append("country_id",e.value.country_id),s.append("ministries",k.value),s.append("_method","PUT"),yield h(s,f.id),y.value==""&&(f.type=="article"?p.push({name:"admin.post.index",params:{type:"article"}}):p.push({name:"admin.post.index",params:{type:"propau"}}))}),G=()=>{e.value.image=x.value.files[0]};return(s,r)=>{const J=A("Spin");return a(),l("div",re,[t("div",ae,[t("div",le,[t("h1",ie," Edit "+i(c.type),1)]),t("section",ue,[n(y)!=""?(a(),E(Q,{key:0},{default:F(()=>[H(i(n(y)),1)]),_:1})):g("",!0),t("h2",de," Edit a "+i(c.type),1),t("form",{onSubmit:r[9]||(r[9]=W(o=>L(),["prevent"])),id:"postform",enctype:"multipart/form-data"},[t("div",ce,[t("div",pe,[ye,m(t("input",{required:"","onUpdate:modelValue":r[0]||(r[0]=o=>n(e).title=o),type:"text",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[T,n(e).title]])]),t("div",ge,[me,m(t("select",{required:"","onUpdate:modelValue":r[1]||(r[1]=o=>n(e).language=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},xe,512),[[v,n(e).language]])]),t("div",null,[he,m(t("select",{required:"","onUpdate:modelValue":r[2]||(r[2]=o=>n(e).continent_id=o),onChange:R,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(a(!0),l(C,null,V(n(b),o=>(a(),l("option",{key:o.id,value:o.id},i(o.name_en),9,ke))),128))],544),[[v,n(e).continent_id]])]),t("div",null,[we,m(t("select",{required:"","onUpdate:modelValue":r[3]||(r[3]=o=>n(e).zone_id=o),onChange:I,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[w.value.length!=0?(a(!0),l(C,{key:0},V(w.value,o=>(a(),l("option",{key:o.id,value:o.id},i(o.name_en),9,Ce))),128)):(a(),l("option",Ve," Requires "+i(s.$t("continent")),1))],544),[[v,n(e).zone_id]])]),t("div",ze,[qe,m(t("select",{required:"","onUpdate:modelValue":r[4]||(r[4]=o=>n(e).country_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[_.value.length!=0?(a(!0),l(C,{key:0},V(_.value,o=>(a(),l("option",{key:o.id,value:o.id},i(o.name_en),9,Ue))),128)):(a(),l("option",Me," Requires "+i(s.$t("zoned")),1))],512),[[v,n(e).country_id]])]),t("div",Pe,[Se,m(t("select",{required:"",multiple:"","onUpdate:modelValue":r[5]||(r[5]=o=>k.value=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(a(!0),l(C,null,V(n(N),o=>(a(),l("option",{key:o.id,value:o.id},i(o.name_en),9,Ee))),128))],512),[[v,k.value]])]),c.type=="article"?(a(),l("div",Fe,[Te,t("input",{ref_key:"file",ref:x,onChange:r[6]||(r[6]=o=>G()),type:"file",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,544)])):g("",!0),t("div",$e,[je,c.type=="article"?(a(),E(ne,{key:P.value,modelValue:n(e).content,"onUpdate:modelValue":r[7]||(r[7]=o=>n(e).content=o)},null,8,["modelValue"])):(a(),l("div",Be,[n(e).content?m((a(),l("textarea",{key:0,required:"","onUpdate:modelValue":r[8]||(r[8]=o=>n(e).content=o),maxlength:"2000",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block h-32 w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring focus:ring-primary-blue focus:ring-opacity-40"},`
                                `,512)),[[T,n(e).content]]):g("",!0),n(e).content?(a(),l("span",De,i(n(e).content.length)+" of 2000 Characters",1)):g("",!0)]))])]),t("div",Ne,[n(u)==0?(a(),l("button",Ze," Save ")):g("",!0),n(u)==1?(a(),l("button",Re,[$(J,{size:"small"})])):g("",!0),$(X,{"enter-active-class":" transition-all  ","enter-from-class":" opacity-0  -translate-y-10","enter-to-class":"  opacity-1 translate-y-0","leave-active-class":"","leave-from-class":"","leave-to-class":""},{default:F(()=>[S.value!=""?(a(),l("span",Ie,i(S.value),1)):g("",!0)]),_:1})])],32)])])])}}};export{We as default};
