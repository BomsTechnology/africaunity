var v=(D,C,u)=>new Promise((z,_)=>{var U=a=>{try{c(u.next(a))}catch(y){_(y)}},q=a=>{try{c(u.throw(a))}catch(y){_(y)}},c=a=>a.done?z(a.value):Promise.resolve(a.value).then(U,q);c((u=u.apply(D,C)).next())});import{G as J,r as d,o as K,a as L,b as O,d as s,e as n,f as e,h as m,l as P,w as B,j as H,t as l,P as Q,k as x,m as W,I as f,K as X,J as h,F as k,x as w,g as M,U as Y}from"./app.js";import{u as ee}from"./universityServices.js";import{u as te}from"./continentServices.js";import{u as oe}from"./countryServices.js";import{u as re}from"./cityServices.js";import{u as se}from"./zoneServices.js";const ne={class:"relative min-h-screen w-full bg-white xl:mt-0 xl:p-4"},ie={class:"z-0 w-full p-4"},ae=e("div",{class:"flex w-full justify-between bg-white px-8 py-5"},[e("h1",{class:"text-4xl font-bold capitalize text-primary-blue"}," Add University ")],-1),le={class:"mx-auto w-full bg-white p-6"},de=e("h2",{class:"text-md font-light text-gray-700"}," Add a new University ",-1),ue={class:"mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},ce={class:"col-span-2"},ye=e("label",{class:"dark:text-gray-200 text-gray-700"},"Name",-1),pe=e("label",{class:"dark:text-gray-200 text-gray-700",for:"es"},"Continent",-1),me=["value"],fe=e("label",{class:"dark:text-gray-200 text-gray-700",for:"es"},"Zone",-1),_e=["value"],ge={key:1,value:"null"},be=e("label",{class:"dark:text-gray-200 text-gray-700",for:"es"},"Country",-1),ve=["value"],xe={key:1,value:"null"},he={class:""},ke=e("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"City",-1),we=["value"],Ce={key:1,value:"null"},ze={class:"col-span-2"},Ue=e("label",{class:"dark:text-gray-200 text-gray-700",for:"fr"},"Image",-1),qe={class:"col-span-2"},Ve=e("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Description",-1),Fe={class:"mt-6 flex flex-col items-end justify-end"},Se={key:0,type:"submit",class:"rounded bg-primary-blue px-6 py-2 leading-5 text-white focus:outline-none"},je={key:1,type:"submit",disabled:"",class:"rounded bg-blue-300 px-6 py-2 leading-5 text-white focus:outline-none"},De={key:0,class:"text-xs font-light italic"},Te={__name:"UniversityCreate",setup(D){const C=J(),{continents:u,getContinents:z}=te(),{countries:_,getCountries:U}=oe(),{cities:q,getCities:c}=re(),{zones:a,getZones:y}=se(),g=d(""),V=d(""),F=d(0);K(()=>v(this,null,function*(){sceditor.create(g.value,{format:"xhtml",style:"https://cdn.jsdelivr.net/npm/sceditor@3/minified/themes/content/default.min.css",height:400,toolbarExclude:"indent,outdent,email,date,time,ltr,rtl,print,subscript,superscript,table,code,quote,emoticon",icons:"material"}),g.value.value=="",F.value++,yield y(),yield z(),yield U(),yield c()}));const t=L({name:"",description:"",image:"",continent_id:"",country_id:"",city_id:"",zone_id:""}),S=d([]),b=d([]),N=d(null),p=d([]),R=()=>{p.value=q.value.filter(r=>r.country_id==t.country_id),t.city_id=""},Z=()=>{b.value=_.value.filter(r=>r.zone_id==t.zone_id),t.country_id="",t.city_id="",p.value=[]},E=()=>{S.value=a.value.filter(r=>r.continent_id==t.continent_id),t.zone_id="",t.country_id="",t.city_id="",p.value=[],b.value=[]},{createUniversity:T,errors:j,loading:$}=ee(),A=()=>v(this,null,function*(){if(t.description=g.value.value,F.value==1){F.value++,V.value="please click again";return}let r=new FormData;r.append("image",t.image),r.append("name",t.name),r.append("description",t.description),r.append("continent_id",t.continent_id),r.append("country_id",t.country_id),r.append("city_id",t.city_id),r.append("zone_id",t.zone_id),yield T(r),j.value==""&&C.push({name:"admin.university.index"})}),I=()=>v(this,null,function*(){t.image=N.value.files[0]});return(r,i)=>{const G=O("Spin");return s(),n("div",ne,[e("div",ie,[ae,e("section",le,[m(j)!=""?(s(),P(Q,{key:0},{default:B(()=>[H(l(m(j)),1)]),_:1})):x("",!0),de,e("form",{onSubmit:i[6]||(i[6]=W(o=>A(),["prevent"])),id:"universityform",enctype:"multipart/form-data"},[e("div",ue,[e("div",ce,[ye,f(e("input",{required:"","onUpdate:modelValue":i[0]||(i[0]=o=>t.name=o),type:"text",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[X,t.name]])]),e("div",null,[pe,f(e("select",{required:"",onChange:E,"onUpdate:modelValue":i[1]||(i[1]=o=>t.continent_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(s(!0),n(k,null,w(m(u),o=>(s(),n("option",{key:o.id,value:o.id},l(o.name_en),9,me))),128))],544),[[h,t.continent_id]])]),e("div",null,[fe,f(e("select",{required:"","onUpdate:modelValue":i[2]||(i[2]=o=>t.zone_id=o),onChange:Z,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[S.value.length!=0?(s(!0),n(k,{key:0},w(S.value,o=>(s(),n("option",{key:o.id,value:o.id},l(o.name_en),9,_e))),128)):(s(),n("option",ge," Requires "+l(r.$t("continent")),1))],544),[[h,t.zone_id]])]),e("div",null,[be,f(e("select",{required:"",onChange:R,"onUpdate:modelValue":i[3]||(i[3]=o=>t.country_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[b.value.length!=0?(s(!0),n(k,{key:0},w(b.value,o=>(s(),n("option",{key:o.id,value:o.id},l(o.name_en),9,ve))),128)):(s(),n("option",xe," Requires "+l(r.$t("zoned")),1))],544),[[h,t.country_id]])]),e("div",he,[ke,f(e("select",{required:"","onUpdate:modelValue":i[4]||(i[4]=o=>t.city_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[p.value.length!=0?(s(!0),n(k,{key:0},w(p.value,o=>(s(),n("option",{key:o.id,value:o.id},l(o.name_en),9,we))),128)):(s(),n("option",Ce," Requires "+l(r.$t("country")),1))],512),[[h,t.city_id]])]),e("div",ze,[Ue,e("input",{required:"",ref_key:"file",ref:N,onChange:i[5]||(i[5]=o=>I()),type:"file",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,544)]),e("div",qe,[Ve,e("textarea",{required:"",ref_key:"textarea",ref:g,class:"h-96 w-full"},`
                            `,512)])]),e("div",Fe,[m($)==0?(s(),n("button",Se," Save ")):x("",!0),m($)==1?(s(),n("button",je,[M(G,{size:"small"})])):x("",!0),M(Y,{"enter-active-class":" transition-all  ","enter-from-class":" opacity-0  -translate-y-10","enter-to-class":"  opacity-1 translate-y-0","leave-active-class":"","leave-from-class":"","leave-to-class":""},{default:B(()=>[V.value!=""?(s(),n("span",De,l(V.value),1)):x("",!0)]),_:1})])],32)])])])}}};export{Te as default};
