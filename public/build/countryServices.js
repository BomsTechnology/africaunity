var n=(l,i,o)=>new Promise((a,e)=>{var y=s=>{try{c(o.next(s))}catch(p){e(p)}},g=s=>{try{c(o.throw(s))}catch(p){e(p)}},c=s=>s.done?a(s.value):Promise.resolve(s.value).then(y,g);c((o=o.apply(l,i)).next())});import{G as h,r as v,u as f,p as u}from"./app.js";function $(){const l=h(),i=v([]),o=v([]),a=v(""),e=v(0),{locale:y}=f();return{countries:i,country:o,errors:a,loading:e,getCountries:()=>n(this,null,function*(){a.value="",e.value=!0;let r=yield u.get(`/api/countries/language/${y.value}`,{headers:{Authorization:`Bearer ${localStorage.token}`}});i.value=r.data.data,e.value=!1}),getCountry:r=>n(this,null,function*(){a.value="",e.value=!0;let t=yield u.get("/api/countries/"+r,{headers:{Authorization:`Bearer ${localStorage.token}`}});e.value=0,o.value=t.data.data}),createCountry:r=>n(this,null,function*(){a.value="";try{e.value=!0,yield u.post("/api/countries",r,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e.value=!1,l.push({name:"admin.country.index"})}catch(t){if(t.response.status==422){e.value=0;for(const d in t.response.data.errors)a.value+=t.response.data.errors[d][0]+`
`}}}),updateCountry:r=>n(this,null,function*(){a.value="";try{e.value=!0,yield u.put("/api/countries/"+r,o.value,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e.value=!1,l.push({name:"admin.country.index"})}catch(t){if(e.value=0,t.response.status==422)for(const d in t.response.data.errors)a.value+=t.response.data.errors[d][0]+`	
`}}),destroyCountry:r=>n(this,null,function*(){a.value="";try{e.value=!0,yield u.delete(`/api/countries/${JSON.stringify(r)}`,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e.value=!1}catch(t){e.value=0,t.response.status=="500"&&(a.value="Impossible de supprimer ce pays")}})}}export{$ as u};
