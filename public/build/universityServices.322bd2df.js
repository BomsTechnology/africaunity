var i=(s,v,t)=>new Promise((a,c)=>{var d=o=>{try{g(t.next(o))}catch(m){c(m)}},y=o=>{try{g(t.throw(o))}catch(m){c(m)}},g=o=>o.done?a(o.value):Promise.resolve(o.value).then(d,y);g((t=t.apply(s,v)).next())});import{r as u,p as n,q as l}from"./app.59e8d623.js";function I(){const s=u([]),v=u([]),t=u(""),a=u(0),c=u(!1),d=u(1);return{filterUniversities:r=>i(this,null,function*(){t.value="";try{a.value=3;let e=yield n.post("/api/universities-filter",r,{headers:{Authorization:`Bearer ${localStorage.token}`}});s.value=e.data.data,a.value=!1}catch(e){e.response.status==401&&(l.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}}),isAll:c,page:d,universities:s,university:v,errors:t,loading:a,getUniversities:r=>i(this,null,function*(){t.value="";try{a.value=!0;let e=yield n.get("/api/universities/"+r+"?page="+d.value,{headers:{Authorization:`Bearer ${localStorage.token}`}});d.value==1?s.value=e.data.data:s.value=s.value.concat(e.data.data),a.value=!1,e.data.data.length==0&&(c.value=!0)}catch(e){e.response.status==401&&(l.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}}),getAllUniversities:r=>i(this,null,function*(){t.value="";try{s.value=[],a.value=!0;let e=yield n.get("/api/university/all/"+r,{headers:{Authorization:`Bearer ${localStorage.token}`}});s.value=e.data.data,a.value=!1}catch(e){e.response.status==401&&(l.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}}),getUniversity:r=>i(this,null,function*(){t.value="";try{a.value=!0;let e=yield n.get("/api/universities/"+r,{headers:{Authorization:`Bearer ${localStorage.token}`}});a.value=0,v.value=e.data.data}catch(e){e.response.status==401&&(l.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}}),createUniversity:r=>i(this,null,function*(){t.value="";try{a.value=!0,yield n.post("/api/universities",r,{headers:{Authorization:`Bearer ${localStorage.token}`}}),a.value=!1,l.push({name:"admin.university.index"})}catch(e){if(e.response.status==422){a.value=0;for(const p in e.response.data.errors)t.value+=e.response.data.errors[p][0]+`
`}}}),updateUniversity:(r,e)=>i(this,null,function*(){t.value="";try{a.value=!0,yield n.post("/api/universities/"+e,r,{headers:{Authorization:`Bearer ${localStorage.token}`}}),a.value=!1,l.push({name:"admin.university.index"})}catch(p){if(a.value=0,p.response.status==422)for(const h in p.response.data.errors)t.value+=p.response.data.errors[h][0]+`	
`}}),destroyUniversity:r=>i(this,null,function*(){t.value="";try{a.value=!0,yield n.delete(`/api/universities/${JSON.stringify(r)}`,{headers:{Authorization:`Bearer ${localStorage.token}`}}),a.value=!1}catch(e){a.value=0,e.response.status=="500"&&(t.value="Impossible de supprimer cette universit\xE9")}}),getUniversity2:r=>i(this,null,function*(){t.value="";try{a.value=!0;let e=yield n.get("/api/universities2/"+r,{headers:{Authorization:`Bearer ${localStorage.token}`}});a.value=0,v.value=e.data.data}catch(e){e.response.status==401&&(l.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user"))}})}}export{I as u};
