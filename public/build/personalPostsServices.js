var r=(o,p,a)=>new Promise((s,c)=>{var d=n=>{try{v(a.next(n))}catch(g){c(g)}},P=n=>{try{v(a.throw(n))}catch(g){c(g)}},v=n=>n.done?s(n.value):Promise.resolve(n.value).then(d,P);v((a=a.apply(o,p)).next())});import{r as u,p as l,q as i}from"./app.js";function A(){const o=u([]),p=u([]),a=u(""),s=u(0),c=u(!1),d=u(1);return{isAll:c,page:d,filterPersonalPost:t=>r(this,null,function*(){a.value="";try{s.value=3;let e=yield l.post("/api/personalPosts-filter",t,{headers:{Authorization:`Bearer ${localStorage.token}`}});o.value=e.data.data,s.value=0}catch(e){e.response.status==401?(i.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=e.response.data.message}}),personalPosts:o,personalPost:p,errors:a,loading:s,getPersonalPostsLang:t=>r(this,null,function*(){a.value="";try{s.value=!0;let e=yield l.get("/api/personalPosts-lang/"+t,{headers:{Authorization:`Bearer ${localStorage.token}`}});o.value=e.data.data,s.value=!1}catch(e){e.response.status==401?(i.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=e.response.data.message}}),getPersonalPosts:()=>r(this,null,function*(){a.value="",s.value=!0;try{let t=yield l.get("/api/personalPosts?page="+d.value,{headers:{Authorization:`Bearer ${localStorage.token}`}});d.value==1?o.value=t.data.data:o.value=o.value.concat(t.data.data),s.value=!1,t.data.data.length==0&&(c.value=!0)}catch(t){t.response.status==401?(i.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=t.response.data.message}}),getPersonalPost:t=>r(this,null,function*(){a.value="";try{s.value=!0;let e=yield l.get("/api/personalPosts/"+t,{headers:{Authorization:`Bearer ${localStorage.token}`}});s.value=0,p.value=e.data.data}catch(e){e.response.status==401?(i.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=e.response.data.message}}),createPersonalPost:t=>r(this,null,function*(){a.value="";try{s.value=!0,yield l.post("/api/personalPosts",t,{headers:{Authorization:`Bearer ${localStorage.token}`,"Content-Type":"multipart/form-data"}}),s.value=!1}catch(e){if(s.value=0,e.response.status==422)for(const m in e.response.data.errors)a.value+=e.response.data.errors[m][0]+`
`;else a.value=e.response.data.message}}),updatePersonalPost:t=>r(this,null,function*(){a.value="";try{s.value=!0,yield l.post("/api/personalPosts/"+p.value.id,t,{headers:{Authorization:`Bearer ${localStorage.token}`,"Content-Type":"multipart/form-data"}}),s.value=!1}catch(e){if(s.value=0,e.response.status==422)for(const m in e.response.data.errors)a.value+=e.response.data.errors[m][0]+`	
`;else a.value=e.response.data.message}}),destroyPersonalPost:t=>r(this,null,function*(){a.value="";try{s.value=!0,yield l.delete(`/api/personalPosts/${JSON.stringify(t)}`,{headers:{Authorization:`Bearer ${localStorage.token}`}}),s.value=!1}catch(e){s.value=0,e.response.status=="500"?a.value="Impossible de supprimer ce personalPost":a.value=e.response.data.message}}),getPersonalPostsAll:t=>r(this,null,function*(){a.value="";try{s.value=!0;let e=yield l.get("/api/personalPosts-all/",{headers:{Authorization:`Bearer ${localStorage.token}`}});o.value=e.data.data,s.value=!1}catch(e){e.response.status==401?(i.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=e.response.data.message}}),getPersonalPostsUser:t=>r(this,null,function*(){a.value="";try{s.value=!0;let e=yield l.get("/api/personalPosts-user/"+t,{headers:{Authorization:`Bearer ${localStorage.token}`}});o.value=e.data.data,s.value=!1}catch(e){e.response.status==401?(i.push({name:"login",params:{redirect:"not-login"}}),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")):a.value=e.response.data.message}})}}export{A as u};
