import{r as n,p as s}from"./app.4a599ac6.js";function y(){const r=n([]),u=n([]),o=n(""),e=n(0);return{comments:r,comment:u,errors:o,loading:e,getComments:async()=>{o.value="",e.value=!0;let t=await s.get("/api/comments",{headers:{Authorization:`Bearer ${localStorage.token}`}});r.value=t.data.data,e.value=!1},getComment:async t=>{o.value="",e.value=!0;let a=await s.get("/api/comments/"+t,{headers:{Authorization:`Bearer ${localStorage.token}`}});e.value=0,u.value=a.data.data},createComment:async t=>{o.value="";try{e.value=!0,await s.post("/api/comments",t,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e.value=!1}catch(a){if(a.response.status==422){e.value=0;for(const l in a.response.data.errors)o.value+=a.response.data.errors[l][0]+`
`}}},updateComment:async t=>{o.value="";try{e.value=!0,await s.put("/api/comments/"+t.id,t,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e.value=!1}catch(a){if(e.value=0,a.response.status==422)for(const l in a.response.data.errors)o.value+=a.response.data.errors[l][0]+`	
`}},destroyComment:async t=>{console.log(t),o.value="";try{return e.value=!0,await s.delete(`/api/comments/${JSON.stringify(t)}`,{headers:{Authorization:`Bearer ${localStorage.token}`}}),e.value=!1,!0}catch{e.value=0,o.value="Impossible de supprimer ce comment"}},getCommentsPost:async t=>{o.value="",e.value=!0;let a=await s.get("/api/comments-post/"+t,{headers:{Authorization:`Bearer ${localStorage.token}`}});r.value=a.data.data,e.value=!1},getCommentsUser:async t=>{o.value="",e.value=!0;let a=await s.get("/api/comments-user/"+t,{headers:{Authorization:`Bearer ${localStorage.token}`}});r.value=a.data.data,e.value=!1}}}export{y as u};
